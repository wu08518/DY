(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{335:function(t,e,r){"use strict";var n=r(5),o=r(27),h=r(34),c=r(175),l=r(86),d=r(14),m=r(59).f,f=r(87).f,y=r(13).f,x=r(336).trim,P=n.Number,T=P,w=P.prototype,A="Number"==h(r(116)(w)),E="trim"in String.prototype,C=function(t){var e=l(t,!1);if("string"==typeof e&&e.length>2){var r,n,o,h=(e=E?e.trim():x(e,3)).charCodeAt(0);if(43===h||45===h){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===h){switch(e.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+e}for(var code,c=e.slice(2),i=0,d=c.length;i<d;i++)if((code=c.charCodeAt(i))<48||code>o)return NaN;return parseInt(c,n)}}return+e};if(!P(" 0o1")||!P("0b1")||P("+0x1")){P=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof P&&(A?d(function(){w.valueOf.call(r)}):"Number"!=h(r))?c(new T(C(e)),r,P):C(e)};for(var k,N=r(11)?m(T):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;N.length>S;S++)o(T,k=N[S])&&!o(P,k)&&y(P,k,f(T,k));P.prototype=w,w.constructor=P,r(16)(n,"Number",P)}},336:function(t,e,r){var n=r(10),o=r(33),h=r(14),c=r(337),l="["+c+"]",d=RegExp("^"+l+l+"*"),m=RegExp(l+l+"*$"),f=function(t,e,r){var o={},l=h(function(){return!!c[t]()||"​"!="​"[t]()}),d=o[t]=l?e(y):c[t];r&&(o[r]=d),n(n.P+n.F*l,"String",o)},y=f.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(d,"")),2&e&&(t=t.replace(m,"")),t};t.exports=f},337:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},338:function(t,e,r){var n=r(10);n(n.S,"Number",{isInteger:r(339)})},339:function(t,e,r){var n=r(15),o=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&o(t)===t}},340:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=!0;class o{constructor(label,t={}){this.label=label,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.rightAssociative=!!t.rightAssociative,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=null!=t.binop?t.binop:null,this.updateContext=null}}const h=new Map;function c(t,e={}){e.keyword=t;const r=new o(t,e);return h.set(t,r),r}function l(t,e){return new o(t,{beforeExpr:n,binop:e})}const d={num:new o("num",{startsExpr:!0}),bigint:new o("bigint",{startsExpr:!0}),regexp:new o("regexp",{startsExpr:!0}),string:new o("string",{startsExpr:!0}),name:new o("name",{startsExpr:!0}),eof:new o("eof"),bracketL:new o("[",{beforeExpr:n,startsExpr:!0}),bracketR:new o("]"),braceL:new o("{",{beforeExpr:n,startsExpr:!0}),braceBarL:new o("{|",{beforeExpr:n,startsExpr:!0}),braceR:new o("}"),braceBarR:new o("|}"),parenL:new o("(",{beforeExpr:n,startsExpr:!0}),parenR:new o(")"),comma:new o(",",{beforeExpr:n}),semi:new o(";",{beforeExpr:n}),colon:new o(":",{beforeExpr:n}),doubleColon:new o("::",{beforeExpr:n}),dot:new o("."),question:new o("?",{beforeExpr:n}),questionDot:new o("?."),arrow:new o("=>",{beforeExpr:n}),template:new o("template"),ellipsis:new o("...",{beforeExpr:n}),backQuote:new o("`",{startsExpr:!0}),dollarBraceL:new o("${",{beforeExpr:n,startsExpr:!0}),at:new o("@"),hash:new o("#",{startsExpr:!0}),interpreterDirective:new o("#!..."),eq:new o("=",{beforeExpr:n,isAssign:!0}),assign:new o("_=",{beforeExpr:n,isAssign:!0}),incDec:new o("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),bang:new o("!",{beforeExpr:n,prefix:!0,startsExpr:!0}),tilde:new o("~",{beforeExpr:n,prefix:!0,startsExpr:!0}),pipeline:l("|>",0),nullishCoalescing:l("??",1),logicalOR:l("||",1),logicalAND:l("&&",2),bitwiseOR:l("|",3),bitwiseXOR:l("^",4),bitwiseAND:l("&",5),equality:l("==/!=/===/!==",6),relational:l("</>/<=/>=",7),bitShift:l("<</>>/>>>",8),plusMin:new o("+/-",{beforeExpr:n,binop:9,prefix:!0,startsExpr:!0}),modulo:l("%",10),star:l("*",10),slash:l("/",10),exponent:new o("**",{beforeExpr:n,binop:11,rightAssociative:!0}),_break:c("break"),_case:c("case",{beforeExpr:n}),_catch:c("catch"),_continue:c("continue"),_debugger:c("debugger"),_default:c("default",{beforeExpr:n}),_do:c("do",{isLoop:!0,beforeExpr:n}),_else:c("else",{beforeExpr:n}),_finally:c("finally"),_for:c("for",{isLoop:!0}),_function:c("function",{startsExpr:!0}),_if:c("if"),_return:c("return",{beforeExpr:n}),_switch:c("switch"),_throw:c("throw",{beforeExpr:n,prefix:!0,startsExpr:!0}),_try:c("try"),_var:c("var"),_const:c("const"),_while:c("while",{isLoop:!0}),_with:c("with"),_new:c("new",{beforeExpr:n,startsExpr:!0}),_this:c("this",{startsExpr:!0}),_super:c("super",{startsExpr:!0}),_class:c("class",{startsExpr:!0}),_extends:c("extends",{beforeExpr:n}),_export:c("export"),_import:c("import",{startsExpr:!0}),_null:c("null",{startsExpr:!0}),_true:c("true",{startsExpr:!0}),_false:c("false",{startsExpr:!0}),_in:c("in",{beforeExpr:n,binop:7}),_instanceof:c("instanceof",{beforeExpr:n,binop:7}),_typeof:c("typeof",{beforeExpr:n,prefix:!0,startsExpr:!0}),_void:c("void",{beforeExpr:n,prefix:!0,startsExpr:!0}),_delete:c("delete",{beforeExpr:n,prefix:!0,startsExpr:!0})},m=0,f=1,y=2,x=4,P=8,T=16,w=32,A=64,E=128,C=256,k=f|y;function N(t,e){return y|(t?x:0)|(e?P:0)}const S=1,I=2,v=4,L=8,O=16,D=128,R=256,M=512,_=1024,F=S|I|L|D,j=0|S|L|0,B=0|S|v|0,U=0|S|O|0,V=0|I|D,K=0|I,W=S|I|L|R,X=0|_,J=64,$=64|S,z=W|M,H=X;function G(t){return null!=t&&"Property"===t.type&&"init"===t.kind&&!1===t.method}const Q=/\r\n?|[\n\u2028\u2029]/,Y=new RegExp(Q.source,"g");function Z(code){switch(code){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}const tt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;function et(code){switch(code){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}class st{constructor(t,e,r,n){this.token=t,this.isExpr=!!e,this.preserveSpace=!!r,this.override=n}}const it={braceStatement:new st("{",!1),braceExpression:new st("{",!0),templateQuasi:new st("${",!1),parenStatement:new st("(",!1),parenExpression:new st("(",!0),template:new st("`",!0,!0,p=>p.readTmplToken()),functionExpression:new st("function",!0),functionStatement:new st("function",!1)};d.parenR.updateContext=d.braceR.updateContext=function(){if(1===this.state.context.length)return void(this.state.exprAllowed=!0);let t=this.state.context.pop();t===it.braceStatement&&"function"===this.curContext().token&&(t=this.state.context.pop()),this.state.exprAllowed=!t.isExpr},d.name.updateContext=function(t){let e=!1;t!==d.dot&&("of"===this.state.value&&!this.state.exprAllowed||"yield"===this.state.value&&this.scope.inGenerator)&&(e=!0),this.state.exprAllowed=e,this.state.isIterator&&(this.state.isIterator=!1)},d.braceL.updateContext=function(t){this.state.context.push(this.braceIsBlock(t)?it.braceStatement:it.braceExpression),this.state.exprAllowed=!0},d.dollarBraceL.updateContext=function(){this.state.context.push(it.templateQuasi),this.state.exprAllowed=!0},d.parenL.updateContext=function(t){const e=t===d._if||t===d._for||t===d._with||t===d._while;this.state.context.push(e?it.parenStatement:it.parenExpression),this.state.exprAllowed=!0},d.incDec.updateContext=function(){},d._function.updateContext=d._class.updateContext=function(t){!t.beforeExpr||t===d.semi||t===d._else||t===d._return&&Q.test(this.input.slice(this.state.lastTokEnd,this.state.start))||(t===d.colon||t===d.braceL)&&this.curContext()===it.b_stat?this.state.context.push(it.functionStatement):this.state.context.push(it.functionExpression),this.state.exprAllowed=!1},d.backQuote.updateContext=function(){this.curContext()===it.template?this.state.context.pop():this.state.context.push(it.template),this.state.exprAllowed=!1};const at={strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},nt=new Set(at.strict),ot=new Set(at.strict.concat(at.strictBind)),ht=(t,e)=>e&&"await"===t||"enum"===t;function pt(t,e){return ht(t,e)||nt.has(t)}function ct(t,e){return ht(t,e)||ot.has(t)}const lt=/^in(stanceof)?$/;let ut="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-Ᶎꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭧꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",mt="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿";const ft=new RegExp("["+ut+"]"),yt=new RegExp("["+ut+mt+"]");ut=mt=null;const xt=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],Pt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function gt(code,t){let e=65536;for(let i=0,r=t.length;i<r;i+=2){if((e+=t[i])>code)return!1;if((e+=t[i+1])>=code)return!0}return!1}function Tt(code){return code<65?36===code:code<=90||(code<97?95===code:code<=122||(code<=65535?code>=170&&ft.test(String.fromCharCode(code)):gt(code,xt)))}function bt(code){return code<48?36===code:code<58||!(code<65)&&(code<=90||(code<97?95===code:code<=122||(code<=65535?code>=170&&yt.test(String.fromCharCode(code)):gt(code,xt)||gt(code,Pt))))}const wt=["any","bool","boolean","empty","false","mixed","null","number","static","string","true","typeof","void","interface","extends","_"];function At(t){return"type"===t.importKind||"typeof"===t.importKind}function Et(t){return(t.type===d.name||!!t.type.keyword)&&"from"!==t.value}const Ct={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};const kt=/\*?\s*@((?:no)?flow)\b/;const Nt={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},St=/^[\da-fA-F]+$/,It=/^\d+$/;function vt(object){return!!object&&("JSXOpeningFragment"===object.type||"JSXClosingFragment"===object.type)}function Lt(object){if("JSXIdentifier"===object.type)return object.name;if("JSXNamespacedName"===object.type)return object.namespace.name+":"+object.name.name;if("JSXMemberExpression"===object.type)return Lt(object.object)+"."+Lt(object.property);throw new Error("Node had unexpected type: "+object.type)}it.j_oTag=new st("<tag",!1),it.j_cTag=new st("</tag",!1),it.j_expr=new st("<tag>...</tag>",!0,!0),d.jsxName=new o("jsxName"),d.jsxText=new o("jsxText",{beforeExpr:!0}),d.jsxTagStart=new o("jsxTagStart",{startsExpr:!0}),d.jsxTagEnd=new o("jsxTagEnd"),d.jsxTagStart.updateContext=function(){this.state.context.push(it.j_expr),this.state.context.push(it.j_oTag),this.state.exprAllowed=!1},d.jsxTagEnd.updateContext=function(t){const e=this.state.context.pop();e===it.j_oTag&&t===d.slash||e===it.j_cTag?(this.state.context.pop(),this.state.exprAllowed=this.curContext()===it.j_expr):this.state.exprAllowed=!0};class Ot{constructor(t){this.var=[],this.lexical=[],this.functions=[],this.flags=t}}class Dt{constructor(t,e){this.scopeStack=[],this.undefinedExports=new Map,this.raise=t,this.inModule=e}get inFunction(){return(this.currentVarScope().flags&y)>0}get inGenerator(){return(this.currentVarScope().flags&P)>0}get inAsync(){return(this.currentVarScope().flags&x)>0}get allowSuper(){return(this.currentThisScope().flags&A)>0}get allowDirectSuper(){return(this.currentThisScope().flags&E)>0}get inNonArrowFunction(){return(this.currentThisScope().flags&y)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(t){return new Ot(t)}enter(t){this.scopeStack.push(this.createScope(t))}exit(){this.scopeStack.pop()}treatFunctionsAsVarInScope(t){return!!(t.flags&y||!this.inModule&&t.flags&f)}declareName(t,e,r){let n=this.currentScope();if(e&L||e&O)this.checkRedeclarationInScope(n,t,e,r),e&O?n.functions.push(t):n.lexical.push(t),e&L&&this.maybeExportDefined(n,t);else if(e&v)for(let i=this.scopeStack.length-1;i>=0&&(n=this.scopeStack[i],this.checkRedeclarationInScope(n,t,e,r),n.var.push(t),this.maybeExportDefined(n,t),!(n.flags&k));--i);this.inModule&&n.flags&f&&this.undefinedExports.delete(t)}maybeExportDefined(t,e){this.inModule&&t.flags&f&&this.undefinedExports.delete(e)}checkRedeclarationInScope(t,e,r,n){this.isRedeclaredInScope(t,e,r)&&this.raise(n,`Identifier '${e}' has already been declared`)}isRedeclaredInScope(t,e,r){return!!(r&S)&&(r&L?t.lexical.indexOf(e)>-1||t.functions.indexOf(e)>-1||t.var.indexOf(e)>-1:r&O?t.lexical.indexOf(e)>-1||!this.treatFunctionsAsVarInScope(t)&&t.var.indexOf(e)>-1:t.lexical.indexOf(e)>-1&&!(t.flags&w&&t.lexical[0]===e)||!this.treatFunctionsAsVarInScope(t)&&t.functions.indexOf(e)>-1)}checkLocalExport(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&-1===this.scopeStack[0].functions.indexOf(t.name)&&this.undefinedExports.set(t.name,t.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScope(){for(let i=this.scopeStack.length-1;;i--){const t=this.scopeStack[i];if(t.flags&k)return t}}currentThisScope(){for(let i=this.scopeStack.length-1;;i--){const t=this.scopeStack[i];if((t.flags&k||t.flags&C)&&!(t.flags&T))return t}}}class Rt extends Ot{constructor(...t){super(...t),this.types=[],this.enums=[],this.constEnums=[],this.classes=[],this.exportOnlyBindings=[]}}class Mt extends Dt{createScope(t){return new Rt(t)}declareName(t,e,r){const n=this.currentScope();if(e&_)return this.maybeExportDefined(n,t),void n.exportOnlyBindings.push(t);super.declareName(...arguments),e&I&&(e&S||(this.checkRedeclarationInScope(n,t,e,r),this.maybeExportDefined(n,t)),n.types.push(t)),e&R&&n.enums.push(t),e&M&&n.constEnums.push(t),e&D&&n.classes.push(t)}isRedeclaredInScope(t,e,r){if(t.enums.indexOf(e)>-1){if(r&R){return!!(r&M)!==t.constEnums.indexOf(e)>-1}return!0}return r&D&&t.classes.indexOf(e)>-1?t.lexical.indexOf(e)>-1&&!!(r&S):!!(r&I&&t.types.indexOf(e)>-1)||super.isRedeclaredInScope(...arguments)}checkLocalExport(t){-1===this.scopeStack[0].types.indexOf(t.name)&&-1===this.scopeStack[0].exportOnlyBindings.indexOf(t.name)&&super.checkLocalExport(t)}}function _t(t){if(null==t)throw new Error(`Unexpected ${t} value.`);return t}function Ft(t){if(!t)throw new Error("Assert fail")}d.placeholder=new o("%%",{startsExpr:!0});function jt(t,e){return t.some(t=>Array.isArray(t)?t[0]===e:t===e)}function Bt(t,e,option){const r=t.find(t=>Array.isArray(t)?t[0]===e:t===e);return r&&Array.isArray(r)?r[1][option]:null}const qt=["minimal","smart","fsharp"];const Ut={estree:t=>(class extends t{estreeParseRegExpLiteral({pattern:pattern,flags:t}){let e=null;try{e=new RegExp(pattern,t)}catch(t){}const r=this.estreeParseLiteral(e);return r.regex={pattern:pattern,flags:t},r}estreeParseLiteral(t){return this.parseLiteral(t,"Literal")}directiveToStmt(t){const e=t.value,r=this.startNodeAt(t.start,t.loc.start),n=this.startNodeAt(e.start,e.loc.start);return n.value=e.value,n.raw=e.extra.raw,r.expression=this.finishNodeAt(n,"Literal",e.end,e.loc.end),r.directive=e.extra.raw.slice(1,-1),this.finishNodeAt(r,"ExpressionStatement",t.end,t.loc.end)}initFunction(t,e){super.initFunction(t,e),t.expression=!1}checkDeclaration(t){G(t)?this.checkDeclaration(t.value):super.checkDeclaration(t)}checkGetterSetterParams(t){const e=t,r="get"===e.kind?0:1,n=e.start;e.value.params.length!==r&&("get"===e.kind?this.raise(n,"getter must not have any formal parameters"):this.raise(n,"setter must have exactly one formal parameter")),"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raise(n,"setter function argument must not be a rest parameter")}checkLVal(t,e=J,r,n){switch(t.type){case"ObjectPattern":t.properties.forEach(t=>{this.checkLVal("Property"===t.type?t.value:t,e,r,"object destructuring pattern")});break;default:super.checkLVal(t,e,r,n)}}checkPropClash(t,e){if("SpreadElement"===t.type||t.computed||t.method||t.shorthand)return;const r=t.key;"__proto__"===("Identifier"===r.type?r.name:String(r.value))&&"init"===t.kind&&(e.proto&&this.raise(r.start,"Redefinition of __proto__ property"),e.proto=!0)}isStrictBody(t){if("BlockStatement"===t.body.type&&t.body.body.length>0)for(let e=0,r=t.body.body;e<r.length;e++){const t=r[e];if("ExpressionStatement"!==t.type||"Literal"!==t.expression.type)break;if("use strict"===t.expression.value)return!0}return!1}isValidDirective(t){return!("ExpressionStatement"!==t.type||"Literal"!==t.expression.type||"string"!=typeof t.expression.value||t.expression.extra&&t.expression.extra.parenthesized)}stmtToDirective(t){const e=super.stmtToDirective(t),r=t.expression.value;return e.value.value=r,e}parseBlockBody(t,e,r,n){super.parseBlockBody(t,e,r,n);const o=t.directives.map(t=>this.directiveToStmt(t));t.body=o.concat(t.body),delete t.directives}pushClassMethod(t,e,r,n,o,h){this.parseMethod(e,r,n,o,h,"ClassMethod",!0),e.typeParameters&&(e.value.typeParameters=e.typeParameters,delete e.typeParameters),t.body.push(e)}parseExprAtom(t){switch(this.state.type){case d.regexp:return this.estreeParseRegExpLiteral(this.state.value);case d.num:case d.string:return this.estreeParseLiteral(this.state.value);case d._null:return this.estreeParseLiteral(null);case d._true:return this.estreeParseLiteral(!0);case d._false:return this.estreeParseLiteral(!1);default:return super.parseExprAtom(t)}}parseLiteral(t,e,r,n){const o=super.parseLiteral(t,e,r,n);return o.raw=o.extra.raw,delete o.extra,o}parseFunctionBody(t,e,r=!1){super.parseFunctionBody(t,e,r),t.expression="BlockStatement"!==t.body.type}parseMethod(t,e,r,n,o,h,c=!1){let l=this.startNode();return l.kind=t.kind,(l=super.parseMethod(l,e,r,n,o,h,c)).type="FunctionExpression",delete l.kind,t.value=l,h="ClassMethod"===h?"MethodDefinition":h,this.finishNode(t,h)}parseObjectMethod(t,e,r,n,o){const h=super.parseObjectMethod(t,e,r,n,o);return h&&(h.type="Property","method"===h.kind&&(h.kind="init"),h.shorthand=!1),h}parseObjectProperty(t,e,r,n,o){const h=super.parseObjectProperty(t,e,r,n,o);return h&&(h.kind="init",h.type="Property"),h}toAssignable(t,e,r){return G(t)?(this.toAssignable(t.value,e,r),t):super.toAssignable(t,e,r)}toAssignableObjectExpressionProp(t,e,r){"get"===t.kind||"set"===t.kind?this.raise(t.key.start,"Object pattern can't contain getter or setter"):t.method?this.raise(t.key.start,"Object pattern can't contain methods"):super.toAssignableObjectExpressionProp(t,e,r)}}),jsx:t=>(class extends t{jsxReadToken(){let t="",e=this.state.pos;for(;;){this.state.pos>=this.length&&this.raise(this.state.start,"Unterminated JSX contents");const r=this.input.charCodeAt(this.state.pos);switch(r){case 60:case 123:return this.state.pos===this.state.start?60===r&&this.state.exprAllowed?(++this.state.pos,this.finishToken(d.jsxTagStart)):super.getTokenFromCode(r):(t+=this.input.slice(e,this.state.pos),this.finishToken(d.jsxText,t));case 38:t+=this.input.slice(e,this.state.pos),t+=this.jsxReadEntity(),e=this.state.pos;break;default:Z(r)?(t+=this.input.slice(e,this.state.pos),t+=this.jsxReadNewLine(!0),e=this.state.pos):++this.state.pos}}}jsxReadNewLine(t){const e=this.input.charCodeAt(this.state.pos);let r;return++this.state.pos,13===e&&10===this.input.charCodeAt(this.state.pos)?(++this.state.pos,r=t?"\n":"\r\n"):r=String.fromCharCode(e),++this.state.curLine,this.state.lineStart=this.state.pos,r}jsxReadString(t){let e="",r=++this.state.pos;for(;;){this.state.pos>=this.length&&this.raise(this.state.start,"Unterminated string constant");const n=this.input.charCodeAt(this.state.pos);if(n===t)break;38===n?(e+=this.input.slice(r,this.state.pos),e+=this.jsxReadEntity(),r=this.state.pos):Z(n)?(e+=this.input.slice(r,this.state.pos),e+=this.jsxReadNewLine(!1),r=this.state.pos):++this.state.pos}return e+=this.input.slice(r,this.state.pos++),this.finishToken(d.string,e)}jsxReadEntity(){let t,e="",r=0,n=this.input[this.state.pos];const o=++this.state.pos;for(;this.state.pos<this.length&&r++<10;){if(";"===(n=this.input[this.state.pos++])){"#"===e[0]?"x"===e[1]?(e=e.substr(2),St.test(e)&&(t=String.fromCodePoint(parseInt(e,16)))):(e=e.substr(1),It.test(e)&&(t=String.fromCodePoint(parseInt(e,10)))):t=Nt[e];break}e+=n}return t||(this.state.pos=o,"&")}jsxReadWord(){let t;const e=this.state.pos;do{t=this.input.charCodeAt(++this.state.pos)}while(bt(t)||45===t);return this.finishToken(d.jsxName,this.input.slice(e,this.state.pos))}jsxParseIdentifier(){const t=this.startNode();return this.match(d.jsxName)?t.name=this.state.value:this.state.type.keyword?t.name=this.state.type.keyword:this.unexpected(),this.next(),this.finishNode(t,"JSXIdentifier")}jsxParseNamespacedName(){const t=this.state.start,e=this.state.startLoc,r=this.jsxParseIdentifier();if(!this.eat(d.colon))return r;const n=this.startNodeAt(t,e);return n.namespace=r,n.name=this.jsxParseIdentifier(),this.finishNode(n,"JSXNamespacedName")}jsxParseElementName(){const t=this.state.start,e=this.state.startLoc;let r=this.jsxParseNamespacedName();for(;this.eat(d.dot);){const n=this.startNodeAt(t,e);n.object=r,n.property=this.jsxParseIdentifier(),r=this.finishNode(n,"JSXMemberExpression")}return r}jsxParseAttributeValue(){let t;switch(this.state.type){case d.braceL:if(t=this.startNode(),this.next(),"JSXEmptyExpression"===(t=this.jsxParseExpressionContainer(t)).expression.type)throw this.raise(t.start,"JSX attributes must only be assigned a non-empty expression");return t;case d.jsxTagStart:case d.string:return this.parseExprAtom();default:throw this.raise(this.state.start,"JSX value should be either an expression or a quoted JSX text")}}jsxParseEmptyExpression(){const t=this.startNodeAt(this.state.lastTokEnd,this.state.lastTokEndLoc);return this.finishNodeAt(t,"JSXEmptyExpression",this.state.start,this.state.startLoc)}jsxParseSpreadChild(t){return this.next(),t.expression=this.parseExpression(),this.expect(d.braceR),this.finishNode(t,"JSXSpreadChild")}jsxParseExpressionContainer(t){return this.match(d.braceR)?t.expression=this.jsxParseEmptyExpression():t.expression=this.parseExpression(),this.expect(d.braceR),this.finishNode(t,"JSXExpressionContainer")}jsxParseAttribute(){const t=this.startNode();return this.eat(d.braceL)?(this.expect(d.ellipsis),t.argument=this.parseMaybeAssign(),this.expect(d.braceR),this.finishNode(t,"JSXSpreadAttribute")):(t.name=this.jsxParseNamespacedName(),t.value=this.eat(d.eq)?this.jsxParseAttributeValue():null,this.finishNode(t,"JSXAttribute"))}jsxParseOpeningElementAt(t,e){const r=this.startNodeAt(t,e);return this.match(d.jsxTagEnd)?(this.expect(d.jsxTagEnd),this.finishNode(r,"JSXOpeningFragment")):(r.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(r))}jsxParseOpeningElementAfterName(t){const e=[];for(;!this.match(d.slash)&&!this.match(d.jsxTagEnd);)e.push(this.jsxParseAttribute());return t.attributes=e,t.selfClosing=this.eat(d.slash),this.expect(d.jsxTagEnd),this.finishNode(t,"JSXOpeningElement")}jsxParseClosingElementAt(t,e){const r=this.startNodeAt(t,e);return this.match(d.jsxTagEnd)?(this.expect(d.jsxTagEnd),this.finishNode(r,"JSXClosingFragment")):(r.name=this.jsxParseElementName(),this.expect(d.jsxTagEnd),this.finishNode(r,"JSXClosingElement"))}jsxParseElementAt(t,e){const r=this.startNodeAt(t,e),n=[],o=this.jsxParseOpeningElementAt(t,e);let h=null;if(!o.selfClosing){t:for(;;)switch(this.state.type){case d.jsxTagStart:if(t=this.state.start,e=this.state.startLoc,this.next(),this.eat(d.slash)){h=this.jsxParseClosingElementAt(t,e);break t}n.push(this.jsxParseElementAt(t,e));break;case d.jsxText:n.push(this.parseExprAtom());break;case d.braceL:{const t=this.startNode();this.next(),this.match(d.ellipsis)?n.push(this.jsxParseSpreadChild(t)):n.push(this.jsxParseExpressionContainer(t));break}default:throw this.unexpected()}vt(o)&&!vt(h)?this.raise(h.start,"Expected corresponding JSX closing tag for <>"):!vt(o)&&vt(h)?this.raise(h.start,"Expected corresponding JSX closing tag for <"+Lt(o.name)+">"):vt(o)||vt(h)||Lt(h.name)!==Lt(o.name)&&this.raise(h.start,"Expected corresponding JSX closing tag for <"+Lt(o.name)+">")}return vt(o)?(r.openingFragment=o,r.closingFragment=h):(r.openingElement=o,r.closingElement=h),r.children=n,this.match(d.relational)&&"<"===this.state.value&&this.raise(this.state.start,"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"),vt(o)?this.finishNode(r,"JSXFragment"):this.finishNode(r,"JSXElement")}jsxParseElement(){const t=this.state.start,e=this.state.startLoc;return this.next(),this.jsxParseElementAt(t,e)}parseExprAtom(t){return this.match(d.jsxText)?this.parseLiteral(this.state.value,"JSXText"):this.match(d.jsxTagStart)?this.jsxParseElement():this.isRelational("<")&&33!==this.input.charCodeAt(this.state.pos)?(this.finishToken(d.jsxTagStart),this.jsxParseElement()):super.parseExprAtom(t)}getTokenFromCode(code){if(this.state.inPropertyName)return super.getTokenFromCode(code);const t=this.curContext();if(t===it.j_expr)return this.jsxReadToken();if(t===it.j_oTag||t===it.j_cTag){if(Tt(code))return this.jsxReadWord();if(62===code)return++this.state.pos,this.finishToken(d.jsxTagEnd);if((34===code||39===code)&&t===it.j_oTag)return this.jsxReadString(code)}return 60===code&&this.state.exprAllowed&&33!==this.input.charCodeAt(this.state.pos+1)?(++this.state.pos,this.finishToken(d.jsxTagStart)):super.getTokenFromCode(code)}updateContext(t){if(this.match(d.braceL)){const e=this.curContext();e===it.j_oTag?this.state.context.push(it.braceExpression):e===it.j_expr?this.state.context.push(it.templateQuasi):super.updateContext(t),this.state.exprAllowed=!0}else{if(!this.match(d.slash)||t!==d.jsxTagStart)return super.updateContext(t);this.state.context.length-=2,this.state.context.push(it.j_cTag),this.state.exprAllowed=!1}}}),flow:t=>(class extends t{constructor(t,input){super(t,input),this.flowPragma=void 0}shouldParseTypes(){return this.getPluginOption("flow","all")||"flow"===this.flowPragma}finishToken(t,e){return t!==d.string&&t!==d.semi&&t!==d.interpreterDirective&&void 0===this.flowPragma&&(this.flowPragma=null),super.finishToken(t,e)}addComment(t){if(void 0===this.flowPragma){const e=kt.exec(t.value);if(e)if("flow"===e[1])this.flowPragma="flow";else{if("noflow"!==e[1])throw new Error("Unexpected flow pragma");this.flowPragma="noflow"}}return super.addComment(t)}flowParseTypeInitialiser(t){const e=this.state.inType;this.state.inType=!0,this.expect(t||d.colon);const r=this.flowParseType();return this.state.inType=e,r}flowParsePredicate(){const t=this.startNode(),e=this.state.startLoc,r=this.state.start;this.expect(d.modulo);const n=this.state.startLoc;return this.expectContextual("checks"),e.line===n.line&&e.column===n.column-1||this.raise(r,"Spaces between ´%´ and ´checks´ are not allowed here."),this.eat(d.parenL)?(t.value=this.parseExpression(),this.expect(d.parenR),this.finishNode(t,"DeclaredPredicate")):this.finishNode(t,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){const t=this.state.inType;this.state.inType=!0,this.expect(d.colon);let e=null,r=null;return this.match(d.modulo)?(this.state.inType=t,r=this.flowParsePredicate()):(e=this.flowParseType(),this.state.inType=t,this.match(d.modulo)&&(r=this.flowParsePredicate())),[e,r]}flowParseDeclareClass(t){return this.next(),this.flowParseInterfaceish(t,!0),this.finishNode(t,"DeclareClass")}flowParseDeclareFunction(t){this.next();const e=t.id=this.parseIdentifier(),r=this.startNode(),n=this.startNode();this.isRelational("<")?r.typeParameters=this.flowParseTypeParameterDeclaration():r.typeParameters=null,this.expect(d.parenL);const o=this.flowParseFunctionTypeParams();return r.params=o.params,r.rest=o.rest,this.expect(d.parenR),[r.returnType,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),n.typeAnnotation=this.finishNode(r,"FunctionTypeAnnotation"),e.typeAnnotation=this.finishNode(n,"TypeAnnotation"),this.resetEndLocation(e),this.semicolon(),this.finishNode(t,"DeclareFunction")}flowParseDeclare(t,e){if(this.match(d._class))return this.flowParseDeclareClass(t);if(this.match(d._function))return this.flowParseDeclareFunction(t);if(this.match(d._var))return this.flowParseDeclareVariable(t);if(this.eatContextual("module"))return this.match(d.dot)?this.flowParseDeclareModuleExports(t):(e&&this.unexpected(this.state.lastTokStart,"`declare module` cannot be used inside another `declare module`"),this.flowParseDeclareModule(t));if(this.isContextual("type"))return this.flowParseDeclareTypeAlias(t);if(this.isContextual("opaque"))return this.flowParseDeclareOpaqueType(t);if(this.isContextual("interface"))return this.flowParseDeclareInterface(t);if(this.match(d._export))return this.flowParseDeclareExportDeclaration(t,e);throw this.unexpected()}flowParseDeclareVariable(t){return this.next(),t.id=this.flowParseTypeAnnotatableIdentifier(!0),this.semicolon(),this.finishNode(t,"DeclareVariable")}flowParseDeclareModule(t){this.scope.enter(m),this.match(d.string)?t.id=this.parseExprAtom():t.id=this.parseIdentifier();const e=t.body=this.startNode(),body=e.body=[];for(this.expect(d.braceL);!this.match(d.braceR);){let t=this.startNode();this.match(d._import)?(this.next(),this.isContextual("type")||this.match(d._typeof)||this.unexpected(this.state.lastTokStart,"Imports within a `declare module` body must always be `import type` or `import typeof`"),this.parseImport(t)):(this.expectContextual("declare","Only declares and type imports are allowed inside declare module"),t=this.flowParseDeclare(t,!0)),body.push(t)}this.scope.exit(),this.expect(d.braceR),this.finishNode(e,"BlockStatement");let r=null,n=!1;const o="Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module";return body.forEach(t=>{!function(t){return"DeclareExportAllDeclaration"===t.type||"DeclareExportDeclaration"===t.type&&(!t.declaration||"TypeAlias"!==t.declaration.type&&"InterfaceDeclaration"!==t.declaration.type)}(t)?"DeclareModuleExports"===t.type&&(n&&this.unexpected(t.start,"Duplicate `declare module.exports` statement"),"ES"===r&&this.unexpected(t.start,o),r="CommonJS",n=!0):("CommonJS"===r&&this.unexpected(t.start,o),r="ES")}),t.kind=r||"CommonJS",this.finishNode(t,"DeclareModule")}flowParseDeclareExportDeclaration(t,e){if(this.expect(d._export),this.eat(d._default))return this.match(d._function)||this.match(d._class)?t.declaration=this.flowParseDeclare(this.startNode()):(t.declaration=this.flowParseType(),this.semicolon()),t.default=!0,this.finishNode(t,"DeclareExportDeclaration");if(this.match(d._const)||this.isLet()||(this.isContextual("type")||this.isContextual("interface"))&&!e){const label=this.state.value,t=Ct[label];this.unexpected(this.state.start,`\`declare export ${label}\` is not supported. Use \`${t}\` instead`)}if(this.match(d._var)||this.match(d._function)||this.match(d._class)||this.isContextual("opaque"))return t.declaration=this.flowParseDeclare(this.startNode()),t.default=!1,this.finishNode(t,"DeclareExportDeclaration");if(this.match(d.star)||this.match(d.braceL)||this.isContextual("interface")||this.isContextual("type")||this.isContextual("opaque"))return"ExportNamedDeclaration"===(t=this.parseExport(t)).type&&(t.type="ExportDeclaration",t.default=!1,delete t.exportKind),t.type="Declare"+t.type,t;throw this.unexpected()}flowParseDeclareModuleExports(t){return this.next(),this.expectContextual("exports"),t.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(t,"DeclareModuleExports")}flowParseDeclareTypeAlias(t){return this.next(),this.flowParseTypeAlias(t),t.type="DeclareTypeAlias",t}flowParseDeclareOpaqueType(t){return this.next(),this.flowParseOpaqueType(t,!0),t.type="DeclareOpaqueType",t}flowParseDeclareInterface(t){return this.next(),this.flowParseInterfaceish(t),this.finishNode(t,"DeclareInterface")}flowParseInterfaceish(t,e=!1){if(t.id=this.flowParseRestrictedIdentifier(!e),this.isRelational("<")?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.extends=[],t.implements=[],t.mixins=[],this.eat(d._extends))do{t.extends.push(this.flowParseInterfaceExtends())}while(!e&&this.eat(d.comma));if(this.isContextual("mixins")){this.next();do{t.mixins.push(this.flowParseInterfaceExtends())}while(this.eat(d.comma))}if(this.isContextual("implements")){this.next();do{t.implements.push(this.flowParseInterfaceExtends())}while(this.eat(d.comma))}t.body=this.flowParseObjectType({allowStatic:e,allowExact:!1,allowSpread:!1,allowProto:e,allowInexact:!1})}flowParseInterfaceExtends(){const t=this.startNode();return t.id=this.flowParseQualifiedTypeIdentifier(),this.isRelational("<")?t.typeParameters=this.flowParseTypeParameterInstantiation():t.typeParameters=null,this.finishNode(t,"InterfaceExtends")}flowParseInterface(t){return this.flowParseInterfaceish(t),this.finishNode(t,"InterfaceDeclaration")}checkNotUnderscore(t){if("_"===t)throw this.unexpected(null,"`_` is only allowed as a type argument to call or new")}checkReservedType(t,e){wt.indexOf(t)>-1&&this.raise(e,`Cannot overwrite reserved type ${t}`)}flowParseRestrictedIdentifier(t){return this.checkReservedType(this.state.value,this.state.start),this.parseIdentifier(t)}flowParseTypeAlias(t){return t.id=this.flowParseRestrictedIdentifier(),this.scope.declareName(t.id.name,j,t.id.start),this.isRelational("<")?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.right=this.flowParseTypeInitialiser(d.eq),this.semicolon(),this.finishNode(t,"TypeAlias")}flowParseOpaqueType(t,e){return this.expectContextual("type"),t.id=this.flowParseRestrictedIdentifier(!0),this.scope.declareName(t.id.name,j,t.id.start),this.isRelational("<")?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.supertype=null,this.match(d.colon)&&(t.supertype=this.flowParseTypeInitialiser(d.colon)),t.impltype=null,e||(t.impltype=this.flowParseTypeInitialiser(d.eq)),this.semicolon(),this.finishNode(t,"OpaqueType")}flowParseTypeParameter(t=!1){const e=this.state.start,r=this.startNode(),n=this.flowParseVariance(),o=this.flowParseTypeAnnotatableIdentifier();return r.name=o.name,r.variance=n,r.bound=o.typeAnnotation,this.match(d.eq)?(this.eat(d.eq),r.default=this.flowParseType()):t&&this.unexpected(e,"Type parameter declaration needs a default, since a preceding type parameter declaration has a default."),this.finishNode(r,"TypeParameter")}flowParseTypeParameterDeclaration(){const t=this.state.inType,e=this.startNode();e.params=[],this.state.inType=!0,this.isRelational("<")||this.match(d.jsxTagStart)?this.next():this.unexpected();let r=!1;do{const t=this.flowParseTypeParameter(r);e.params.push(t),t.default&&(r=!0),this.isRelational(">")||this.expect(d.comma)}while(!this.isRelational(">"));return this.expectRelational(">"),this.state.inType=t,this.finishNode(e,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){const t=this.startNode(),e=this.state.inType;t.params=[],this.state.inType=!0,this.expectRelational("<");const r=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.isRelational(">");)t.params.push(this.flowParseType()),this.isRelational(">")||this.expect(d.comma);return this.state.noAnonFunctionType=r,this.expectRelational(">"),this.state.inType=e,this.finishNode(t,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){const t=this.startNode(),e=this.state.inType;for(t.params=[],this.state.inType=!0,this.expectRelational("<");!this.isRelational(">");)t.params.push(this.flowParseTypeOrImplicitInstantiation()),this.isRelational(">")||this.expect(d.comma);return this.expectRelational(">"),this.state.inType=e,this.finishNode(t,"TypeParameterInstantiation")}flowParseInterfaceType(){const t=this.startNode();if(this.expectContextual("interface"),t.extends=[],this.eat(d._extends))do{t.extends.push(this.flowParseInterfaceExtends())}while(this.eat(d.comma));return t.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(t,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(d.num)||this.match(d.string)?this.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(t,e,r){return t.static=e,this.lookahead().type===d.colon?(t.id=this.flowParseObjectPropertyKey(),t.key=this.flowParseTypeInitialiser()):(t.id=null,t.key=this.flowParseType()),this.expect(d.bracketR),t.value=this.flowParseTypeInitialiser(),t.variance=r,this.finishNode(t,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(t,e){return t.static=e,t.id=this.flowParseObjectPropertyKey(),this.expect(d.bracketR),this.expect(d.bracketR),this.isRelational("<")||this.match(d.parenL)?(t.method=!0,t.optional=!1,t.value=this.flowParseObjectTypeMethodish(this.startNodeAt(t.start,t.loc.start))):(t.method=!1,this.eat(d.question)&&(t.optional=!0),t.value=this.flowParseTypeInitialiser()),this.finishNode(t,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(t){for(t.params=[],t.rest=null,t.typeParameters=null,this.isRelational("<")&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(d.parenL);!this.match(d.parenR)&&!this.match(d.ellipsis);)t.params.push(this.flowParseFunctionTypeParam()),this.match(d.parenR)||this.expect(d.comma);return this.eat(d.ellipsis)&&(t.rest=this.flowParseFunctionTypeParam()),this.expect(d.parenR),t.returnType=this.flowParseTypeInitialiser(),this.finishNode(t,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(t,e){const r=this.startNode();return t.static=e,t.value=this.flowParseObjectTypeMethodish(r),this.finishNode(t,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:t,allowExact:e,allowSpread:r,allowProto:n,allowInexact:o}){const h=this.state.inType;this.state.inType=!0;const c=this.startNode();let l,m;c.callProperties=[],c.properties=[],c.indexers=[],c.internalSlots=[];let f=!1;for(e&&this.match(d.braceBarL)?(this.expect(d.braceBarL),l=d.braceBarR,m=!0):(this.expect(d.braceL),l=d.braceR,m=!1),c.exact=m;!this.match(l);){let e=!1,h=null;const l=this.startNode();if(n&&this.isContextual("proto")){const e=this.lookahead();e.type!==d.colon&&e.type!==d.question&&(this.next(),h=this.state.start,t=!1)}if(t&&this.isContextual("static")){const t=this.lookahead();t.type!==d.colon&&t.type!==d.question&&(this.next(),e=!0)}const m=this.flowParseVariance();if(this.eat(d.bracketL))null!=h&&this.unexpected(h),this.eat(d.bracketL)?(m&&this.unexpected(m.start),c.internalSlots.push(this.flowParseObjectTypeInternalSlot(l,e))):c.indexers.push(this.flowParseObjectTypeIndexer(l,e,m));else if(this.match(d.parenL)||this.isRelational("<"))null!=h&&this.unexpected(h),m&&this.unexpected(m.start),c.callProperties.push(this.flowParseObjectTypeCallProperty(l,e));else{let t="init";if(this.isContextual("get")||this.isContextual("set")){const e=this.lookahead();e.type!==d.name&&e.type!==d.string&&e.type!==d.num||(t=this.state.value,this.next())}const n=this.flowParseObjectTypeProperty(l,e,h,m,t,r,o);null===n?f=!0:c.properties.push(n)}this.flowObjectTypeSemicolon()}this.expect(l),r&&(c.inexact=f);const y=this.finishNode(c,"ObjectTypeAnnotation");return this.state.inType=h,y}flowParseObjectTypeProperty(t,e,r,n,o,h,c){if(this.match(d.ellipsis)){h||this.unexpected(null,"Spread operator cannot appear in class or interface definitions"),null!=r&&this.unexpected(r),n&&this.unexpected(n.start,"Spread properties cannot have variance"),this.expect(d.ellipsis);const e=this.eat(d.comma)||this.eat(d.semi);if(this.match(d.braceR)){if(c)return null;this.unexpected(null,"Explicit inexact syntax is only allowed inside inexact objects")}return this.match(d.braceBarR)&&this.unexpected(null,"Explicit inexact syntax cannot appear inside an explicit exact object type"),e&&this.unexpected(null,"Explicit inexact syntax must appear at the end of an inexact object"),t.argument=this.flowParseType(),this.finishNode(t,"ObjectTypeSpreadProperty")}{t.key=this.flowParseObjectPropertyKey(),t.static=e,t.proto=null!=r,t.kind=o;let h=!1;return this.isRelational("<")||this.match(d.parenL)?(t.method=!0,null!=r&&this.unexpected(r),n&&this.unexpected(n.start),t.value=this.flowParseObjectTypeMethodish(this.startNodeAt(t.start,t.loc.start)),"get"!==o&&"set"!==o||this.flowCheckGetterSetterParams(t)):("init"!==o&&this.unexpected(),t.method=!1,this.eat(d.question)&&(h=!0),t.value=this.flowParseTypeInitialiser(),t.variance=n),t.optional=h,this.finishNode(t,"ObjectTypeProperty")}}flowCheckGetterSetterParams(t){const e="get"===t.kind?0:1,r=t.start;t.value.params.length+(t.value.rest?1:0)!==e&&("get"===t.kind?this.raise(r,"getter must not have any formal parameters"):this.raise(r,"setter must have exactly one formal parameter")),"set"===t.kind&&t.value.rest&&this.raise(r,"setter function argument must not be a rest parameter")}flowObjectTypeSemicolon(){this.eat(d.semi)||this.eat(d.comma)||this.match(d.braceR)||this.match(d.braceBarR)||this.unexpected()}flowParseQualifiedTypeIdentifier(t,e,r){t=t||this.state.start,e=e||this.state.startLoc;let n=r||this.parseIdentifier();for(;this.eat(d.dot);){const r=this.startNodeAt(t,e);r.qualification=n,r.id=this.parseIdentifier(),n=this.finishNode(r,"QualifiedTypeIdentifier")}return n}flowParseGenericType(t,e,r){const n=this.startNodeAt(t,e);return n.typeParameters=null,n.id=this.flowParseQualifiedTypeIdentifier(t,e,r),this.isRelational("<")&&(n.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(n,"GenericTypeAnnotation")}flowParseTypeofType(){const t=this.startNode();return this.expect(d._typeof),t.argument=this.flowParsePrimaryType(),this.finishNode(t,"TypeofTypeAnnotation")}flowParseTupleType(){const t=this.startNode();for(t.types=[],this.expect(d.bracketL);this.state.pos<this.length&&!this.match(d.bracketR)&&(t.types.push(this.flowParseType()),!this.match(d.bracketR));)this.expect(d.comma);return this.expect(d.bracketR),this.finishNode(t,"TupleTypeAnnotation")}flowParseFunctionTypeParam(){let t=null,e=!1,r=null;const n=this.startNode(),o=this.lookahead();return o.type===d.colon||o.type===d.question?(t=this.parseIdentifier(),this.eat(d.question)&&(e=!0),r=this.flowParseTypeInitialiser()):r=this.flowParseType(),n.name=t,n.optional=e,n.typeAnnotation=r,this.finishNode(n,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(t){const e=this.startNodeAt(t.start,t.loc.start);return e.name=null,e.optional=!1,e.typeAnnotation=t,this.finishNode(e,"FunctionTypeParam")}flowParseFunctionTypeParams(t=[]){let e=null;for(;!this.match(d.parenR)&&!this.match(d.ellipsis);)t.push(this.flowParseFunctionTypeParam()),this.match(d.parenR)||this.expect(d.comma);return this.eat(d.ellipsis)&&(e=this.flowParseFunctionTypeParam()),{params:t,rest:e}}flowIdentToTypeAnnotation(t,e,r,n){switch(n.name){case"any":return this.finishNode(r,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(r,"BooleanTypeAnnotation");case"mixed":return this.finishNode(r,"MixedTypeAnnotation");case"empty":return this.finishNode(r,"EmptyTypeAnnotation");case"number":return this.finishNode(r,"NumberTypeAnnotation");case"string":return this.finishNode(r,"StringTypeAnnotation");default:return this.checkNotUnderscore(n.name),this.flowParseGenericType(t,e,n)}}flowParsePrimaryType(){const t=this.state.start,e=this.state.startLoc,r=this.startNode();let n,o,h=!1;const c=this.state.noAnonFunctionType;switch(this.state.type){case d.name:return this.isContextual("interface")?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(t,e,r,this.parseIdentifier());case d.braceL:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case d.braceBarL:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case d.bracketL:return this.state.noAnonFunctionType=!1,o=this.flowParseTupleType(),this.state.noAnonFunctionType=c,o;case d.relational:if("<"===this.state.value)return r.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(d.parenL),n=this.flowParseFunctionTypeParams(),r.params=n.params,r.rest=n.rest,this.expect(d.parenR),this.expect(d.arrow),r.returnType=this.flowParseType(),this.finishNode(r,"FunctionTypeAnnotation");break;case d.parenL:if(this.next(),!this.match(d.parenR)&&!this.match(d.ellipsis))if(this.match(d.name)){const t=this.lookahead().type;h=t!==d.question&&t!==d.colon}else h=!0;if(h){if(this.state.noAnonFunctionType=!1,o=this.flowParseType(),this.state.noAnonFunctionType=c,this.state.noAnonFunctionType||!(this.match(d.comma)||this.match(d.parenR)&&this.lookahead().type===d.arrow))return this.expect(d.parenR),o;this.eat(d.comma)}return n=o?this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(o)]):this.flowParseFunctionTypeParams(),r.params=n.params,r.rest=n.rest,this.expect(d.parenR),this.expect(d.arrow),r.returnType=this.flowParseType(),r.typeParameters=null,this.finishNode(r,"FunctionTypeAnnotation");case d.string:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case d._true:case d._false:return r.value=this.match(d._true),this.next(),this.finishNode(r,"BooleanLiteralTypeAnnotation");case d.plusMin:if("-"===this.state.value){if(this.next(),this.match(d.num))return this.parseLiteral(-this.state.value,"NumberLiteralTypeAnnotation",r.start,r.loc.start);if(this.match(d.bigint))return this.parseLiteral(-this.state.value,"BigIntLiteralTypeAnnotation",r.start,r.loc.start);this.unexpected(null,'Unexpected token, expected "number" or "bigint"')}this.unexpected();case d.num:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case d.bigint:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case d._void:return this.next(),this.finishNode(r,"VoidTypeAnnotation");case d._null:return this.next(),this.finishNode(r,"NullLiteralTypeAnnotation");case d._this:return this.next(),this.finishNode(r,"ThisTypeAnnotation");case d.star:return this.next(),this.finishNode(r,"ExistsTypeAnnotation");default:if("typeof"===this.state.type.keyword)return this.flowParseTypeofType();if(this.state.type.keyword){const label=this.state.type.label;return this.next(),super.createIdentifier(r,label)}}throw this.unexpected()}flowParsePostfixType(){const t=this.state.start,e=this.state.startLoc;let r=this.flowParsePrimaryType();for(;this.match(d.bracketL)&&!this.canInsertSemicolon();){const n=this.startNodeAt(t,e);n.elementType=r,this.expect(d.bracketL),this.expect(d.bracketR),r=this.finishNode(n,"ArrayTypeAnnotation")}return r}flowParsePrefixType(){const t=this.startNode();return this.eat(d.question)?(t.typeAnnotation=this.flowParsePrefixType(),this.finishNode(t,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){const param=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(d.arrow)){const t=this.startNodeAt(param.start,param.loc.start);return t.params=[this.reinterpretTypeAsFunctionTypeParam(param)],t.rest=null,t.returnType=this.flowParseType(),t.typeParameters=null,this.finishNode(t,"FunctionTypeAnnotation")}return param}flowParseIntersectionType(){const t=this.startNode();this.eat(d.bitwiseAND);const e=this.flowParseAnonFunctionWithoutParens();for(t.types=[e];this.eat(d.bitwiseAND);)t.types.push(this.flowParseAnonFunctionWithoutParens());return 1===t.types.length?e:this.finishNode(t,"IntersectionTypeAnnotation")}flowParseUnionType(){const t=this.startNode();this.eat(d.bitwiseOR);const e=this.flowParseIntersectionType();for(t.types=[e];this.eat(d.bitwiseOR);)t.types.push(this.flowParseIntersectionType());return 1===t.types.length?e:this.finishNode(t,"UnionTypeAnnotation")}flowParseType(){const t=this.state.inType;this.state.inType=!0;const e=this.flowParseUnionType();return this.state.inType=t,this.state.exprAllowed=this.state.exprAllowed||this.state.noAnonFunctionType,e}flowParseTypeOrImplicitInstantiation(){if(this.state.type===d.name&&"_"===this.state.value){const t=this.state.start,e=this.state.startLoc,r=this.parseIdentifier();return this.flowParseGenericType(t,e,r)}return this.flowParseType()}flowParseTypeAnnotation(){const t=this.startNode();return t.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(t,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(t){const e=t?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(d.colon)&&(e.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(e)),e}typeCastToParameter(t){return t.expression.typeAnnotation=t.typeAnnotation,this.resetEndLocation(t.expression,t.typeAnnotation.end,t.typeAnnotation.loc.end),t.expression}flowParseVariance(){let t=null;return this.match(d.plusMin)&&(t=this.startNode(),"+"===this.state.value?t.kind="plus":t.kind="minus",this.next(),this.finishNode(t,"Variance")),t}parseFunctionBody(t,e,r=!1){return e?this.forwardNoArrowParamsConversionAt(t,()=>super.parseFunctionBody(t,!0,r)):super.parseFunctionBody(t,!1,r)}parseFunctionBodyAndFinish(t,e,r=!1){if(this.match(d.colon)){const e=this.startNode();[e.typeAnnotation,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),t.returnType=e.typeAnnotation?this.finishNode(e,"TypeAnnotation"):null}super.parseFunctionBodyAndFinish(t,e,r)}parseStatement(t,e){if(this.state.strict&&this.match(d.name)&&"interface"===this.state.value){const t=this.startNode();return this.next(),this.flowParseInterface(t)}{const r=super.parseStatement(t,e);return void 0!==this.flowPragma||this.isValidDirective(r)||(this.flowPragma=null),r}}parseExpressionStatement(t,e){if("Identifier"===e.type)if("declare"===e.name){if(this.match(d._class)||this.match(d.name)||this.match(d._function)||this.match(d._var)||this.match(d._export))return this.flowParseDeclare(t)}else if(this.match(d.name)){if("interface"===e.name)return this.flowParseInterface(t);if("type"===e.name)return this.flowParseTypeAlias(t);if("opaque"===e.name)return this.flowParseOpaqueType(t,!1)}return super.parseExpressionStatement(t,e)}shouldParseExportDeclaration(){return this.isContextual("type")||this.isContextual("interface")||this.isContextual("opaque")||super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){return(!this.match(d.name)||"type"!==this.state.value&&"interface"!==this.state.value&&"opaque"!==this.state.value)&&super.isExportDefaultSpecifier()}parseConditional(t,e,r,n,o){if(!this.match(d.question))return t;if(o){const h=this.state.clone();try{return super.parseConditional(t,e,r,n)}catch(e){if(e instanceof SyntaxError)return this.state=h,o.start=e.pos||this.state.start,t;throw e}}this.expect(d.question);const h=this.state.clone(),c=this.state.noArrowAt,l=this.startNodeAt(r,n);let{consequent:m,failed:f}=this.tryParseConditionalConsequent(),[y,x]=this.getArrowLikeExpressions(m);if(f||x.length>0){const t=[...c];if(x.length>0){this.state=h,this.state.noArrowAt=t;for(let i=0;i<x.length;i++)t.push(x[i].start);({consequent:m,failed:f}=this.tryParseConditionalConsequent()),[y,x]=this.getArrowLikeExpressions(m)}f&&y.length>1&&this.raise(h.start,"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate."),f&&1===y.length&&(this.state=h,this.state.noArrowAt=t.concat(y[0].start),({consequent:m,failed:f}=this.tryParseConditionalConsequent())),this.getArrowLikeExpressions(m,!0)}return this.state.noArrowAt=c,this.expect(d.colon),l.test=t,l.consequent=m,l.alternate=this.forwardNoArrowParamsConversionAt(l,()=>this.parseMaybeAssign(e,void 0,void 0,void 0)),this.finishNode(l,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);const t=this.parseMaybeAssign(),e=!this.match(d.colon);return this.state.noArrowParamsConversionAt.pop(),{consequent:t,failed:e}}getArrowLikeExpressions(t,e){const r=[t],n=[];for(;0!==r.length;){const t=r.pop();"ArrowFunctionExpression"===t.type?(t.typeParameters||!t.returnType?(this.toAssignableList(t.params,!0,"arrow function parameters"),this.scope.enter(N(!1,!1)|T),super.checkParams(t,!1,!0),this.scope.exit()):n.push(t),r.push(t.body)):"ConditionalExpression"===t.type&&(r.push(t.consequent),r.push(t.alternate))}if(e){for(let i=0;i<n.length;i++)this.toAssignableList(t.params,!0,"arrow function parameters");return[n,[]]}return function(t,e){const r=[],n=[];for(let i=0;i<t.length;i++)(e(t[i],i,t)?r:n).push(t[i]);return[r,n]}(n,t=>{try{return this.toAssignableList(t.params,!0,"arrow function parameters"),!0}catch(t){return!1}})}forwardNoArrowParamsConversionAt(t,e){let r;return-1!==this.state.noArrowParamsConversionAt.indexOf(t.start)?(this.state.noArrowParamsConversionAt.push(this.state.start),r=e(),this.state.noArrowParamsConversionAt.pop()):r=e(),r}parseParenItem(t,e,r){if(t=super.parseParenItem(t,e,r),this.eat(d.question)&&(t.optional=!0,this.resetEndLocation(t)),this.match(d.colon)){const n=this.startNodeAt(e,r);return n.expression=t,n.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(n,"TypeCastExpression")}return t}assertModuleNodeAllowed(t){"ImportDeclaration"===t.type&&("type"===t.importKind||"typeof"===t.importKind)||"ExportNamedDeclaration"===t.type&&"type"===t.exportKind||"ExportAllDeclaration"===t.type&&"type"===t.exportKind||super.assertModuleNodeAllowed(t)}parseExport(t){const e=super.parseExport(t);return"ExportNamedDeclaration"!==e.type&&"ExportAllDeclaration"!==e.type||(e.exportKind=e.exportKind||"value"),e}parseExportDeclaration(t){if(this.isContextual("type")){t.exportKind="type";const e=this.startNode();return this.next(),this.match(d.braceL)?(t.specifiers=this.parseExportSpecifiers(),this.parseExportFrom(t),null):this.flowParseTypeAlias(e)}if(this.isContextual("opaque")){t.exportKind="type";const e=this.startNode();return this.next(),this.flowParseOpaqueType(e,!1)}if(this.isContextual("interface")){t.exportKind="type";const e=this.startNode();return this.next(),this.flowParseInterface(e)}return super.parseExportDeclaration(t)}eatExportStar(t){return!!super.eatExportStar(...arguments)||!(!this.isContextual("type")||this.lookahead().type!==d.star)&&(t.exportKind="type",this.next(),this.next(),!0)}maybeParseExportNamespaceSpecifier(t){const e=this.state.start,r=super.maybeParseExportNamespaceSpecifier(t);return r&&"type"===t.exportKind&&this.unexpected(e),r}parseClassId(t,e,r){super.parseClassId(t,e,r),this.isRelational("<")&&(t.typeParameters=this.flowParseTypeParameterDeclaration())}getTokenFromCode(code){const t=this.input.charCodeAt(this.state.pos+1);return 123===code&&124===t?this.finishOp(d.braceBarL,2):!this.state.inType||62!==code&&60!==code?function(t,e){return 64===t&&64===e}(code,t)?(this.state.isIterator=!0,super.readWord()):super.getTokenFromCode(code):this.finishOp(d.relational,1)}toAssignable(t,e,r){return"TypeCastExpression"===t.type?super.toAssignable(this.typeCastToParameter(t),e,r):super.toAssignable(t,e,r)}toAssignableList(t,e,r){for(let i=0;i<t.length;i++){const e=t[i];e&&"TypeCastExpression"===e.type&&(t[i]=this.typeCastToParameter(e))}return super.toAssignableList(t,e,r)}toReferencedList(t,e){for(let i=0;i<t.length;i++){const r=t[i];!r||"TypeCastExpression"!==r.type||r.extra&&r.extra.parenthesized||!(t.length>1)&&e||this.raise(r.typeAnnotation.start,"The type cast expression is expected to be wrapped with parenthesis")}return t}checkLVal(t,e=J,r,n){if("TypeCastExpression"!==t.type)return super.checkLVal(t,e,r,n)}parseClassProperty(t){return this.match(d.colon)&&(t.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(t)}parseClassPrivateProperty(t){return this.match(d.colon)&&(t.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(t)}isClassMethod(){return this.isRelational("<")||super.isClassMethod()}isClassProperty(){return this.match(d.colon)||super.isClassProperty()}isNonstaticConstructor(t){return!this.match(d.colon)&&super.isNonstaticConstructor(t)}pushClassMethod(t,e,r,n,o,h){e.variance&&this.unexpected(e.variance.start),delete e.variance,this.isRelational("<")&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(t,e,r,n,o,h)}pushClassPrivateMethod(t,e,r,n){e.variance&&this.unexpected(e.variance.start),delete e.variance,this.isRelational("<")&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(t,e,r,n)}parseClassSuper(t){if(super.parseClassSuper(t),t.superClass&&this.isRelational("<")&&(t.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual("implements")){this.next();const e=t.implements=[];do{const t=this.startNode();t.id=this.flowParseRestrictedIdentifier(!0),this.isRelational("<")?t.typeParameters=this.flowParseTypeParameterInstantiation():t.typeParameters=null,e.push(this.finishNode(t,"ClassImplements"))}while(this.eat(d.comma))}}parsePropertyName(t){const e=this.flowParseVariance(),r=super.parsePropertyName(t);return t.variance=e,r}parseObjPropValue(t,e,r,n,o,h,c,l){let m;t.variance&&this.unexpected(t.variance.start),delete t.variance,this.isRelational("<")&&(m=this.flowParseTypeParameterDeclaration(),this.match(d.parenL)||this.unexpected()),super.parseObjPropValue(t,e,r,n,o,h,c,l),m&&((t.value||t).typeParameters=m)}parseAssignableListItemTypes(param){if(this.eat(d.question)){if("Identifier"!==param.type)throw this.raise(param.start,"A binding pattern parameter cannot be optional in an implementation signature.");param.optional=!0}return this.match(d.colon)&&(param.typeAnnotation=this.flowParseTypeAnnotation()),this.resetEndLocation(param),param}parseMaybeDefault(t,e,r){const n=super.parseMaybeDefault(t,e,r);return"AssignmentPattern"===n.type&&n.typeAnnotation&&n.right.start<n.typeAnnotation.start&&this.raise(n.typeAnnotation.start,"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`"),n}shouldParseDefaultImport(t){return At(t)?Et(this.state):super.shouldParseDefaultImport(t)}parseImportSpecifierLocal(t,e,r,n){e.local=At(t)?this.flowParseRestrictedIdentifier(!0):this.parseIdentifier(),this.checkLVal(e.local,j,void 0,n),t.specifiers.push(this.finishNode(e,r))}maybeParseDefaultImportSpecifier(t){t.importKind="value";let e=null;if(this.match(d._typeof)?e="typeof":this.isContextual("type")&&(e="type"),e){const r=this.lookahead();"type"===e&&r.type===d.star&&this.unexpected(r.start),(Et(r)||r.type===d.braceL||r.type===d.star)&&(this.next(),t.importKind=e)}return super.maybeParseDefaultImportSpecifier(t)}parseImportSpecifier(t){const e=this.startNode(),r=this.state.start,n=this.parseIdentifier(!0);let o=null;"type"===n.name?o="type":"typeof"===n.name&&(o="typeof");let h=!1;if(this.isContextual("as")&&!this.isLookaheadContextual("as")){const t=this.parseIdentifier(!0);null===o||this.match(d.name)||this.state.type.keyword?(e.imported=n,e.importKind=null,e.local=this.parseIdentifier()):(e.imported=t,e.importKind=o,e.local=t.__clone())}else null!==o&&(this.match(d.name)||this.state.type.keyword)?(e.imported=this.parseIdentifier(!0),e.importKind=o,this.eatContextual("as")?e.local=this.parseIdentifier():(h=!0,e.local=e.imported.__clone())):(h=!0,e.imported=n,e.importKind=null,e.local=e.imported.__clone());const c=At(t),l=At(e);c&&l&&this.raise(r,"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements"),(c||l)&&this.checkReservedType(e.local.name,e.local.start),!h||c||l||this.checkReservedWord(e.local.name,e.start,!0,!0),this.checkLVal(e.local,j,void 0,"import specifier"),t.specifiers.push(this.finishNode(e,"ImportSpecifier"))}parseFunctionParams(t,e){const r=t.kind;"get"!==r&&"set"!==r&&this.isRelational("<")&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(t,e)}parseVarId(t,e){super.parseVarId(t,e),this.match(d.colon)&&(t.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(t.id))}parseAsyncArrowFromCallExpression(t,e){if(this.match(d.colon)){const e=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,t.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=e}return super.parseAsyncArrowFromCallExpression(t,e)}shouldParseAsyncArrow(){return this.match(d.colon)||super.shouldParseAsyncArrow()}parseMaybeAssign(t,e,r,n){let o=null;if(this.hasPlugin("jsx")&&(this.match(d.jsxTagStart)||this.isRelational("<"))){const h=this.state.clone();try{return super.parseMaybeAssign(t,e,r,n)}catch(t){if(!(t instanceof SyntaxError))throw t;{this.state=h;const e=this.state.context.length;this.state.context[e-1]===it.j_oTag&&(this.state.context.length-=2),o=t}}}if(null!=o||this.isRelational("<")){let h,c;try{c=this.flowParseTypeParameterDeclaration(),(h=this.forwardNoArrowParamsConversionAt(c,()=>super.parseMaybeAssign(t,e,r,n))).typeParameters=c,this.resetStartLocationFromNode(h,c)}catch(t){throw o||t}if("ArrowFunctionExpression"===h.type)return h;if(null!=o)throw o;this.raise(c.start,"Expected an arrow function after this type parameter declaration")}return super.parseMaybeAssign(t,e,r,n)}parseArrow(t){if(this.match(d.colon)){const e=this.state.clone();try{const r=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;const n=this.startNode();[n.typeAnnotation,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=r,this.canInsertSemicolon()&&this.unexpected(),this.match(d.arrow)||this.unexpected(),t.returnType=n.typeAnnotation?this.finishNode(n,"TypeAnnotation"):null}catch(t){if(!(t instanceof SyntaxError))throw t;this.state=e}}return super.parseArrow(t)}shouldParseArrow(){return this.match(d.colon)||super.shouldParseArrow()}setArrowFunctionParameters(t,e){-1!==this.state.noArrowParamsConversionAt.indexOf(t.start)?t.params=e:super.setArrowFunctionParameters(t,e)}checkParams(t,e,r){if(!r||-1===this.state.noArrowParamsConversionAt.indexOf(t.start))return super.checkParams(t,e,r)}parseParenAndDistinguishExpression(t){return super.parseParenAndDistinguishExpression(t&&-1===this.state.noArrowAt.indexOf(this.state.start))}parseSubscripts(base,t,e,r){if("Identifier"===base.type&&"async"===base.name&&-1!==this.state.noArrowAt.indexOf(t)){this.next();const r=this.startNodeAt(t,e);r.callee=base,r.arguments=this.parseCallExpressionArguments(d.parenR,!1),base=this.finishNode(r,"CallExpression")}else if("Identifier"===base.type&&"async"===base.name&&this.isRelational("<")){const n=this.state.clone();let o;try{const r=this.parseAsyncArrowWithTypeParameters(t,e);if(r)return r}catch(t){o=t}this.state=n;try{return super.parseSubscripts(base,t,e,r)}catch(t){throw o||t}}return super.parseSubscripts(base,t,e,r)}parseSubscript(base,t,e,r,n,o){if(this.match(d.questionDot)&&this.isLookaheadRelational("<")){if(this.expectPlugin("optionalChaining"),n.optionalChainMember=!0,r)return n.stop=!0,base;this.next();const o=this.startNodeAt(t,e);return o.callee=base,o.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(d.parenL),o.arguments=this.parseCallExpressionArguments(d.parenR,!1),o.optional=!0,this.finishNode(o,"OptionalCallExpression")}if(!r&&this.shouldParseTypes()&&this.isRelational("<")){const r=this.startNodeAt(t,e);r.callee=base;const o=this.state.clone();try{return r.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(d.parenL),r.arguments=this.parseCallExpressionArguments(d.parenR,!1),n.optionalChainMember?(r.optional=!1,this.finishNode(r,"OptionalCallExpression")):this.finishNode(r,"CallExpression")}catch(t){if(!(t instanceof SyntaxError))throw t;this.state=o}}return super.parseSubscript(base,t,e,r,n,o)}parseNewArguments(t){let e=null;if(this.shouldParseTypes()&&this.isRelational("<")){const t=this.state.clone();try{e=this.flowParseTypeParameterInstantiationCallOrNew()}catch(e){if(!(e instanceof SyntaxError))throw e;this.state=t}}t.typeArguments=e,super.parseNewArguments(t)}parseAsyncArrowWithTypeParameters(t,e){const r=this.startNodeAt(t,e);if(this.parseFunctionParams(r),this.parseArrow(r))return this.parseArrowExpression(r,void 0,!0)}readToken_mult_modulo(code){const t=this.input.charCodeAt(this.state.pos+1);if(42===code&&47===t&&this.state.hasFlowComment)return this.state.hasFlowComment=!1,this.state.pos+=2,void this.nextToken();super.readToken_mult_modulo(code)}readToken_pipe_amp(code){const t=this.input.charCodeAt(this.state.pos+1);124!==code||125!==t?super.readToken_pipe_amp(code):this.finishOp(d.braceBarR,2)}parseTopLevel(t,e){const r=super.parseTopLevel(t,e);return this.state.hasFlowComment&&this.unexpected(null,"Unterminated flow-comment"),r}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment())return this.state.hasFlowComment&&this.unexpected(null,"Cannot have a flow comment inside another flow comment"),this.hasFlowCommentCompletion(),this.state.pos+=this.skipFlowComment(),void(this.state.hasFlowComment=!0);if(this.state.hasFlowComment){const t=this.input.indexOf("*-/",this.state.pos+=2);return-1===t&&this.raise(this.state.pos-2,"Unterminated comment"),void(this.state.pos=t+3)}super.skipBlockComment()}skipFlowComment(){const{pos:t}=this.state;let e=2;for(;[32,9].includes(this.input.charCodeAt(t+e));)e++;const r=this.input.charCodeAt(e+t),n=this.input.charCodeAt(e+t+1);return 58===r&&58===n?e+2:"flow-include"===this.input.slice(e+t,e+t+12)?e+12:58===r&&58!==n&&e}hasFlowCommentCompletion(){-1===this.input.indexOf("*/",this.state.pos)&&this.raise(this.state.pos,"Unterminated comment")}}),typescript:t=>(class extends t{getScopeHandler(){return Mt}tsIsIdentifier(){return this.match(d.name)}tsNextTokenCanFollowModifier(){return this.next(),!(this.hasPrecedingLineBreak()||this.match(d.parenL)||this.match(d.parenR)||this.match(d.colon)||this.match(d.eq)||this.match(d.question)||this.match(d.bang))}tsParseModifier(t){if(!this.match(d.name))return;const e=this.state.value;return-1!==t.indexOf(e)&&this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this))?e:void 0}tsIsListTerminator(t){switch(t){case"EnumMembers":case"TypeMembers":return this.match(d.braceR);case"HeritageClauseElement":return this.match(d.braceL);case"TupleElementTypes":return this.match(d.bracketR);case"TypeParametersOrArguments":return this.isRelational(">")}throw new Error("Unreachable")}tsParseList(t,e){const r=[];for(;!this.tsIsListTerminator(t);)r.push(e());return r}tsParseDelimitedList(t,e){return _t(this.tsParseDelimitedListWorker(t,e,!0))}tsParseDelimitedListWorker(t,e,r){const n=[];for(;!this.tsIsListTerminator(t);){const element=e();if(null==element)return;if(n.push(element),!this.eat(d.comma)){if(this.tsIsListTerminator(t))break;return void(r&&this.expect(d.comma))}}return n}tsParseBracketedList(t,e,r,n){n||(r?this.expect(d.bracketL):this.expectRelational("<"));const o=this.tsParseDelimitedList(t,e);return r?this.expect(d.bracketR):this.expectRelational(">"),o}tsParseImportType(){const t=this.startNode();if(this.expect(d._import),this.expect(d.parenL),!this.match(d.string))throw this.unexpected(null,"Argument in a type import must be a string literal");return t.argument=this.parseExprAtom(),this.expect(d.parenR),this.eat(d.dot)&&(t.qualifier=this.tsParseEntityName(!0)),this.isRelational("<")&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSImportType")}tsParseEntityName(t){let e=this.parseIdentifier();for(;this.eat(d.dot);){const r=this.startNodeAtNode(e);r.left=e,r.right=this.parseIdentifier(t),e=this.finishNode(r,"TSQualifiedName")}return e}tsParseTypeReference(){const t=this.startNode();return t.typeName=this.tsParseEntityName(!1),!this.hasPrecedingLineBreak()&&this.isRelational("<")&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSTypeReference")}tsParseThisTypePredicate(t){this.next();const e=this.startNodeAtNode(t);return e.parameterName=t,e.typeAnnotation=this.tsParseTypeAnnotation(!1),this.finishNode(e,"TSTypePredicate")}tsParseThisTypeNode(){const t=this.startNode();return this.next(),this.finishNode(t,"TSThisType")}tsParseTypeQuery(){const t=this.startNode();return this.expect(d._typeof),this.match(d._import)?t.exprName=this.tsParseImportType():t.exprName=this.tsParseEntityName(!0),this.finishNode(t,"TSTypeQuery")}tsParseTypeParameter(){const t=this.startNode();return t.name=this.parseIdentifierName(t.start),t.constraint=this.tsEatThenParseType(d._extends),t.default=this.tsEatThenParseType(d.eq),this.finishNode(t,"TSTypeParameter")}tsTryParseTypeParameters(){if(this.isRelational("<"))return this.tsParseTypeParameters()}tsParseTypeParameters(){const t=this.startNode();return this.isRelational("<")||this.match(d.jsxTagStart)?this.next():this.unexpected(),t.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this),!1,!0),this.finishNode(t,"TSTypeParameterDeclaration")}tsTryNextParseConstantContext(){return this.lookahead().type===d._const?(this.next(),this.tsParseTypeReference()):null}tsFillSignature(t,e){const r=t===d.arrow;e.typeParameters=this.tsTryParseTypeParameters(),this.expect(d.parenL),e.parameters=this.tsParseBindingListForSignature(),r?e.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(t):this.match(t)&&(e.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(t))}tsParseBindingListForSignature(){return this.parseBindingList(d.parenR).map(pattern=>{if("Identifier"!==pattern.type&&"RestElement"!==pattern.type&&"ObjectPattern"!==pattern.type&&"ArrayPattern"!==pattern.type)throw this.unexpected(pattern.start,`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${pattern.type}`);return pattern})}tsParseTypeMemberSemicolon(){this.eat(d.comma)||this.semicolon()}tsParseSignatureMember(t,e){return this.tsFillSignature(d.colon,e),this.tsParseTypeMemberSemicolon(),this.finishNode(e,t)}tsIsUnambiguouslyIndexSignature(){return this.next(),this.eat(d.name)&&this.match(d.colon)}tsTryParseIndexSignature(t){if(!this.match(d.bracketL)||!this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this)))return;this.expect(d.bracketL);const e=this.parseIdentifier();e.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(e),this.expect(d.bracketR),t.parameters=[e];const r=this.tsTryParseTypeAnnotation();return r&&(t.typeAnnotation=r),this.tsParseTypeMemberSemicolon(),this.finishNode(t,"TSIndexSignature")}tsParsePropertyOrMethodSignature(t,e){this.eat(d.question)&&(t.optional=!0);const r=t;if(e||!this.match(d.parenL)&&!this.isRelational("<")){const t=r;e&&(t.readonly=!0);const n=this.tsTryParseTypeAnnotation();return n&&(t.typeAnnotation=n),this.tsParseTypeMemberSemicolon(),this.finishNode(t,"TSPropertySignature")}{const t=r;return this.tsFillSignature(d.colon,t),this.tsParseTypeMemberSemicolon(),this.finishNode(t,"TSMethodSignature")}}tsParseTypeMember(){const t=this.startNode();if(this.match(d.parenL)||this.isRelational("<"))return this.tsParseSignatureMember("TSCallSignatureDeclaration",t);if(this.match(d._new)){const e=this.startNode();return this.next(),this.match(d.parenL)||this.isRelational("<")?this.tsParseSignatureMember("TSConstructSignatureDeclaration",t):(t.key=this.createIdentifier(e,"new"),this.tsParsePropertyOrMethodSignature(t,!1))}const e=!!this.tsParseModifier(["readonly"]),r=this.tsTryParseIndexSignature(t);return r?(e&&(t.readonly=!0),r):(this.parsePropertyName(t),this.tsParsePropertyOrMethodSignature(t,e))}tsParseTypeLiteral(){const t=this.startNode();return t.members=this.tsParseObjectTypeMembers(),this.finishNode(t,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(d.braceL);const t=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(d.braceR),t}tsIsStartOfMappedType(){return this.next(),this.eat(d.plusMin)?this.isContextual("readonly"):(this.isContextual("readonly")&&this.next(),!!this.match(d.bracketL)&&(this.next(),!!this.tsIsIdentifier()&&(this.next(),this.match(d._in))))}tsParseMappedTypeParameter(){const t=this.startNode();return t.name=this.parseIdentifierName(t.start),t.constraint=this.tsExpectThenParseType(d._in),this.finishNode(t,"TSTypeParameter")}tsParseMappedType(){const t=this.startNode();return this.expect(d.braceL),this.match(d.plusMin)?(t.readonly=this.state.value,this.next(),this.expectContextual("readonly")):this.eatContextual("readonly")&&(t.readonly=!0),this.expect(d.bracketL),t.typeParameter=this.tsParseMappedTypeParameter(),this.expect(d.bracketR),this.match(d.plusMin)?(t.optional=this.state.value,this.next(),this.expect(d.question)):this.eat(d.question)&&(t.optional=!0),t.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(d.braceR),this.finishNode(t,"TSMappedType")}tsParseTupleType(){const t=this.startNode();t.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let e=!1;return t.elementTypes.forEach(t=>{"TSOptionalType"===t.type?e=!0:e&&"TSRestType"!==t.type&&this.raise(t.start,"A required element cannot follow an optional element.")}),this.finishNode(t,"TSTupleType")}tsParseTupleElementType(){if(this.match(d.ellipsis)){const t=this.startNode();return this.next(),t.typeAnnotation=this.tsParseType(),this.checkCommaAfterRest(),this.finishNode(t,"TSRestType")}const t=this.tsParseType();if(this.eat(d.question)){const e=this.startNodeAtNode(t);return e.typeAnnotation=t,this.finishNode(e,"TSOptionalType")}return t}tsParseParenthesizedType(){const t=this.startNode();return this.expect(d.parenL),t.typeAnnotation=this.tsParseType(),this.expect(d.parenR),this.finishNode(t,"TSParenthesizedType")}tsParseFunctionOrConstructorType(t){const e=this.startNode();return"TSConstructorType"===t&&this.expect(d._new),this.tsFillSignature(d.arrow,e),this.finishNode(e,t)}tsParseLiteralTypeNode(){const t=this.startNode();return t.literal=(()=>{switch(this.state.type){case d.num:case d.string:case d._true:case d._false:return this.parseExprAtom();default:throw this.unexpected()}})(),this.finishNode(t,"TSLiteralType")}tsParseTemplateLiteralType(){const t=this.startNode(),e=this.parseTemplate(!1);if(e.expressions.length>0)throw this.raise(e.expressions[0].start,"Template literal types cannot have any substitution");return t.literal=e,this.finishNode(t,"TSLiteralType")}tsParseNonArrayType(){switch(this.state.type){case d.name:case d._void:case d._null:{const t=this.match(d._void)?"TSVoidKeyword":this.match(d._null)?"TSNullKeyword":function(t){switch(t){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}(this.state.value);if(void 0!==t&&this.lookahead().type!==d.dot){const e=this.startNode();return this.next(),this.finishNode(e,t)}return this.tsParseTypeReference()}case d.string:case d.num:case d._true:case d._false:return this.tsParseLiteralTypeNode();case d.plusMin:if("-"===this.state.value){const t=this.startNode();if(this.lookahead().type!==d.num)throw this.unexpected();return t.literal=this.parseMaybeUnary(),this.finishNode(t,"TSLiteralType")}break;case d._this:{const t=this.tsParseThisTypeNode();return this.isContextual("is")&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(t):t}case d._typeof:return this.tsParseTypeQuery();case d._import:return this.tsParseImportType();case d.braceL:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case d.bracketL:return this.tsParseTupleType();case d.parenL:return this.tsParseParenthesizedType();case d.backQuote:return this.tsParseTemplateLiteralType()}throw this.unexpected()}tsParseArrayTypeOrHigher(){let t=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(d.bracketL);)if(this.match(d.bracketR)){const e=this.startNodeAtNode(t);e.elementType=t,this.expect(d.bracketR),t=this.finishNode(e,"TSArrayType")}else{const e=this.startNodeAtNode(t);e.objectType=t,e.indexType=this.tsParseType(),this.expect(d.bracketR),t=this.finishNode(e,"TSIndexedAccessType")}return t}tsParseTypeOperator(t){const e=this.startNode();return this.expectContextual(t),e.operator=t,e.typeAnnotation=this.tsParseTypeOperatorOrHigher(),"readonly"===t&&this.tsCheckTypeAnnotationForReadOnly(e),this.finishNode(e,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(t){switch(t.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(t.start,"'readonly' type modifier is only permitted on array and tuple literal types.")}}tsParseInferType(){const t=this.startNode();this.expectContextual("infer");const e=this.startNode();return e.name=this.parseIdentifierName(e.start),t.typeParameter=this.finishNode(e,"TSTypeParameter"),this.finishNode(t,"TSInferType")}tsParseTypeOperatorOrHigher(){const t=["keyof","unique","readonly"].find(t=>this.isContextual(t));return t?this.tsParseTypeOperator(t):this.isContextual("infer")?this.tsParseInferType():this.tsParseArrayTypeOrHigher()}tsParseUnionOrIntersectionType(t,e,r){this.eat(r);let n=e();if(this.match(r)){const o=[n];for(;this.eat(r);)o.push(e());const h=this.startNodeAtNode(n);h.types=o,n=this.finishNode(h,t)}return n}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),d.bitwiseAND)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),d.bitwiseOR)}tsIsStartOfFunctionType(){return!!this.isRelational("<")||this.match(d.parenL)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(this.match(d.name)||this.match(d._this))return this.next(),!0;if(this.match(d.braceL)){let t=1;for(this.next();t>0;)this.match(d.braceL)?++t:this.match(d.braceR)&&--t,this.next();return!0}if(this.match(d.bracketL)){let t=1;for(this.next();t>0;)this.match(d.bracketL)?++t:this.match(d.bracketR)&&--t,this.next();return!0}return!1}tsIsUnambiguouslyStartOfFunctionType(){if(this.next(),this.match(d.parenR)||this.match(d.ellipsis))return!0;if(this.tsSkipParameterStart()){if(this.match(d.colon)||this.match(d.comma)||this.match(d.question)||this.match(d.eq))return!0;if(this.match(d.parenR)&&(this.next(),this.match(d.arrow)))return!0}return!1}tsParseTypeOrTypePredicateAnnotation(t){return this.tsInType(()=>{const e=this.startNode();this.expect(t);const r=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!r)return this.tsParseTypeAnnotation(!1,e);const n=this.tsParseTypeAnnotation(!1),o=this.startNodeAtNode(r);return o.parameterName=r,o.typeAnnotation=n,e.typeAnnotation=this.finishNode(o,"TSTypePredicate"),this.finishNode(e,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){return this.match(d.colon)?this.tsParseTypeOrTypePredicateAnnotation(d.colon):void 0}tsTryParseTypeAnnotation(){return this.match(d.colon)?this.tsParseTypeAnnotation():void 0}tsTryParseType(){return this.tsEatThenParseType(d.colon)}tsParseTypePredicatePrefix(){const t=this.parseIdentifier();if(this.isContextual("is")&&!this.hasPrecedingLineBreak())return this.next(),t}tsParseTypeAnnotation(t=!0,e=this.startNode()){return this.tsInType(()=>{t&&this.expect(d.colon),e.typeAnnotation=this.tsParseType()}),this.finishNode(e,"TSTypeAnnotation")}tsParseType(){Ft(this.state.inType);const t=this.tsParseNonConditionalType();if(this.hasPrecedingLineBreak()||!this.eat(d._extends))return t;const e=this.startNodeAtNode(t);return e.checkType=t,e.extendsType=this.tsParseNonConditionalType(),this.expect(d.question),e.trueType=this.tsParseType(),this.expect(d.colon),e.falseType=this.tsParseType(),this.finishNode(e,"TSConditionalType")}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(d._new)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){const t=this.startNode(),e=this.tsTryNextParseConstantContext();return t.typeAnnotation=e||this.tsNextThenParseType(),this.expectRelational(">"),t.expression=this.parseMaybeUnary(),this.finishNode(t,"TSTypeAssertion")}tsParseHeritageClause(t){const e=this.state.start,r=this.tsParseDelimitedList("HeritageClauseElement",this.tsParseExpressionWithTypeArguments.bind(this));return r.length||this.raise(e,`'${t}' list cannot be empty.`),r}tsParseExpressionWithTypeArguments(){const t=this.startNode();return t.expression=this.tsParseEntityName(!1),this.isRelational("<")&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSExpressionWithTypeArguments")}tsParseInterfaceDeclaration(t){t.id=this.parseIdentifier(),this.checkLVal(t.id,V,void 0,"typescript interface declaration"),t.typeParameters=this.tsTryParseTypeParameters(),this.eat(d._extends)&&(t.extends=this.tsParseHeritageClause("extends"));const body=this.startNode();return body.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),t.body=this.finishNode(body,"TSInterfaceBody"),this.finishNode(t,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(t){return t.id=this.parseIdentifier(),this.checkLVal(t.id,K,void 0,"typescript type alias"),t.typeParameters=this.tsTryParseTypeParameters(),t.typeAnnotation=this.tsExpectThenParseType(d.eq),this.semicolon(),this.finishNode(t,"TSTypeAliasDeclaration")}tsInNoContext(t){const e=this.state.context;this.state.context=[e[0]];try{return t()}finally{this.state.context=e}}tsInType(t){const e=this.state.inType;this.state.inType=!0;try{return t()}finally{this.state.inType=e}}tsEatThenParseType(t){return this.match(t)?this.tsNextThenParseType():void 0}tsExpectThenParseType(t){return this.tsDoThenParseType(()=>this.expect(t))}tsNextThenParseType(){return this.tsDoThenParseType(()=>this.next())}tsDoThenParseType(t){return this.tsInType(()=>(t(),this.tsParseType()))}tsParseEnumMember(){const t=this.startNode();return t.id=this.match(d.string)?this.parseExprAtom():this.parseIdentifier(!0),this.eat(d.eq)&&(t.initializer=this.parseMaybeAssign()),this.finishNode(t,"TSEnumMember")}tsParseEnumDeclaration(t,e){return e&&(t.const=!0),t.id=this.parseIdentifier(),this.checkLVal(t.id,e?z:W,void 0,"typescript enum declaration"),this.expect(d.braceL),t.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(d.braceR),this.finishNode(t,"TSEnumDeclaration")}tsParseModuleBlock(){const t=this.startNode();return this.scope.enter(m),this.expect(d.braceL),this.parseBlockOrModuleBlockBody(t.body=[],void 0,!0,d.braceR),this.scope.exit(),this.finishNode(t,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(t,e=!1){if(t.id=this.parseIdentifier(),e||this.checkLVal(t.id,H,null,"module or namespace declaration"),this.eat(d.dot)){const e=this.startNode();this.tsParseModuleOrNamespaceDeclaration(e,!0),t.body=e}else t.body=this.tsParseModuleBlock();return this.finishNode(t,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(t){return this.isContextual("global")?(t.global=!0,t.id=this.parseIdentifier()):this.match(d.string)?t.id=this.parseExprAtom():this.unexpected(),this.match(d.braceL)?t.body=this.tsParseModuleBlock():this.semicolon(),this.finishNode(t,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(t,e){return t.isExport=e||!1,t.id=this.parseIdentifier(),this.expect(d.eq),t.moduleReference=this.tsParseModuleReference(),this.semicolon(),this.finishNode(t,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual("require")&&this.lookahead().type===d.parenL}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){const t=this.startNode();if(this.expectContextual("require"),this.expect(d.parenL),!this.match(d.string))throw this.unexpected();return t.expression=this.parseExprAtom(),this.expect(d.parenR),this.finishNode(t,"TSExternalModuleReference")}tsLookAhead(t){const e=this.state.clone(),r=t();return this.state=e,r}tsTryParseAndCatch(t){const e=this.state.clone();try{return t()}catch(t){if(t instanceof SyntaxError)return void(this.state=e);throw t}}tsTryParse(t){const e=this.state.clone(),r=t();return void 0!==r&&!1!==r?r:void(this.state=e)}tsTryParseDeclare(t){if(this.isLineTerminator())return;let e,r=this.state.type;switch(this.isContextual("let")&&(r=d._var,e="let"),r){case d._function:return this.parseFunctionStatement(t,!1,!0);case d._class:return this.parseClass(t,!0,!1);case d._const:if(this.match(d._const)&&this.isLookaheadContextual("enum"))return this.expect(d._const),this.expectContextual("enum"),this.tsParseEnumDeclaration(t,!0);case d._var:return e=e||this.state.value,this.parseVarStatement(t,e);case d.name:{const e=this.state.value;return"global"===e?this.tsParseAmbientExternalModuleDeclaration(t):this.tsParseDeclaration(t,e,!0)}}}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0)}tsParseExpressionStatement(t,e){switch(e.name){case"declare":{const e=this.tsTryParseDeclare(t);if(e)return e.declare=!0,e;break}case"global":if(this.match(d.braceL)){const r=t;return r.global=!0,r.id=e,r.body=this.tsParseModuleBlock(),this.finishNode(r,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(t,e.name,!1)}}tsParseDeclaration(t,e,r){switch(e){case"abstract":if(this.tsCheckLineTerminatorAndMatch(d._class,r)){const e=t;return e.abstract=!0,r&&(this.next(),this.match(d._class)||this.unexpected(null,d._class)),this.parseClass(e,!0,!1)}break;case"enum":if(r||this.match(d.name))return r&&this.next(),this.tsParseEnumDeclaration(t,!1);break;case"interface":if(this.tsCheckLineTerminatorAndMatch(d.name,r))return r&&this.next(),this.tsParseInterfaceDeclaration(t);break;case"module":if(r&&this.next(),this.match(d.string))return this.tsParseAmbientExternalModuleDeclaration(t);if(this.tsCheckLineTerminatorAndMatch(d.name,r))return this.tsParseModuleOrNamespaceDeclaration(t);break;case"namespace":if(this.tsCheckLineTerminatorAndMatch(d.name,r))return r&&this.next(),this.tsParseModuleOrNamespaceDeclaration(t);break;case"type":if(this.tsCheckLineTerminatorAndMatch(d.name,r))return r&&this.next(),this.tsParseTypeAliasDeclaration(t)}}tsCheckLineTerminatorAndMatch(t,e){return(e||this.match(t))&&!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(t,e){if(!this.isRelational("<"))return;const r=this.tsTryParseAndCatch(()=>{const r=this.startNodeAt(t,e);return r.typeParameters=this.tsParseTypeParameters(),super.parseFunctionParams(r),r.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(d.arrow),r});return r?this.parseArrowExpression(r,null,!0):void 0}tsParseTypeArguments(){const t=this.startNode();return t.params=this.tsInType(()=>this.tsInNoContext(()=>(this.expectRelational("<"),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))),this.state.exprAllowed=!1,this.expectRelational(">"),this.finishNode(t,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){if(this.match(d.name))switch(this.state.value){case"abstract":case"declare":case"enum":case"interface":case"module":case"namespace":case"type":return!0}return!1}isExportDefaultSpecifier(){return!this.tsIsDeclarationStart()&&super.isExportDefaultSpecifier()}parseAssignableListItem(t,e){const r=this.state.start,n=this.state.startLoc;let o,h=!1;t&&(o=this.parseAccessModifier(),h=!!this.tsParseModifier(["readonly"]));const c=this.parseMaybeDefault();this.parseAssignableListItemTypes(c);const l=this.parseMaybeDefault(c.start,c.loc.start,c);if(o||h){const t=this.startNodeAt(r,n);if(e.length&&(t.decorators=e),o&&(t.accessibility=o),h&&(t.readonly=h),"Identifier"!==l.type&&"AssignmentPattern"!==l.type)throw this.raise(t.start,"A parameter property may not be declared using a binding pattern.");return t.parameter=l,this.finishNode(t,"TSParameterProperty")}return e.length&&(c.decorators=e),l}parseFunctionBodyAndFinish(t,e,r=!1){this.match(d.colon)&&(t.returnType=this.tsParseTypeOrTypePredicateAnnotation(d.colon));const n="FunctionDeclaration"===e?"TSDeclareFunction":"ClassMethod"===e?"TSDeclareMethod":void 0;n&&!this.match(d.braceL)&&this.isLineTerminator()?this.finishNode(t,n):super.parseFunctionBodyAndFinish(t,e,r)}checkFunctionStatementId(t){!t.body&&t.id?this.checkLVal(t.id,X,null,"function name"):super.checkFunctionStatementId(...arguments)}parseSubscript(base,t,e,r,n,o){if(!this.hasPrecedingLineBreak()&&this.match(d.bang)){this.state.exprAllowed=!1,this.next();const r=this.startNodeAt(t,e);return r.expression=base,this.finishNode(r,"TSNonNullExpression")}if(this.isRelational("<")){const o=this.tsTryParseAndCatch(()=>{if(!r&&this.atPossibleAsync(base)){const r=this.tsTryParseGenericAsyncArrowFunction(t,e);if(r)return r}const o=this.startNodeAt(t,e);o.callee=base;const h=this.tsParseTypeArguments();if(h){if(!r&&this.eat(d.parenL))return o.arguments=this.parseCallExpressionArguments(d.parenR,!1),o.typeParameters=h,this.finishCallExpression(o);if(this.match(d.backQuote))return this.parseTaggedTemplateExpression(t,e,base,n,h)}this.unexpected()});if(o)return o}return super.parseSubscript(base,t,e,r,n,o)}parseNewArguments(t){if(this.isRelational("<")){const e=this.tsTryParseAndCatch(()=>{const t=this.tsParseTypeArguments();return this.match(d.parenL)||this.unexpected(),t});e&&(t.typeParameters=e)}super.parseNewArguments(t)}parseExprOp(t,e,r,n,o){if(_t(d._in.binop)>n&&!this.hasPrecedingLineBreak()&&this.isContextual("as")){const h=this.startNodeAt(e,r);h.expression=t;const c=this.tsTryNextParseConstantContext();return h.typeAnnotation=c||this.tsNextThenParseType(),this.finishNode(h,"TSAsExpression"),this.parseExprOp(h,e,r,n,o)}return super.parseExprOp(t,e,r,n,o)}checkReservedWord(t,e,r,n){}checkDuplicateExports(){}parseImport(t){return this.match(d.name)&&this.lookahead().type===d.eq?this.tsParseImportEqualsDeclaration(t):super.parseImport(t)}parseExport(t){if(this.match(d._import))return this.expect(d._import),this.tsParseImportEqualsDeclaration(t,!0);if(this.eat(d.eq)){const e=t;return e.expression=this.parseExpression(),this.semicolon(),this.finishNode(e,"TSExportAssignment")}if(this.eatContextual("as")){const e=t;return this.expectContextual("namespace"),e.id=this.parseIdentifier(),this.semicolon(),this.finishNode(e,"TSNamespaceExportDeclaration")}return super.parseExport(t)}isAbstractClass(){return this.isContextual("abstract")&&this.lookahead().type===d._class}parseExportDefaultExpression(){if(this.isAbstractClass()){const t=this.startNode();return this.next(),this.parseClass(t,!0,!0),t.abstract=!0,t}if("interface"===this.state.value){const t=this.tsParseDeclaration(this.startNode(),this.state.value,!0);if(t)return t}return super.parseExportDefaultExpression()}parseStatementContent(t,e){if(this.state.type===d._const){const t=this.lookahead();if(t.type===d.name&&"enum"===t.value){const t=this.startNode();return this.expect(d._const),this.expectContextual("enum"),this.tsParseEnumDeclaration(t,!0)}}return super.parseStatementContent(t,e)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}parseClassMember(t,e,r,n){const o=this.parseAccessModifier();o&&(e.accessibility=o),super.parseClassMember(t,e,r,n)}parseClassMemberWithIsStatic(t,e,r,n,o){const h=e,c=e,l=e;let d=!1,m=!1;switch(this.tsParseModifier(["abstract","readonly"])){case"readonly":m=!0,d=!!this.tsParseModifier(["abstract"]);break;case"abstract":d=!0,m=!!this.tsParseModifier(["readonly"])}if(d&&(h.abstract=!0),m&&(l.readonly=!0),!d&&!n&&!h.accessibility){const r=this.tsTryParseIndexSignature(e);if(r)return void t.body.push(r)}if(m)return h.static=n,this.parseClassPropertyName(c),this.parsePostMemberNameModifiers(h),void this.pushClassProperty(t,c);super.parseClassMemberWithIsStatic(t,e,r,n,o)}parsePostMemberNameModifiers(t){this.eat(d.question)&&(t.optional=!0)}parseExpressionStatement(t,e){return("Identifier"===e.type?this.tsParseExpressionStatement(t,e):void 0)||super.parseExpressionStatement(t,e)}shouldParseExportDeclaration(){return!!this.tsIsDeclarationStart()||super.shouldParseExportDeclaration()}parseConditional(t,e,r,n,o){if(!o||!this.match(d.question))return super.parseConditional(t,e,r,n,o);const h=this.state.clone();try{return super.parseConditional(t,e,r,n)}catch(e){if(!(e instanceof SyntaxError))throw e;return this.state=h,o.start=e.pos||this.state.start,t}}parseParenItem(t,e,r){if(t=super.parseParenItem(t,e,r),this.eat(d.question)&&(t.optional=!0,this.resetEndLocation(t)),this.match(d.colon)){const n=this.startNodeAt(e,r);return n.expression=t,n.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(n,"TSTypeCastExpression")}return t}parseExportDeclaration(t){const e=this.state.start,r=this.state.startLoc,n=this.eatContextual("declare");let o;return this.match(d.name)&&(o=this.tsTryParseExportDeclaration()),o||(o=super.parseExportDeclaration(t)),o&&n&&(this.resetStartLocation(o,e,r),o.declare=!0),o}parseClassId(t,e,r){if((!e||r)&&this.isContextual("implements"))return;super.parseClassId(...arguments);const n=this.tsTryParseTypeParameters();n&&(t.typeParameters=n)}parseClassProperty(t){!t.optional&&this.eat(d.bang)&&(t.definite=!0);const e=this.tsTryParseTypeAnnotation();return e&&(t.typeAnnotation=e),super.parseClassProperty(t)}pushClassMethod(t,e,r,n,o,h){const c=this.tsTryParseTypeParameters();c&&(e.typeParameters=c),super.pushClassMethod(t,e,r,n,o,h)}pushClassPrivateMethod(t,e,r,n){const o=this.tsTryParseTypeParameters();o&&(e.typeParameters=o),super.pushClassPrivateMethod(t,e,r,n)}parseClassSuper(t){super.parseClassSuper(t),t.superClass&&this.isRelational("<")&&(t.superTypeParameters=this.tsParseTypeArguments()),this.eatContextual("implements")&&(t.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(t,...e){const r=this.tsTryParseTypeParameters();r&&(t.typeParameters=r),super.parseObjPropValue(t,...e)}parseFunctionParams(t,e){const r=this.tsTryParseTypeParameters();r&&(t.typeParameters=r),super.parseFunctionParams(t,e)}parseVarId(t,e){super.parseVarId(t,e),"Identifier"===t.id.type&&this.eat(d.bang)&&(t.definite=!0);const r=this.tsTryParseTypeAnnotation();r&&(t.id.typeAnnotation=r,this.resetEndLocation(t.id))}parseAsyncArrowFromCallExpression(t,e){return this.match(d.colon)&&(t.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(t,e)}parseMaybeAssign(...t){let e,r,n;if(this.match(d.jsxTagStart)){Ft(this.curContext()===it.j_oTag),Ft(this.state.context[this.state.context.length-2]===it.j_expr);const r=this.state.clone();try{return super.parseMaybeAssign(...t)}catch(t){if(!(t instanceof SyntaxError))throw t;this.state=r,Ft(this.curContext()===it.j_oTag),this.state.context.pop(),Ft(this.curContext()===it.j_expr),this.state.context.pop(),e=t}}if(void 0===e&&!this.isRelational("<"))return super.parseMaybeAssign(...t);const o=this.state.clone();try{n=this.tsParseTypeParameters(),("ArrowFunctionExpression"!==(r=super.parseMaybeAssign(...t)).type||r.extra&&r.extra.parenthesized)&&this.unexpected()}catch(r){if(!(r instanceof SyntaxError))throw r;if(e)throw e;return Ft(!this.hasPlugin("jsx")),this.state=o,super.parseMaybeAssign(...t)}return n&&0!==n.params.length&&this.resetStartLocationFromNode(r,n),r.typeParameters=n,r}parseMaybeUnary(t){return!this.hasPlugin("jsx")&&this.isRelational("<")?this.tsParseTypeAssertion():super.parseMaybeUnary(t)}parseArrow(t){if(this.match(d.colon)){const e=this.state.clone();try{const r=this.tsParseTypeOrTypePredicateAnnotation(d.colon);if(this.canInsertSemicolon()||!this.match(d.arrow))return void(this.state=e);t.returnType=r}catch(t){if(!(t instanceof SyntaxError))throw t;this.state=e}}return super.parseArrow(t)}parseAssignableListItemTypes(param){if(this.eat(d.question)){if("Identifier"!==param.type)throw this.raise(param.start,"A binding pattern parameter cannot be optional in an implementation signature.");param.optional=!0}const t=this.tsTryParseTypeAnnotation();return t&&(param.typeAnnotation=t),this.resetEndLocation(param),param}toAssignable(t,e,r){switch(t.type){case"TSTypeCastExpression":return super.toAssignable(this.typeCastToParameter(t),e,r);case"TSParameterProperty":return super.toAssignable(t,e,r);case"TSAsExpression":case"TSNonNullExpression":case"TSTypeAssertion":return t.expression=this.toAssignable(t.expression,e,r),t;default:return super.toAssignable(t,e,r)}}checkLVal(t,e=J,r,n){switch(t.type){case"TSTypeCastExpression":return;case"TSParameterProperty":return void this.checkLVal(t.parameter,e,r,"parameter property");case"TSAsExpression":case"TSNonNullExpression":case"TSTypeAssertion":return void this.checkLVal(t.expression,e,r,n);default:return void super.checkLVal(t,e,r,n)}}parseBindingAtom(){switch(this.state.type){case d._this:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseMaybeDecoratorArguments(t){if(this.isRelational("<")){const e=this.tsParseTypeArguments();if(this.match(d.parenL)){const r=super.parseMaybeDecoratorArguments(t);return r.typeParameters=e,r}this.unexpected(this.state.start,d.parenL)}return super.parseMaybeDecoratorArguments(t)}isClassMethod(){return this.isRelational("<")||super.isClassMethod()}isClassProperty(){return this.match(d.bang)||this.match(d.colon)||super.isClassProperty()}parseMaybeDefault(...t){const e=super.parseMaybeDefault(...t);return"AssignmentPattern"===e.type&&e.typeAnnotation&&e.right.start<e.typeAnnotation.start&&this.raise(e.typeAnnotation.start,"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`"),e}getTokenFromCode(code){return!this.state.inType||62!==code&&60!==code?super.getTokenFromCode(code):this.finishOp(d.relational,1)}toAssignableList(t,e,r){for(let i=0;i<t.length;i++){const e=t[i];if(e)switch(e.type){case"TSTypeCastExpression":t[i]=this.typeCastToParameter(e);break;case"TSAsExpression":case"TSTypeAssertion":this.raise(e.start,"Unexpected type cast in parameter position.")}}return super.toAssignableList(t,e,r)}typeCastToParameter(t){return t.expression.typeAnnotation=t.typeAnnotation,this.resetEndLocation(t.expression,t.typeAnnotation.end,t.typeAnnotation.loc.end),t.expression}toReferencedList(t,e){for(let i=0;i<t.length;i++){const e=t[i];e&&e._exprListItem&&"TsTypeCastExpression"===e.type&&this.raise(e.start,"Did not expect a type annotation here.")}return t}shouldParseArrow(){return this.match(d.colon)||super.shouldParseArrow()}shouldParseAsyncArrow(){return this.match(d.colon)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(t){if(this.isRelational("<")){const e=this.tsTryParseAndCatch(()=>this.tsParseTypeArguments());e&&(t.typeParameters=e)}return super.jsxParseOpeningElementAfterName(t)}getGetterSetterExpectedParamCount(t){const e=super.getGetterSetterExpectedParamCount(t),r=t.params[0];return r&&"Identifier"===r.type&&"this"===r.name?e+1:e}}),placeholders:t=>(class extends t{parsePlaceholder(t){if(this.match(d.placeholder)){const e=this.startNode();return this.next(),this.assertNoSpace("Unexpected space in placeholder."),e.name=super.parseIdentifier(!0),this.assertNoSpace("Unexpected space in placeholder."),this.expect(d.placeholder),this.finishPlaceholder(e,t)}}finishPlaceholder(t,e){const r=!(!t.expectedNode||"Placeholder"!==t.type);return t.expectedNode=e,r?t:this.finishNode(t,"Placeholder")}getTokenFromCode(code){return 37===code&&37===this.input.charCodeAt(this.state.pos+1)?this.finishOp(d.placeholder,2):super.getTokenFromCode(...arguments)}parseExprAtom(){return this.parsePlaceholder("Expression")||super.parseExprAtom(...arguments)}parseIdentifier(){return this.parsePlaceholder("Identifier")||super.parseIdentifier(...arguments)}checkReservedWord(t){void 0!==t&&super.checkReservedWord(...arguments)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom(...arguments)}checkLVal(t){"Placeholder"!==t.type&&super.checkLVal(...arguments)}toAssignable(t){return t&&"Placeholder"===t.type&&"Expression"===t.expectedNode?(t.expectedNode="Pattern",t):super.toAssignable(...arguments)}verifyBreakContinue(t){t.label&&"Placeholder"===t.label.type||super.verifyBreakContinue(...arguments)}parseExpressionStatement(t,e){if("Placeholder"!==e.type||e.extra&&e.extra.parenthesized)return super.parseExpressionStatement(...arguments);if(this.match(d.colon)){const r=t;return r.label=this.finishPlaceholder(e,"Identifier"),this.next(),r.body=this.parseStatement("label"),this.finishNode(r,"LabeledStatement")}return this.semicolon(),t.name=e.name,this.finishPlaceholder(t,"Statement")}parseBlock(){return this.parsePlaceholder("BlockStatement")||super.parseBlock(...arguments)}parseFunctionId(){return this.parsePlaceholder("Identifier")||super.parseFunctionId(...arguments)}parseClass(t,e,r){const n=e?"ClassDeclaration":"ClassExpression";this.next(),this.takeDecorators(t);const o=this.parsePlaceholder("Identifier");if(o)if(this.match(d._extends)||this.match(d.placeholder)||this.match(d.braceL))t.id=o;else{if(r||!e)return t.id=null,t.body=this.finishPlaceholder(o,"ClassBody"),this.finishNode(t,n);this.unexpected(null,"A class name is required")}else this.parseClassId(t,e,r);return this.parseClassSuper(t),t.body=this.parsePlaceholder("ClassBody")||this.parseClassBody(!!t.superClass),this.finishNode(t,n)}parseExport(t){const e=this.parsePlaceholder("Identifier");if(!e)return super.parseExport(...arguments);if(!this.isContextual("from")&&!this.match(d.comma))return t.specifiers=[],t.source=null,t.declaration=this.finishPlaceholder(e,"Declaration"),this.finishNode(t,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");const r=this.startNode();return r.exported=e,t.specifiers=[this.finishNode(r,"ExportDefaultSpecifier")],super.parseExport(t)}maybeParseExportDefaultSpecifier(t){return!!(t.specifiers&&t.specifiers.length>0)||super.maybeParseExportDefaultSpecifier(...arguments)}checkExport(t){const{specifiers:e}=t;e&&e.length&&(t.specifiers=e.filter(t=>"Placeholder"===t.exported.type)),super.checkExport(t),t.specifiers=e}parseImport(t){const e=this.parsePlaceholder("Identifier");if(!e)return super.parseImport(...arguments);if(t.specifiers=[],!this.isContextual("from")&&!this.match(d.comma))return t.source=this.finishPlaceholder(e,"StringLiteral"),this.semicolon(),this.finishNode(t,"ImportDeclaration");const r=this.startNodeAtNode(e);return r.local=e,this.finishNode(r,"ImportDefaultSpecifier"),t.specifiers.push(r),this.eat(d.comma)&&(this.maybeParseStarImportSpecifier(t)||this.parseNamedImportSpecifiers(t)),this.expectContextual("from"),t.source=this.parseImportSource(),this.semicolon(),this.finishNode(t,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource(...arguments)}})},Vt=Object.keys(Ut),Kt={sourceType:"script",sourceFilename:void 0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createParenthesizedExpressions:!1};class Wt{constructor(line,col){this.line=line,this.column=col}}class Xt{constructor(t,e){this.start=t,this.end=e}}class Jt{constructor(){this.sawUnambiguousESM=!1}hasPlugin(t){return this.plugins.has(t)}getPluginOption(t,e){if(this.hasPlugin(t))return this.plugins.get(t)[e]}}function $t(t){return t[t.length-1]}class zt extends Jt{addComment(t){this.filename&&(t.loc.filename=this.filename),this.state.trailingComments.push(t),this.state.leadingComments.push(t)}processComment(t){if("Program"===t.type&&t.body.length>0)return;const e=this.state.commentStack;let r,n,o,i,h;if(this.state.trailingComments.length>0)this.state.trailingComments[0].start>=t.end?(o=this.state.trailingComments,this.state.trailingComments=[]):this.state.trailingComments.length=0;else if(e.length>0){const r=$t(e);r.trailingComments&&r.trailingComments[0].start>=t.end&&(o=r.trailingComments,delete r.trailingComments)}for(e.length>0&&$t(e).start>=t.start&&(r=e.pop());e.length>0&&$t(e).start>=t.start;)n=e.pop();if(!n&&r&&(n=r),r&&this.state.leadingComments.length>0){const e=$t(this.state.leadingComments);if("ObjectProperty"===r.type){if(e.start>=t.start&&this.state.commentPreviousNode){for(h=0;h<this.state.leadingComments.length;h++)this.state.leadingComments[h].end<this.state.commentPreviousNode.end&&(this.state.leadingComments.splice(h,1),h--);this.state.leadingComments.length>0&&(r.trailingComments=this.state.leadingComments,this.state.leadingComments=[])}}else if("CallExpression"===t.type&&t.arguments&&t.arguments.length){const r=$t(t.arguments);if(r&&e.start>=r.start&&e.end<=t.end&&this.state.commentPreviousNode){for(h=0;h<this.state.leadingComments.length;h++)this.state.leadingComments[h].end<this.state.commentPreviousNode.end&&(this.state.leadingComments.splice(h,1),h--);this.state.leadingComments.length>0&&(r.trailingComments=this.state.leadingComments,this.state.leadingComments=[])}}}if(n){if(n.leadingComments)if(n!==t&&n.leadingComments.length>0&&$t(n.leadingComments).end<=t.start)t.leadingComments=n.leadingComments,delete n.leadingComments;else for(i=n.leadingComments.length-2;i>=0;--i)if(n.leadingComments[i].end<=t.start){t.leadingComments=n.leadingComments.splice(0,i+1);break}}else if(this.state.leadingComments.length>0)if($t(this.state.leadingComments).end<=t.start){if(this.state.commentPreviousNode)for(h=0;h<this.state.leadingComments.length;h++)this.state.leadingComments[h].end<this.state.commentPreviousNode.end&&(this.state.leadingComments.splice(h,1),h--);this.state.leadingComments.length>0&&(t.leadingComments=this.state.leadingComments,this.state.leadingComments=[])}else{for(i=0;i<this.state.leadingComments.length&&!(this.state.leadingComments[i].end>t.start);i++);const e=this.state.leadingComments.slice(0,i);e.length&&(t.leadingComments=e),0===(o=this.state.leadingComments.slice(i)).length&&(o=null)}this.state.commentPreviousNode=t,o&&(o.length&&o[0].start>=t.start&&$t(o).end<=t.end?t.innerComments=o:t.trailingComments=o),e.push(t)}}class Ht extends zt{getLocationForPosition(t){let e;return e=t===this.state.start?this.state.startLoc:t===this.state.lastTokStart?this.state.lastTokStartLoc:t===this.state.end?this.state.endLoc:t===this.state.lastTokEnd?this.state.lastTokEndLoc:function(input,t){let e,line=1,r=0;for(Y.lastIndex=0;(e=Y.exec(input))&&e.index<t;)line++,r=Y.lastIndex;return new Wt(line,t-r)}(this.input,t)}raise(t,e,{missingPluginNames:r,code:code}={}){const n=this.getLocationForPosition(t);e+=` (${n.line}:${n.column})`;const o=new SyntaxError(e);throw o.pos=t,o.loc=n,r&&(o.missingPlugin=r),void 0!==code&&(o.code=code),o}}class Gt{constructor(){this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.commaAfterSpreadAt=-1,this.inParameters=!1,this.maybeInArrowParameters=!1,this.inPipeline=!1,this.inType=!1,this.noAnonFunctionType=!1,this.inPropertyName=!1,this.inClassProperty=!1,this.hasFlowComment=!1,this.isIterator=!1,this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.soloAwait=!1,this.inFSharpPipelineDirectBody=!1,this.classLevel=0,this.labels=[],this.decoratorStack=[[]],this.yieldPos=0,this.awaitPos=0,this.tokens=[],this.comments=[],this.trailingComments=[],this.leadingComments=[],this.commentStack=[],this.commentPreviousNode=null,this.pos=0,this.lineStart=0,this.type=d.eof,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.lastTokStart=0,this.lastTokEnd=0,this.context=[it.braceStatement],this.exprAllowed=!0,this.containsEsc=!1,this.containsOctal=!1,this.octalPosition=null,this.exportedIdentifiers=[],this.invalidTemplateEscapePosition=null}init(t){this.strict=!1!==t.strictMode&&"module"===t.sourceType,this.curLine=t.startLine,this.startLoc=this.endLoc=this.curPosition()}curPosition(){return new Wt(this.curLine,this.pos-this.lineStart)}clone(t){const e=new Gt,r=Object.keys(this);for(let i=0,n=r.length;i<n;i++){const n=r[i];let o=this[n];!t&&Array.isArray(o)&&(o=o.slice()),e[n]=o}return e}}var Qt=function(code){return code>=48&&code<=57};const Yt=new Set(["g","m","s","i","y","u"]),Zt={decBinOct:[46,66,69,79,95,98,101,111],hex:[46,88,95,120]},te={bin:[48,49]};te.oct=[...te.bin,50,51,52,53,54,55],te.dec=[...te.oct,56,57],te.hex=[...te.dec,65,66,67,68,69,70,97,98,99,100,101,102];class ee{constructor(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,this.loc=new Xt(t.startLoc,t.endLoc)}}class se extends Ht{constructor(t,input){super(),this.state=new Gt,this.state.init(t),this.input=input,this.length=input.length,this.isLookahead=!1}next(){this.options.tokens&&!this.isLookahead&&this.state.tokens.push(new ee(this.state)),this.state.lastTokEnd=this.state.end,this.state.lastTokStart=this.state.start,this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(t){return!!this.match(t)&&(this.next(),!0)}match(t){return this.state.type===t}lookahead(){const t=this.state;this.state=t.clone(!0),this.isLookahead=!0,this.next(),this.isLookahead=!1;const e=this.state;return this.state=t,e}setStrict(t){if(this.state.strict=t,this.match(d.num)||this.match(d.string)){for(this.state.pos=this.state.start;this.state.pos<this.state.lineStart;)this.state.lineStart=this.input.lastIndexOf("\n",this.state.lineStart-2)+1,--this.state.curLine;this.nextToken()}}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){const t=this.curContext();t&&t.preserveSpace||this.skipSpace(),this.state.containsOctal=!1,this.state.octalPosition=null,this.state.start=this.state.pos,this.state.startLoc=this.state.curPosition(),this.state.pos>=this.length?this.finishToken(d.eof):t.override?t.override(this):this.getTokenFromCode(this.input.codePointAt(this.state.pos))}pushComment(t,text,e,r,n,o){const h={type:t?"CommentBlock":"CommentLine",value:text,start:e,end:r,loc:new Xt(n,o)};this.options.tokens&&this.state.tokens.push(h),this.state.comments.push(h),this.addComment(h)}skipBlockComment(){const t=this.state.curPosition(),e=this.state.pos,r=this.input.indexOf("*/",this.state.pos+=2);let n;for(-1===r&&this.raise(this.state.pos-2,"Unterminated comment"),this.state.pos=r+2,Y.lastIndex=e;(n=Y.exec(this.input))&&n.index<this.state.pos;)++this.state.curLine,this.state.lineStart=n.index+n[0].length;this.isLookahead||this.pushComment(!0,this.input.slice(e+2,r),e,this.state.pos,t,this.state.curPosition())}skipLineComment(t){const e=this.state.pos,r=this.state.curPosition();let n=this.input.charCodeAt(this.state.pos+=t);if(this.state.pos<this.length)for(;10!==n&&13!==n&&8232!==n&&8233!==n&&++this.state.pos<this.length;)n=this.input.charCodeAt(this.state.pos);this.isLookahead||this.pushComment(!1,this.input.slice(e+t,this.state.pos),e,this.state.pos,r,this.state.curPosition())}skipSpace(){t:for(;this.state.pos<this.length;){const t=this.input.charCodeAt(this.state.pos);switch(t){case 32:case 160:case 9:++this.state.pos;break;case 13:10===this.input.charCodeAt(this.state.pos+1)&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!et(t))break t;++this.state.pos}}}finishToken(t,e){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();const r=this.state.type;this.state.type=t,this.state.value=e,this.isLookahead||this.updateContext(r)}readToken_numberSign(){if(0===this.state.pos&&this.readToken_interpreter())return;const t=this.state.pos+1,e=this.input.charCodeAt(t);if(e>=48&&e<=57&&this.raise(this.state.pos,"Unexpected digit after hash token"),(this.hasPlugin("classPrivateProperties")||this.hasPlugin("classPrivateMethods"))&&this.state.classLevel>0)return++this.state.pos,void this.finishToken(d.hash);"smart"===this.getPluginOption("pipelineOperator","proposal")?this.finishOp(d.hash,1):this.raise(this.state.pos,"Unexpected character '#'")}readToken_dot(){const t=this.input.charCodeAt(this.state.pos+1);if(t>=48&&t<=57)return void this.readNumber(!0);const e=this.input.charCodeAt(this.state.pos+2);46===t&&46===e?(this.state.pos+=3,this.finishToken(d.ellipsis)):(++this.state.pos,this.finishToken(d.dot))}readToken_slash(){if(this.state.exprAllowed&&!this.state.inType)return++this.state.pos,void this.readRegexp();61===this.input.charCodeAt(this.state.pos+1)?this.finishOp(d.assign,2):this.finishOp(d.slash,1)}readToken_interpreter(){if(0!==this.state.pos||this.length<2)return!1;const t=this.state.pos;this.state.pos+=1;let e=this.input.charCodeAt(this.state.pos);if(33!==e)return!1;for(;10!==e&&13!==e&&8232!==e&&8233!==e&&++this.state.pos<this.length;)e=this.input.charCodeAt(this.state.pos);const r=this.input.slice(t+2,this.state.pos);return this.finishToken(d.interpreterDirective,r),!0}readToken_mult_modulo(code){let t=42===code?d.star:d.modulo,e=1,r=this.input.charCodeAt(this.state.pos+1);const n=this.state.exprAllowed;42===code&&42===r&&(e++,r=this.input.charCodeAt(this.state.pos+2),t=d.exponent),61!==r||n||(e++,t=d.assign),this.finishOp(t,e)}readToken_pipe_amp(code){const t=this.input.charCodeAt(this.state.pos+1);t!==code?124!==code||62!==t?61!==t?this.finishOp(124===code?d.bitwiseOR:d.bitwiseAND,1):this.finishOp(d.assign,2):this.finishOp(d.pipeline,2):61===this.input.charCodeAt(this.state.pos+2)?this.finishOp(d.assign,3):this.finishOp(124===code?d.logicalOR:d.logicalAND,2)}readToken_caret(){61===this.input.charCodeAt(this.state.pos+1)?this.finishOp(d.assign,2):this.finishOp(d.bitwiseXOR,1)}readToken_plus_min(code){const t=this.input.charCodeAt(this.state.pos+1);if(t===code)return 45!==t||this.inModule||62!==this.input.charCodeAt(this.state.pos+2)||0!==this.state.lastTokEnd&&!Q.test(this.input.slice(this.state.lastTokEnd,this.state.pos))?void this.finishOp(d.incDec,2):(this.skipLineComment(3),this.skipSpace(),void this.nextToken());61===t?this.finishOp(d.assign,2):this.finishOp(d.plusMin,1)}readToken_lt_gt(code){const t=this.input.charCodeAt(this.state.pos+1);let e=1;return t===code?(e=62===code&&62===this.input.charCodeAt(this.state.pos+2)?3:2,61===this.input.charCodeAt(this.state.pos+e)?void this.finishOp(d.assign,e+1):void this.finishOp(d.bitShift,e)):33!==t||60!==code||this.inModule||45!==this.input.charCodeAt(this.state.pos+2)||45!==this.input.charCodeAt(this.state.pos+3)?(61===t&&(e=2),void this.finishOp(d.relational,e)):(this.skipLineComment(4),this.skipSpace(),void this.nextToken())}readToken_eq_excl(code){const t=this.input.charCodeAt(this.state.pos+1);if(61!==t)return 61===code&&62===t?(this.state.pos+=2,void this.finishToken(d.arrow)):void this.finishOp(61===code?d.eq:d.bang,1);this.finishOp(d.equality,61===this.input.charCodeAt(this.state.pos+2)?3:2)}readToken_question(){const t=this.input.charCodeAt(this.state.pos+1),e=this.input.charCodeAt(this.state.pos+2);63!==t||this.state.inType?46!==t||e>=48&&e<=57?(++this.state.pos,this.finishToken(d.question)):(this.state.pos+=2,this.finishToken(d.questionDot)):61===e?this.finishOp(d.assign,3):this.finishOp(d.nullishCoalescing,2)}getTokenFromCode(code){switch(code){case 46:return void this.readToken_dot();case 40:return++this.state.pos,void this.finishToken(d.parenL);case 41:return++this.state.pos,void this.finishToken(d.parenR);case 59:return++this.state.pos,void this.finishToken(d.semi);case 44:return++this.state.pos,void this.finishToken(d.comma);case 91:return++this.state.pos,void this.finishToken(d.bracketL);case 93:return++this.state.pos,void this.finishToken(d.bracketR);case 123:return++this.state.pos,void this.finishToken(d.braceL);case 125:return++this.state.pos,void this.finishToken(d.braceR);case 58:return void(this.hasPlugin("functionBind")&&58===this.input.charCodeAt(this.state.pos+1)?this.finishOp(d.doubleColon,2):(++this.state.pos,this.finishToken(d.colon)));case 63:return void this.readToken_question();case 96:return++this.state.pos,void this.finishToken(d.backQuote);case 48:{const t=this.input.charCodeAt(this.state.pos+1);if(120===t||88===t)return void this.readRadixNumber(16);if(111===t||79===t)return void this.readRadixNumber(8);if(98===t||66===t)return void this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return void this.readNumber(!1);case 34:case 39:return void this.readString(code);case 47:return void this.readToken_slash();case 37:case 42:return void this.readToken_mult_modulo(code);case 124:case 38:return void this.readToken_pipe_amp(code);case 94:return void this.readToken_caret();case 43:case 45:return void this.readToken_plus_min(code);case 60:case 62:return void this.readToken_lt_gt(code);case 61:case 33:return void this.readToken_eq_excl(code);case 126:return void this.finishOp(d.tilde,1);case 64:return++this.state.pos,void this.finishToken(d.at);case 35:return void this.readToken_numberSign();case 92:return void this.readWord();default:if(Tt(code))return void this.readWord()}this.raise(this.state.pos,`Unexpected character '${String.fromCodePoint(code)}'`)}finishOp(t,e){const r=this.input.slice(this.state.pos,this.state.pos+e);this.state.pos+=e,this.finishToken(t,r)}readRegexp(){const t=this.state.pos;let e,r;for(;;){this.state.pos>=this.length&&this.raise(t,"Unterminated regular expression");const n=this.input.charAt(this.state.pos);if(Q.test(n)&&this.raise(t,"Unterminated regular expression"),e)e=!1;else{if("["===n)r=!0;else if("]"===n&&r)r=!1;else if("/"===n&&!r)break;e="\\"===n}++this.state.pos}const content=this.input.slice(t,this.state.pos);++this.state.pos;let n="";for(;this.state.pos<this.length;){const t=this.input[this.state.pos],e=this.input.codePointAt(this.state.pos);if(Yt.has(t))n.indexOf(t)>-1&&this.raise(this.state.pos+1,"Duplicate regular expression flag"),++this.state.pos,n+=t;else{if(!bt(e)&&92!==e)break;this.raise(this.state.pos+1,"Invalid regular expression flag")}}this.finishToken(d.regexp,{pattern:content,flags:n})}readInt(t,e){const r=this.state.pos,n=16===t?Zt.hex:Zt.decBinOct,o=16===t?te.hex:10===t?te.dec:8===t?te.oct:te.bin;let h=0;for(let i=0,r=null==e?1/0:e;i<r;++i){const code=this.input.charCodeAt(this.state.pos);let e;if(this.hasPlugin("numericSeparator")){const t=this.input.charCodeAt(this.state.pos-1),e=this.input.charCodeAt(this.state.pos+1);if(95===code){-1===o.indexOf(e)&&this.raise(this.state.pos,"Invalid or unexpected token"),(n.indexOf(t)>-1||n.indexOf(e)>-1||Number.isNaN(e))&&this.raise(this.state.pos,"Invalid or unexpected token"),++this.state.pos;continue}}if((e=code>=97?code-97+10:code>=65?code-65+10:Qt(code)?code-48:1/0)>=t)break;++this.state.pos,h=h*t+e}return this.state.pos===r||null!=e&&this.state.pos-r!==e?null:h}readRadixNumber(t){const e=this.state.pos;let r=!1;this.state.pos+=2;const n=this.readInt(t);if(null==n&&this.raise(this.state.start+2,"Expected number in radix "+t),this.hasPlugin("bigInt")&&110===this.input.charCodeAt(this.state.pos)&&(++this.state.pos,r=!0),Tt(this.input.codePointAt(this.state.pos))&&this.raise(this.state.pos,"Identifier directly after number"),r){const t=this.input.slice(e,this.state.pos).replace(/[_n]/g,"");this.finishToken(d.bigint,t)}else this.finishToken(d.num,n)}readNumber(t){const e=this.state.pos;let r=!1,n=!1;t||null!==this.readInt(10)||this.raise(e,"Invalid number");let o=this.state.pos-e>=2&&48===this.input.charCodeAt(e);o&&(this.state.strict&&this.raise(e,"Legacy octal literals are not allowed in strict mode"),/[89]/.test(this.input.slice(e,this.state.pos))&&(o=!1));let h=this.input.charCodeAt(this.state.pos);46!==h||o||(++this.state.pos,this.readInt(10),r=!0,h=this.input.charCodeAt(this.state.pos)),69!==h&&101!==h||o||(43!==(h=this.input.charCodeAt(++this.state.pos))&&45!==h||++this.state.pos,null===this.readInt(10)&&this.raise(e,"Invalid number"),r=!0,h=this.input.charCodeAt(this.state.pos)),this.hasPlugin("bigInt")&&110===h&&((r||o)&&this.raise(e,"Invalid BigIntLiteral"),++this.state.pos,n=!0),Tt(this.input.codePointAt(this.state.pos))&&this.raise(this.state.pos,"Identifier directly after number");const c=this.input.slice(e,this.state.pos).replace(/[_n]/g,"");if(n)return void this.finishToken(d.bigint,c);const l=o?parseInt(c,8):parseFloat(c);this.finishToken(d.num,l)}readCodePoint(t){let code;if(123===this.input.charCodeAt(this.state.pos)){const e=++this.state.pos;if(code=this.readHexChar(this.input.indexOf("}",this.state.pos)-this.state.pos,t),++this.state.pos,null===code)--this.state.invalidTemplateEscapePosition;else if(code>1114111){if(!t)return this.state.invalidTemplateEscapePosition=e-2,null;this.raise(e,"Code point out of bounds")}}else code=this.readHexChar(4,t);return code}readString(t){let e="",r=++this.state.pos;for(;;){this.state.pos>=this.length&&this.raise(this.state.start,"Unterminated string constant");const n=this.input.charCodeAt(this.state.pos);if(n===t)break;92===n?(e+=this.input.slice(r,this.state.pos),e+=this.readEscapedChar(!1),r=this.state.pos):8232===n||8233===n?(++this.state.pos,++this.state.curLine):Z(n)?this.raise(this.state.start,"Unterminated string constant"):++this.state.pos}e+=this.input.slice(r,this.state.pos++),this.finishToken(d.string,e)}readTmplToken(){let t="",e=this.state.pos,r=!1;for(;;){this.state.pos>=this.length&&this.raise(this.state.start,"Unterminated template");const n=this.input.charCodeAt(this.state.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.state.pos+1))return this.state.pos===this.state.start&&this.match(d.template)?36===n?(this.state.pos+=2,void this.finishToken(d.dollarBraceL)):(++this.state.pos,void this.finishToken(d.backQuote)):(t+=this.input.slice(e,this.state.pos),void this.finishToken(d.template,r?null:t));if(92===n){t+=this.input.slice(e,this.state.pos);const n=this.readEscapedChar(!0);null===n?r=!0:t+=n,e=this.state.pos}else if(Z(n)){switch(t+=this.input.slice(e,this.state.pos),++this.state.pos,n){case 13:10===this.input.charCodeAt(this.state.pos)&&++this.state.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}++this.state.curLine,this.state.lineStart=this.state.pos,e=this.state.pos}else++this.state.pos}}readEscapedChar(t){const e=!t,r=this.input.charCodeAt(++this.state.pos);switch(++this.state.pos,r){case 110:return"\n";case 114:return"\r";case 120:{const code=this.readHexChar(2,e);return null===code?null:String.fromCharCode(code)}case 117:{const code=this.readCodePoint(e);return null===code?null:String.fromCodePoint(code)}case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.state.pos)&&++this.state.pos;case 10:this.state.lineStart=this.state.pos,++this.state.curLine;case 8232:case 8233:return"";default:if(r>=48&&r<=55){const e=this.state.pos-1;let r=this.input.substr(this.state.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(r,8);n>255&&(r=r.slice(0,-1),n=parseInt(r,8)),this.state.pos+=r.length-1;const o=this.input.charCodeAt(this.state.pos);if("0"!==r||56===o||57===o){if(t)return this.state.invalidTemplateEscapePosition=e,null;this.state.strict?this.raise(e,"Octal literal in strict mode"):this.state.containsOctal||(this.state.containsOctal=!0,this.state.octalPosition=e)}return String.fromCharCode(n)}return String.fromCharCode(r)}}readHexChar(t,e){const r=this.state.pos,n=this.readInt(16,t);return null===n&&(e?this.raise(r,"Bad character escape sequence"):(this.state.pos=r-1,this.state.invalidTemplateEscapePosition=r-1)),n}readWord1(){let t="";this.state.containsEsc=!1;const e=this.state.pos;let r=this.state.pos;for(;this.state.pos<this.length;){const n=this.input.codePointAt(this.state.pos);if(bt(n))this.state.pos+=n<=65535?1:2;else if(this.state.isIterator&&64===n)++this.state.pos;else{if(92!==n)break;{this.state.containsEsc=!0,t+=this.input.slice(r,this.state.pos);const n=this.state.pos,o=this.state.pos===e?Tt:bt;117!==this.input.charCodeAt(++this.state.pos)&&this.raise(this.state.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.state.pos;const h=this.readCodePoint(!0);o(h,!0)||this.raise(n,"Invalid Unicode escape"),t+=String.fromCodePoint(h),r=this.state.pos}}}return t+this.input.slice(r,this.state.pos)}isIterator(t){return"@@iterator"===t||"@@asyncIterator"===t}readWord(){const t=this.readWord1(),e=h.get(t)||d.name;e.keyword&&this.state.containsEsc&&this.raise(this.state.pos,`Escape sequence in keyword ${t}`),!this.state.isIterator||this.isIterator(t)&&this.state.inType||this.raise(this.state.pos,`Invalid identifier ${t}`),this.finishToken(e,t)}braceIsBlock(t){const e=this.curContext();return e===it.functionExpression||e===it.functionStatement||(t!==d.colon||e!==it.braceStatement&&e!==it.braceExpression?t===d._return||t===d.name&&this.state.exprAllowed?Q.test(this.input.slice(this.state.lastTokEnd,this.state.start)):t===d._else||t===d.semi||t===d.eof||t===d.parenR||t===d.arrow||(t===d.braceL?e===it.braceStatement:t!==d._var&&t!==d._const&&t!==d.name&&(t===d.relational||!this.state.exprAllowed)):!e.isExpr)}updateContext(t){const e=this.state.type;let r;!e.keyword||t!==d.dot&&t!==d.questionDot?(r=e.updateContext)?r.call(this,t):this.state.exprAllowed=e.beforeExpr:this.state.exprAllowed=!1}}const ie=/^('|")((?:\\?.)*?)\1/;class re extends se{addExtra(t,e,r){if(!t)return;(t.extra=t.extra||{})[e]=r}isRelational(t){return this.match(d.relational)&&this.state.value===t}isLookaheadRelational(t){const e=this.lookahead();return e.type===d.relational&&e.value===t}expectRelational(t){this.isRelational(t)?this.next():this.unexpected(null,d.relational)}eatRelational(t){return!!this.isRelational(t)&&(this.next(),!0)}isContextual(t){return this.match(d.name)&&this.state.value===t&&!this.state.containsEsc}isLookaheadContextual(t){const e=this.lookahead();return e.type===d.name&&e.value===t}eatContextual(t){return this.isContextual(t)&&this.eat(d.name)}expectContextual(t,e){this.eatContextual(t)||this.unexpected(null,e)}canInsertSemicolon(){return this.match(d.eof)||this.match(d.braceR)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return Q.test(this.input.slice(this.state.lastTokEnd,this.state.start))}isLineTerminator(){return this.eat(d.semi)||this.canInsertSemicolon()}semicolon(){this.isLineTerminator()||this.unexpected(null,d.semi)}expect(t,e){this.eat(t)||this.unexpected(e,t)}assertNoSpace(t="Unexpected space."){this.state.start>this.state.lastTokEnd&&this.raise(this.state.lastTokEnd,t)}unexpected(t,e="Unexpected token"){throw"string"!=typeof e&&(e=`Unexpected token, expected "${e.label}"`),this.raise(null!=t?t:this.state.start,e)}expectPlugin(t,e){if(!this.hasPlugin(t))throw this.raise(null!=e?e:this.state.start,`This experimental syntax requires enabling the parser plugin: '${t}'`,{missingPluginNames:[t]});return!0}expectOnePlugin(t,e){if(!t.some(t=>this.hasPlugin(t)))throw this.raise(null!=e?e:this.state.start,`This experimental syntax requires enabling one of the following parser plugin(s): '${t.join(", ")}'`,{missingPluginNames:t})}checkYieldAwaitInDefaultParams(){this.state.yieldPos&&(!this.state.awaitPos||this.state.yieldPos<this.state.awaitPos)&&this.raise(this.state.yieldPos,"Yield cannot be used as name inside a generator function"),this.state.awaitPos&&this.raise(this.state.awaitPos,"Await cannot be used as name inside an async function")}strictDirective(t){for(;;){tt.lastIndex=t,t+=tt.exec(this.input)[0].length;const e=ie.exec(this.input.slice(t));if(!e)break;if("use strict"===e[2])return!0;t+=e[0].length,tt.lastIndex=t,t+=tt.exec(this.input)[0].length,";"===this.input[t]&&t++}return!1}}class ae{constructor(t,e,r){this.type="",this.start=e,this.end=0,this.loc=new Xt(r),t&&t.options.ranges&&(this.range=[e,0]),t&&t.filename&&(this.loc.filename=t.filename)}__clone(){const t=new ae,e=Object.keys(this);for(let i=0,r=e.length;i<r;i++){const r=e[i];"leadingComments"!==r&&"trailingComments"!==r&&"innerComments"!==r&&(t[r]=this[r])}return t}}class ne extends re{startNode(){return new ae(this,this.state.start,this.state.startLoc)}startNodeAt(t,e){return new ae(this,t,e)}startNodeAtNode(t){return this.startNodeAt(t.start,t.loc.start)}finishNode(t,e){return this.finishNodeAt(t,e,this.state.lastTokEnd,this.state.lastTokEndLoc)}finishNodeAt(t,e,r,n){return t.type=e,t.end=r,t.loc.end=n,this.options.ranges&&(t.range[1]=r),this.processComment(t),t}resetStartLocation(t,e,r){t.start=e,t.loc.start=r,this.options.ranges&&(t.range[0]=e)}resetEndLocation(t,e=this.state.lastTokEnd,r=this.state.lastTokEndLoc){t.end=e,t.loc.end=r,this.options.ranges&&(t.range[1]=e)}resetStartLocationFromNode(t,e){this.resetStartLocation(t,e.start,e.loc.start)}}class oe extends ne{toAssignable(t,e,r){if(t)switch(t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":break;case"ObjectExpression":t.type="ObjectPattern";for(let i=0,r=t.properties.length,n=r-1;i<r;i++){const r=t.properties[i],o=i===n;this.toAssignableObjectExpressionProp(r,e,o)}break;case"ObjectProperty":this.toAssignable(t.value,e,r);break;case"SpreadElement":{this.checkToRestConversion(t),t.type="RestElement";const n=t.argument;this.toAssignable(n,e,r);break}case"ArrayExpression":t.type="ArrayPattern",this.toAssignableList(t.elements,e,r);break;case"AssignmentExpression":"="===t.operator?(t.type="AssignmentPattern",delete t.operator):this.raise(t.left.end,"Only '=' operator can be used for specifying default value.");break;case"ParenthesizedExpression":t.expression=this.toAssignable(t.expression,e,r);break;case"MemberExpression":if(!e)break;default:{const e="Invalid left-hand side"+(r?" in "+r:"expression");this.raise(t.start,e)}}return t}toAssignableObjectExpressionProp(t,e,r){if("ObjectMethod"===t.type){const e="get"===t.kind||"set"===t.kind?"Object pattern can't contain getter or setter":"Object pattern can't contain methods";this.raise(t.key.start,e)}else"SpreadElement"!==t.type||r?this.toAssignable(t,e,"object destructuring pattern"):this.raiseRestNotLast(t.start)}toAssignableList(t,e,r){let n=t.length;if(n){const o=t[n-1];if(o&&"RestElement"===o.type)--n;else if(o&&"SpreadElement"===o.type){o.type="RestElement";const t=o.argument;this.toAssignable(t,e,r),"Identifier"!==t.type&&"MemberExpression"!==t.type&&"ArrayPattern"!==t.type&&"ObjectPattern"!==t.type&&this.unexpected(t.start),--n}}for(let i=0;i<n;i++){const n=t[i];n&&(this.toAssignable(n,e,r),"RestElement"===n.type&&this.raiseRestNotLast(n.start))}return t}toReferencedList(t,e){return t}toReferencedListDeep(t,e){this.toReferencedList(t,e);for(let e=0;e<t.length;e++){const r=t[e];r&&"ArrayExpression"===r.type&&this.toReferencedListDeep(r.elements)}return t}parseSpread(t,e){const r=this.startNode();return this.next(),r.argument=this.parseMaybeAssign(!1,t,void 0,e),-1===this.state.commaAfterSpreadAt&&this.match(d.comma)&&(this.state.commaAfterSpreadAt=this.state.start),this.finishNode(r,"SpreadElement")}parseRestBinding(){const t=this.startNode();return this.next(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")}parseBindingAtom(){switch(this.state.type){case d.bracketL:{const t=this.startNode();return this.next(),t.elements=this.parseBindingList(d.bracketR,!0),this.finishNode(t,"ArrayPattern")}case d.braceL:return this.parseObj(!0)}return this.parseIdentifier()}parseBindingList(t,e,r){const n=[];let o=!0;for(;!this.eat(t);)if(o?o=!1:this.expect(d.comma),e&&this.match(d.comma))n.push(null);else{if(this.eat(t))break;if(this.match(d.ellipsis)){n.push(this.parseAssignableListItemTypes(this.parseRestBinding())),this.checkCommaAfterRest(),this.expect(t);break}{const t=[];for(this.match(d.at)&&this.hasPlugin("decorators")&&this.raise(this.state.start,"Stage 2 decorators cannot be used to decorate parameters");this.match(d.at);)t.push(this.parseDecorator());n.push(this.parseAssignableListItem(r,t))}}return n}parseAssignableListItem(t,e){const r=this.parseMaybeDefault();this.parseAssignableListItemTypes(r);const n=this.parseMaybeDefault(r.start,r.loc.start,r);return e.length&&(r.decorators=e),n}parseAssignableListItemTypes(param){return param}parseMaybeDefault(t,e,r){if(e=e||this.state.startLoc,t=t||this.state.start,r=r||this.parseBindingAtom(),!this.eat(d.eq))return r;const n=this.startNodeAt(t,e);return n.left=r,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")}checkLVal(t,e=J,r,n){switch(t.type){case"Identifier":if(this.state.strict&&ct(t.name,this.inModule)&&this.raise(t.start,`${e===J?"Assigning to":"Binding"} '${t.name}' in strict mode`),r){const e=`_${t.name}`;r[e]?this.raise(t.start,"Argument name clash"):r[e]=!0}e===j&&"let"===t.name&&this.raise(t.start,"'let' is not allowed to be used as a name in 'let' or 'const' declarations."),e&J||this.scope.declareName(t.name,e,t.start);break;case"MemberExpression":e!==J&&this.raise(t.start,"Binding member expression");break;case"ObjectPattern":for(let n=0,o=t.properties;n<o.length;n++){let t=o[n];"ObjectProperty"===t.type&&(t=t.value),this.checkLVal(t,e,r,"object destructuring pattern")}break;case"ArrayPattern":for(let n=0,o=t.elements;n<o.length;n++){const t=o[n];t&&this.checkLVal(t,e,r,"array destructuring pattern")}break;case"AssignmentPattern":this.checkLVal(t.left,e,r,"assignment pattern");break;case"RestElement":this.checkLVal(t.argument,e,r,"rest element");break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,r,"parenthesized expression");break;default:{const r=(e===J?"Invalid":"Binding invalid")+" left-hand side"+(n?" in "+n:"expression");this.raise(t.start,r)}}}checkToRestConversion(t){"Identifier"!==t.argument.type&&"MemberExpression"!==t.argument.type&&this.raise(t.argument.start,"Invalid rest operator's argument")}checkCommaAfterRest(){this.match(d.comma)&&this.raiseRestNotLast(this.state.start)}checkCommaAfterRestFromSpread(){this.state.commaAfterSpreadAt>-1&&this.raiseRestNotLast(this.state.commaAfterSpreadAt)}raiseRestNotLast(t){this.raise(t,"Rest element must be last element")}}const he=t=>"ParenthesizedExpression"===t.type?he(t.expression):t;class pe extends oe{checkPropClash(t,e){if("SpreadElement"===t.type||t.computed||t.kind||t.shorthand)return;const r=t.key;"__proto__"===("Identifier"===r.type?r.name:String(r.value))&&(e.proto&&this.raise(r.start,"Redefinition of __proto__ property"),e.proto=!0)}getExpression(){this.scope.enter(f),this.nextToken();const t=this.parseExpression();return this.match(d.eof)||this.unexpected(),t.comments=this.state.comments,t}parseExpression(t,e){const r=this.state.start,n=this.state.startLoc,o=this.parseMaybeAssign(t,e);if(this.match(d.comma)){const h=this.startNodeAt(r,n);for(h.expressions=[o];this.eat(d.comma);)h.expressions.push(this.parseMaybeAssign(t,e));return this.toReferencedList(h.expressions),this.finishNode(h,"SequenceExpression")}return o}parseMaybeAssign(t,e,r,n){const o=this.state.start,h=this.state.startLoc;if(this.isContextual("yield")){if(this.scope.inGenerator){let e=this.parseYield(t);return r&&(e=r.call(this,e,o,h)),e}this.state.exprAllowed=!1}const c=this.state.commaAfterSpreadAt;let l;this.state.commaAfterSpreadAt=-1,e?l=!1:(e={start:0},l=!0),(this.match(d.parenL)||this.match(d.name))&&(this.state.potentialArrowAt=this.state.start);let m=this.parseMaybeConditional(t,e,n);if(r&&(m=r.call(this,m,o,h)),this.state.type.isAssign){const r=this.startNodeAt(o,h),n=this.state.value;r.operator=n,"??="===n&&(this.expectPlugin("nullishCoalescingOperator"),this.expectPlugin("logicalAssignment")),"||="!==n&&"&&="!==n||this.expectPlugin("logicalAssignment"),r.left=this.match(d.eq)?this.toAssignable(m,void 0,"assignment expression"):m,e.start=0,this.checkLVal(m,void 0,void 0,"assignment expression");const l=he(m);let f;return"ObjectPattern"===l.type?f="`({a}) = 0` use `({a} = 0)`":"ArrayPattern"===l.type&&(f="`([a]) = 0` use `([a] = 0)`"),f&&(m.extra&&m.extra.parenthesized||"ParenthesizedExpression"===m.type)&&this.raise(l.start,`You're trying to assign to a parenthesized expression, eg. instead of ${f}`),f&&this.checkCommaAfterRestFromSpread(),this.state.commaAfterSpreadAt=c,this.next(),r.right=this.parseMaybeAssign(t),this.finishNode(r,"AssignmentExpression")}return l&&e.start&&this.unexpected(e.start),this.state.commaAfterSpreadAt=c,m}parseMaybeConditional(t,e,r){const n=this.state.start,o=this.state.startLoc,h=this.state.potentialArrowAt,c=this.parseExprOps(t,e);return"ArrowFunctionExpression"===c.type&&c.start===h?c:e&&e.start?c:this.parseConditional(c,t,n,o,r)}parseConditional(t,e,r,n,o){if(this.eat(d.question)){const o=this.startNodeAt(r,n);return o.test=t,o.consequent=this.parseMaybeAssign(),this.expect(d.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return t}parseExprOps(t,e){const r=this.state.start,n=this.state.startLoc,o=this.state.potentialArrowAt,h=this.parseMaybeUnary(e);return"ArrowFunctionExpression"===h.type&&h.start===o?h:e&&e.start?h:this.parseExprOp(h,r,n,-1,t)}parseExprOp(t,e,r,n,o){const h=this.state.type.binop;if(!(null==h||o&&this.match(d._in))&&h>n){const c=this.state.value;if("|>"===c&&this.state.inFSharpPipelineDirectBody)return t;const l=this.startNodeAt(e,r);l.left=t,l.operator=c,"**"!==c||"UnaryExpression"!==t.type||!this.options.createParenthesizedExpressions&&t.extra&&t.extra.parenthesized||this.raise(t.argument.start,"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.");const m=this.state.type;if(m===d.pipeline?(this.expectPlugin("pipelineOperator"),this.state.inPipeline=!0,this.checkPipelineAtInfixOperator(t,e)):m===d.nullishCoalescing&&this.expectPlugin("nullishCoalescingOperator"),this.next(),m===d.pipeline&&"minimal"===this.getPluginOption("pipelineOperator","proposal")&&this.match(d.name)&&"await"===this.state.value&&this.scope.inAsync)throw this.raise(this.state.start,'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal');return l.right=this.parseExprOpRightExpr(m,h,o),this.finishNode(l,m===d.logicalOR||m===d.logicalAND||m===d.nullishCoalescing?"LogicalExpression":"BinaryExpression"),this.parseExprOp(l,e,r,n,o)}return t}parseExprOpRightExpr(t,e,r){const n=this.state.start,o=this.state.startLoc;switch(t){case d.pipeline:switch(this.getPluginOption("pipelineOperator","proposal")){case"smart":return this.withTopicPermittingContext(()=>this.parseSmartPipelineBody(this.parseExprOpBaseRightExpr(t,e,r),n,o));case"fsharp":return this.withSoloAwaitPermittingContext(()=>this.parseFSharpPipelineBody(e,r))}default:return this.parseExprOpBaseRightExpr(t,e,r)}}parseExprOpBaseRightExpr(t,e,r){const n=this.state.start,o=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnary(),n,o,t.rightAssociative?e-1:e,r)}parseMaybeUnary(t){if(this.isContextual("await")&&(this.scope.inAsync||!this.scope.inFunction&&this.options.allowAwaitOutsideFunction))return this.parseAwait();if(this.state.type.prefix){const e=this.startNode(),r=this.match(d.incDec);if(e.operator=this.state.value,e.prefix=!0,"throw"===e.operator&&this.expectPlugin("throwExpressions"),this.next(),e.argument=this.parseMaybeUnary(),t&&t.start&&this.unexpected(t.start),r)this.checkLVal(e.argument,void 0,void 0,"prefix operation");else if(this.state.strict&&"delete"===e.operator){const t=e.argument;"Identifier"===t.type?this.raise(e.start,"Deleting local variable in strict mode"):"MemberExpression"===t.type&&"PrivateName"===t.property.type&&this.raise(e.start,"Deleting a private field is not allowed")}return this.finishNode(e,r?"UpdateExpression":"UnaryExpression")}const e=this.state.start,r=this.state.startLoc;let n=this.parseExprSubscripts(t);if(t&&t.start)return n;for(;this.state.type.postfix&&!this.canInsertSemicolon();){const t=this.startNodeAt(e,r);t.operator=this.state.value,t.prefix=!1,t.argument=n,this.checkLVal(n,void 0,void 0,"postfix operation"),this.next(),n=this.finishNode(t,"UpdateExpression")}return n}parseExprSubscripts(t){const e=this.state.start,r=this.state.startLoc,n=this.state.potentialArrowAt,o=this.parseExprAtom(t);return"ArrowFunctionExpression"===o.type&&o.start===n?o:t&&t.start?o:this.parseSubscripts(o,e,r)}parseSubscripts(base,t,e,r){const n=this.atPossibleAsync(base),o={optionalChainMember:!1,stop:!1};do{base=this.parseSubscript(base,t,e,r,o,n)}while(!o.stop);return base}parseSubscript(base,t,e,r,n,o){if(!r&&this.eat(d.doubleColon)){const o=this.startNodeAt(t,e);return o.object=base,o.callee=this.parseNoCallExpr(),n.stop=!0,this.parseSubscripts(this.finishNode(o,"BindExpression"),t,e,r)}if(this.match(d.questionDot)){if(this.expectPlugin("optionalChaining"),n.optionalChainMember=!0,r&&this.lookahead().type===d.parenL)return n.stop=!0,base;this.next();const o=this.startNodeAt(t,e);return this.eat(d.bracketL)?(o.object=base,o.property=this.parseExpression(),o.computed=!0,o.optional=!0,this.expect(d.bracketR),this.finishNode(o,"OptionalMemberExpression")):this.eat(d.parenL)?(o.callee=base,o.arguments=this.parseCallExpressionArguments(d.parenR,!1),o.optional=!0,this.finishNode(o,"OptionalCallExpression")):(o.object=base,o.property=this.parseIdentifier(!0),o.computed=!1,o.optional=!0,this.finishNode(o,"OptionalMemberExpression"))}if(this.eat(d.dot)){const r=this.startNodeAt(t,e);return r.object=base,r.property=this.parseMaybePrivateName(),r.computed=!1,n.optionalChainMember?(r.optional=!1,this.finishNode(r,"OptionalMemberExpression")):this.finishNode(r,"MemberExpression")}if(this.eat(d.bracketL)){const r=this.startNodeAt(t,e);return r.object=base,r.property=this.parseExpression(),r.computed=!0,this.expect(d.bracketR),n.optionalChainMember?(r.optional=!1,this.finishNode(r,"OptionalMemberExpression")):this.finishNode(r,"MemberExpression")}if(!r&&this.match(d.parenL)){const r=this.state.maybeInArrowParameters,h=this.state.yieldPos,c=this.state.awaitPos;this.state.maybeInArrowParameters=!0,this.state.yieldPos=0,this.state.awaitPos=0,this.next();let l=this.startNodeAt(t,e);l.callee=base;const m=this.state.commaAfterSpreadAt;return this.state.commaAfterSpreadAt=-1,l.arguments=this.parseCallExpressionArguments(d.parenR,o,"Import"===base.type,"Super"!==base.type),n.optionalChainMember?this.finishOptionalCallExpression(l):this.finishCallExpression(l),o&&this.shouldParseAsyncArrow()?(n.stop=!0,this.checkCommaAfterRestFromSpread(),l=this.parseAsyncArrowFromCallExpression(this.startNodeAt(t,e),l),this.checkYieldAwaitInDefaultParams(),this.state.yieldPos=h,this.state.awaitPos=c):(this.toReferencedListDeep(l.arguments),this.state.yieldPos=h||this.state.yieldPos,this.state.awaitPos=c||this.state.awaitPos),this.state.maybeInArrowParameters=r,this.state.commaAfterSpreadAt=m,l}return this.match(d.backQuote)?this.parseTaggedTemplateExpression(t,e,base,n):(n.stop=!0,base)}parseTaggedTemplateExpression(t,e,base,r,n){const o=this.startNodeAt(t,e);return o.tag=base,o.quasi=this.parseTemplate(!0),n&&(o.typeParameters=n),r.optionalChainMember&&this.raise(t,"Tagged Template Literals are not allowed in optionalChain"),this.finishNode(o,"TaggedTemplateExpression")}atPossibleAsync(base){return"Identifier"===base.type&&"async"===base.name&&this.state.lastTokEnd===base.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(base.start,base.end)}finishCallExpression(t){if("Import"===t.callee.type){1!==t.arguments.length&&this.raise(t.start,"import() requires exactly one argument");const e=t.arguments[0];e&&"SpreadElement"===e.type&&this.raise(e.start,"... is not allowed in import()")}return this.finishNode(t,"CallExpression")}finishOptionalCallExpression(t){if("Import"===t.callee.type){1!==t.arguments.length&&this.raise(t.start,"import() requires exactly one argument");const e=t.arguments[0];e&&"SpreadElement"===e.type&&this.raise(e.start,"... is not allowed in import()")}return this.finishNode(t,"OptionalCallExpression")}parseCallExpressionArguments(t,e,r,n){const o=[];let h,c=!0;const l=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(t);){if(c)c=!1;else if(this.expect(d.comma),this.eat(t)){r&&this.raise(this.state.lastTokStart,"Trailing comma is disallowed inside import(...) arguments");break}this.match(d.parenL)&&!h&&(h=this.state.start),o.push(this.parseExprListItem(!1,e?{start:0}:void 0,e?{start:0}:void 0,n))}return e&&h&&this.shouldParseAsyncArrow()&&this.unexpected(),this.state.inFSharpPipelineDirectBody=l,o}shouldParseAsyncArrow(){return this.match(d.arrow)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(t,e){return this.expect(d.arrow),this.parseArrowExpression(t,e.arguments,!0),t}parseNoCallExpr(){const t=this.state.start,e=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),t,e,!0)}parseExprAtom(t){this.state.type===d.slash&&this.readRegexp();const e=this.state.potentialArrowAt===this.state.start;let r;switch(this.state.type){case d._super:return this.scope.allowSuper||this.options.allowSuperOutsideMethod||this.raise(this.state.start,"super is only allowed in object methods and classes"),r=this.startNode(),this.next(),!this.match(d.parenL)||this.scope.allowDirectSuper||this.options.allowSuperOutsideMethod||this.raise(r.start,"super() is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?"),this.match(d.parenL)||this.match(d.bracketL)||this.match(d.dot)||this.unexpected(),this.finishNode(r,"Super");case d._import:return r=this.startNode(),this.next(),this.match(d.dot)?this.parseImportMetaProperty(r):(this.expectPlugin("dynamicImport",r.start),this.match(d.parenL)||this.unexpected(null,d.parenL),this.finishNode(r,"Import"));case d._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case d.name:{r=this.startNode();const t=this.state.containsEsc,n=this.parseIdentifier();if(!t&&"async"===n.name&&this.match(d._function)&&!this.canInsertSemicolon())return this.next(),this.parseFunction(r,void 0,!0);if(e&&!t&&"async"===n.name&&this.match(d.name)&&!this.canInsertSemicolon()){const t=[this.parseIdentifier()];return this.expect(d.arrow),this.parseArrowExpression(r,t,!0),r}return e&&this.match(d.arrow)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(r,[n],!1),r):n}case d._do:{this.expectPlugin("doExpressions");const t=this.startNode();this.next();const e=this.state.labels;return this.state.labels=[],t.body=this.parseBlock(),this.state.labels=e,this.finishNode(t,"DoExpression")}case d.regexp:{const t=this.state.value;return(r=this.parseLiteral(t.value,"RegExpLiteral")).pattern=t.pattern,r.flags=t.flags,r}case d.num:return this.parseLiteral(this.state.value,"NumericLiteral");case d.bigint:return this.parseLiteral(this.state.value,"BigIntLiteral");case d.string:return this.parseLiteral(this.state.value,"StringLiteral");case d._null:return r=this.startNode(),this.next(),this.finishNode(r,"NullLiteral");case d._true:case d._false:return this.parseBooleanLiteral();case d.parenL:return this.parseParenAndDistinguishExpression(e);case d.bracketL:{const e=this.state.inFSharpPipelineDirectBody;return this.state.inFSharpPipelineDirectBody=!1,r=this.startNode(),this.next(),r.elements=this.parseExprList(d.bracketR,!0,t),this.state.maybeInArrowParameters||this.toReferencedList(r.elements),this.state.inFSharpPipelineDirectBody=e,this.finishNode(r,"ArrayExpression")}case d.braceL:{const e=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;const r=this.parseObj(!1,t);return this.state.inFSharpPipelineDirectBody=e,r}case d._function:return this.parseFunctionExpression();case d.at:this.parseDecorators();case d._class:return r=this.startNode(),this.takeDecorators(r),this.parseClass(r,!1);case d._new:return this.parseNew();case d.backQuote:return this.parseTemplate(!1);case d.doubleColon:{r=this.startNode(),this.next(),r.object=null;const t=r.callee=this.parseNoCallExpr();if("MemberExpression"===t.type)return this.finishNode(r,"BindExpression");throw this.raise(t.start,"Binding should be performed on object property.")}case d.hash:if(this.state.inPipeline){if(r=this.startNode(),"smart"!==this.getPluginOption("pipelineOperator","proposal")&&this.raise(r.start,"Primary Topic Reference found but pipelineOperator not passed 'smart' for 'proposal' option."),this.next(),this.primaryTopicReferenceIsAllowedInCurrentTopicContext())return this.registerTopicReference(),this.finishNode(r,"PipelinePrimaryTopicReference");throw this.raise(r.start,"Topic reference was used in a lexical context without topic binding")}default:throw this.unexpected()}}parseBooleanLiteral(){const t=this.startNode();return t.value=this.match(d._true),this.next(),this.finishNode(t,"BooleanLiteral")}parseMaybePrivateName(){if(this.match(d.hash)){this.expectOnePlugin(["classPrivateProperties","classPrivateMethods"]);const t=this.startNode();return this.next(),this.assertNoSpace("Unexpected space between # and identifier"),t.id=this.parseIdentifier(!0),this.finishNode(t,"PrivateName")}return this.parseIdentifier(!0)}parseFunctionExpression(){const t=this.startNode();let meta=this.startNode();return this.next(),meta=this.createIdentifier(meta,"function"),this.scope.inGenerator&&this.eat(d.dot)?this.parseMetaProperty(t,meta,"sent"):this.parseFunction(t)}parseMetaProperty(t,meta,e){t.meta=meta,"function"===meta.name&&"sent"===e&&(this.isContextual(e)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected());const r=this.state.containsEsc;return t.property=this.parseIdentifier(!0),(t.property.name!==e||r)&&this.raise(t.property.start,`The only valid meta property for ${meta.name} is ${meta.name}.${e}`),this.finishNode(t,"MetaProperty")}parseImportMetaProperty(t){const e=this.createIdentifier(this.startNodeAtNode(t),"import");return this.expect(d.dot),this.isContextual("meta")?this.expectPlugin("importMeta"):this.hasPlugin("importMeta")||this.raise(e.start,"Dynamic imports require a parameter: import('a.js')"),this.inModule||this.raise(e.start,"import.meta may appear only with 'sourceType: \"module\"'",{code:"BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED"}),this.sawUnambiguousESM=!0,this.parseMetaProperty(t,e,"meta")}parseLiteral(t,e,r,n){r=r||this.state.start,n=n||this.state.startLoc;const o=this.startNodeAt(r,n);return this.addExtra(o,"rawValue",t),this.addExtra(o,"raw",this.input.slice(r,this.state.end)),o.value=t,this.next(),this.finishNode(o,e)}parseParenAndDistinguishExpression(t){const e=this.state.start,r=this.state.startLoc;let n;this.expect(d.parenL);const o=this.state.maybeInArrowParameters,h=this.state.yieldPos,c=this.state.awaitPos,l=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.yieldPos=0,this.state.awaitPos=0,this.state.inFSharpPipelineDirectBody=!1;const m=this.state.start,f=this.state.startLoc,y=[],x={start:0},P={start:0};let T,w,A=!0;for(;!this.match(d.parenR);){if(A)A=!1;else if(this.expect(d.comma,P.start||null),this.match(d.parenR)){w=this.state.start;break}if(this.match(d.ellipsis)){const t=this.state.start,e=this.state.startLoc;T=this.state.start,y.push(this.parseParenItem(this.parseRestBinding(),t,e)),this.checkCommaAfterRest();break}y.push(this.parseMaybeAssign(!1,x,this.parseParenItem,P))}const E=this.state.start,C=this.state.startLoc;this.expect(d.parenR),this.state.maybeInArrowParameters=o,this.state.inFSharpPipelineDirectBody=l;let k=this.startNodeAt(e,r);if(t&&this.shouldParseArrow()&&(k=this.parseArrow(k))){this.checkYieldAwaitInDefaultParams(),this.state.yieldPos=h,this.state.awaitPos=c;for(let t=0;t<y.length;t++){const param=y[t];param.extra&&param.extra.parenthesized&&this.unexpected(param.extra.parenStart)}return this.parseArrowExpression(k,y,!1),k}if(this.state.yieldPos=h||this.state.yieldPos,this.state.awaitPos=c||this.state.awaitPos,y.length||this.unexpected(this.state.lastTokStart),w&&this.unexpected(w),T&&this.unexpected(T),x.start&&this.unexpected(x.start),P.start&&this.unexpected(P.start),this.toReferencedListDeep(y,!0),y.length>1?((n=this.startNodeAt(m,f)).expressions=y,this.finishNodeAt(n,"SequenceExpression",E,C)):n=y[0],!this.options.createParenthesizedExpressions)return this.addExtra(n,"parenthesized",!0),this.addExtra(n,"parenStart",e),n;const N=this.startNodeAt(e,r);return N.expression=n,this.finishNode(N,"ParenthesizedExpression"),N}shouldParseArrow(){return!this.canInsertSemicolon()}parseArrow(t){if(this.eat(d.arrow))return t}parseParenItem(t,e,r){return t}parseNew(){const t=this.startNode(),meta=this.parseIdentifier(!0);if(this.eat(d.dot)){const e=this.parseMetaProperty(t,meta,"target");if(!this.scope.inNonArrowFunction&&!this.state.inClassProperty){let t="new.target can only be used in functions";this.hasPlugin("classProperties")&&(t+=" or class properties"),this.raise(e.start,t)}return e}return t.callee=this.parseNoCallExpr(),"Import"===t.callee.type?this.raise(t.callee.start,"Cannot use new with import(...)"):"OptionalMemberExpression"===t.callee.type||"OptionalCallExpression"===t.callee.type?this.raise(this.state.lastTokEnd,"constructors in/after an Optional Chain are not allowed"):this.eat(d.questionDot)&&this.raise(this.state.start,"constructors in/after an Optional Chain are not allowed"),this.parseNewArguments(t),this.finishNode(t,"NewExpression")}parseNewArguments(t){if(this.eat(d.parenL)){const e=this.parseExprList(d.parenR);this.toReferencedList(e),t.arguments=e}else t.arguments=[]}parseTemplateElement(t){const e=this.startNode();return null===this.state.value&&(t?this.state.invalidTemplateEscapePosition=null:this.raise(this.state.invalidTemplateEscapePosition||0,"Invalid escape sequence in template")),e.value={raw:this.input.slice(this.state.start,this.state.end).replace(/\r\n?/g,"\n"),cooked:this.state.value},this.next(),e.tail=this.match(d.backQuote),this.finishNode(e,"TemplateElement")}parseTemplate(t){const e=this.startNode();this.next(),e.expressions=[];let r=this.parseTemplateElement(t);for(e.quasis=[r];!r.tail;)this.expect(d.dollarBraceL),e.expressions.push(this.parseExpression()),this.expect(d.braceR),e.quasis.push(r=this.parseTemplateElement(t));return this.next(),this.finishNode(e,"TemplateLiteral")}parseObj(t,e){const r=Object.create(null);let n=!0;const o=this.startNode();for(o.properties=[],this.next();!this.eat(d.braceR);){if(n)n=!1;else if(this.expect(d.comma),this.eat(d.braceR))break;const h=this.parseObjectMember(t,e);t||this.checkPropClash(h,r),h.shorthand&&this.addExtra(h,"shorthand",!0),o.properties.push(h)}return this.finishNode(o,t?"ObjectPattern":"ObjectExpression")}isAsyncProp(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.match(d.name)||this.match(d.num)||this.match(d.string)||this.match(d.bracketL)||this.state.type.keyword||this.match(d.star))&&!this.hasPrecedingLineBreak()}parseObjectMember(t,e){let r=[];if(this.match(d.at))if(this.hasPlugin("decorators"))this.raise(this.state.start,"Stage 2 decorators disallow object literal property decorators");else for(;this.match(d.at);)r.push(this.parseDecorator());const n=this.startNode();let o,h,c=!1,l=!1;if(this.match(d.ellipsis))return r.length&&this.unexpected(),t?(this.next(),n.argument=this.parseIdentifier(),this.checkCommaAfterRest(),this.finishNode(n,"RestElement")):this.parseSpread();r.length&&(n.decorators=r,r=[]),n.method=!1,(t||e)&&(o=this.state.start,h=this.state.startLoc),t||(c=this.eat(d.star));const m=this.state.containsEsc;return this.parsePropertyName(n),t||m||c||!this.isAsyncProp(n)?l=!1:(l=!0,c=this.eat(d.star),this.parsePropertyName(n)),this.parseObjPropValue(n,o,h,c,l,t,e,m),n}isGetterOrSetterMethod(t,e){return!e&&!t.computed&&"Identifier"===t.key.type&&("get"===t.key.name||"set"===t.key.name)&&(this.match(d.string)||this.match(d.num)||this.match(d.bracketL)||this.match(d.name)||!!this.state.type.keyword)}getGetterSetterExpectedParamCount(t){return"get"===t.kind?0:1}checkGetterSetterParams(t){const e=this.getGetterSetterExpectedParamCount(t),r=t.start;t.params.length!==e&&("get"===t.kind?this.raise(r,"getter must not have any formal parameters"):this.raise(r,"setter must have exactly one formal parameter")),"set"===t.kind&&"RestElement"===t.params[t.params.length-1].type&&this.raise(r,"setter function argument must not be a rest parameter")}parseObjectMethod(t,e,r,n,o){return r||e||this.match(d.parenL)?(n&&this.unexpected(),t.kind="method",t.method=!0,this.parseMethod(t,e,r,!1,!1,"ObjectMethod")):!o&&this.isGetterOrSetterMethod(t,n)?((e||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),this.parseMethod(t,!1,!1,!1,!1,"ObjectMethod"),this.checkGetterSetterParams(t),t):void 0}parseObjectProperty(t,e,r,n,o){return t.shorthand=!1,this.eat(d.colon)?(t.value=n?this.parseMaybeDefault(this.state.start,this.state.startLoc):this.parseMaybeAssign(!1,o),this.finishNode(t,"ObjectProperty")):t.computed||"Identifier"!==t.key.type?void 0:(this.checkReservedWord(t.key.name,t.key.start,!0,!0),n?t.value=this.parseMaybeDefault(e,r,t.key.__clone()):this.match(d.eq)&&o?(o.start||(o.start=this.state.start),t.value=this.parseMaybeDefault(e,r,t.key.__clone())):t.value=t.key.__clone(),t.shorthand=!0,this.finishNode(t,"ObjectProperty"))}parseObjPropValue(t,e,r,n,o,h,c,l){const d=this.parseObjectMethod(t,n,o,h,l)||this.parseObjectProperty(t,e,r,h,c);return d||this.unexpected(),d}parsePropertyName(t){if(this.eat(d.bracketL))t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(d.bracketR);else{const e=this.state.inPropertyName;this.state.inPropertyName=!0,t.key=this.match(d.num)||this.match(d.string)?this.parseExprAtom():this.parseMaybePrivateName(),"PrivateName"!==t.key.type&&(t.computed=!1),this.state.inPropertyName=e}return t.key}initFunction(t,e){t.id=null,t.generator=!1,t.async=!!e}parseMethod(t,e,r,n,o,h,c=!1){const l=this.state.yieldPos,d=this.state.awaitPos;this.state.yieldPos=0,this.state.awaitPos=0,this.initFunction(t,r),t.generator=!!e;const m=n;return this.scope.enter(N(r,t.generator)|A|(c?C:0)|(o?E:0)),this.parseFunctionParams(t,m),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBodyAndFinish(t,h,!0),this.scope.exit(),this.state.yieldPos=l,this.state.awaitPos=d,t}parseArrowExpression(t,e,r){this.scope.enter(N(r,!1)|T),this.initFunction(t,r);const n=this.state.maybeInArrowParameters,o=this.state.yieldPos,h=this.state.awaitPos;return this.state.maybeInArrowParameters=!1,this.state.yieldPos=0,this.state.awaitPos=0,e&&this.setArrowFunctionParameters(t,e),this.parseFunctionBody(t,!0),this.scope.exit(),this.state.maybeInArrowParameters=n,this.state.yieldPos=o,this.state.awaitPos=h,this.finishNode(t,"ArrowFunctionExpression")}setArrowFunctionParameters(t,e){t.params=this.toAssignableList(e,!0,"arrow function parameters")}isStrictBody(t){if("BlockStatement"===t.body.type&&t.body.directives.length)for(let e=0,r=t.body.directives;e<r.length;e++){if("use strict"===r[e].value.value)return!0}return!1}parseFunctionBodyAndFinish(t,e,r=!1){this.parseFunctionBody(t,!1,r),this.finishNode(t,e)}parseFunctionBody(t,e,r=!1){const n=e&&!this.match(d.braceL),o=this.state.strict;let h=!1;const c=this.state.inParameters;if(this.state.inParameters=!1,n)t.body=this.parseMaybeAssign(),this.checkParams(t,!1,e);else{const n=!this.isSimpleParamList(t.params);if((!o||n)&&(h=this.strictDirective(this.state.end))&&n){const e="method"!==t.kind&&"constructor"!==t.kind||!t.key?t.start:t.key.end;this.raise(e,"Illegal 'use strict' directive in function with non-simple parameter list")}const c=this.state.labels;this.state.labels=[],h&&(this.state.strict=!0),this.checkParams(t,!(o||h||e||r||n),e),t.body=this.parseBlock(!0,!1),this.state.labels=c}this.state.inParameters=c,this.state.strict&&t.id&&this.checkLVal(t.id,$,void 0,"function name"),this.state.strict=o}isSimpleParamList(t){for(let i=0,e=t.length;i<e;i++)if("Identifier"!==t[i].type)return!1;return!0}checkParams(t,e,r){const n=Object.create(null);for(let i=0;i<t.params.length;i++)this.checkLVal(t.params[i],B,e?null:n,"function paramter list")}parseExprList(t,e,r){const n=[];let o=!0;for(;!this.eat(t);){if(o)o=!1;else if(this.expect(d.comma),this.eat(t))break;n.push(this.parseExprListItem(e,r))}return n}parseExprListItem(t,e,r,n){let o;if(t&&this.match(d.comma))o=null;else if(this.match(d.ellipsis)){const t=this.state.start,n=this.state.startLoc;o=this.parseParenItem(this.parseSpread(e,r),t,n)}else if(this.match(d.question)){this.expectPlugin("partialApplication"),n||this.raise(this.state.start,"Unexpected argument placeholder");const t=this.startNode();this.next(),o=this.finishNode(t,"ArgumentPlaceholder")}else o=this.parseMaybeAssign(!1,e,this.parseParenItem,r);return o}parseIdentifier(t){const e=this.startNode(),r=this.parseIdentifierName(e.start,t);return this.createIdentifier(e,r)}createIdentifier(t,e){return t.name=e,t.loc.identifierName=e,this.finishNode(t,"Identifier")}parseIdentifierName(t,e){let r;if(this.match(d.name))r=this.state.value;else{if(!this.state.type.keyword)throw this.unexpected();"class"!==(r=this.state.type.keyword)&&"function"!==r||this.state.lastTokEnd===this.state.lastTokStart+1&&46===this.input.charCodeAt(this.state.lastTokStart)||this.state.context.pop()}return e||this.checkReservedWord(r,this.state.start,!!this.state.type.keyword,!1),this.next(),r}checkReservedWord(t,e,r,n){this.scope.inGenerator&&"yield"===t&&this.raise(e,"Can not use 'yield' as identifier inside a generator"),this.scope.inAsync&&"await"===t&&this.raise(e,"Can not use 'await' as identifier inside an async function"),this.state.inClassProperty&&"arguments"===t&&this.raise(e,"'arguments' is not allowed in class field initializer"),r&&function(t){return h.has(t)}(t)&&this.raise(e,`Unexpected keyword '${t}'`),(this.state.strict?n?ct:pt:ht)(t,this.inModule)&&(this.scope.inAsync||"await"!==t||this.raise(e,"Can not use keyword 'await' outside an async function"),this.raise(e,`Unexpected reserved word '${t}'`))}parseAwait(){this.state.awaitPos||(this.state.awaitPos=this.state.start);const t=this.startNode();return this.next(),this.state.inParameters&&this.raise(t.start,"await is not allowed in async function parameters"),this.match(d.star)&&this.raise(t.start,"await* has been removed from the async functions proposal. Use Promise.all() instead."),this.state.soloAwait||(t.argument=this.parseMaybeUnary()),this.finishNode(t,"AwaitExpression")}parseYield(t){this.state.yieldPos||(this.state.yieldPos=this.state.start);const e=this.startNode();return this.state.inParameters&&this.raise(e.start,"yield is not allowed in generator parameters"),this.next(),this.match(d.semi)||!this.match(d.star)&&!this.state.type.startsExpr||this.canInsertSemicolon()?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(d.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")}checkPipelineAtInfixOperator(t,e){if("smart"===this.getPluginOption("pipelineOperator","proposal")&&"SequenceExpression"===t.type)throw this.raise(e,"Pipeline head should not be a comma-separated sequence expression")}parseSmartPipelineBody(t,e,r){const n=this.checkSmartPipelineBodyStyle(t);return this.checkSmartPipelineBodyEarlyErrors(t,n,e),this.parseSmartPipelineBodyInStyle(t,n,e,r)}checkSmartPipelineBodyEarlyErrors(t,e,r){if(this.match(d.arrow))throw this.raise(this.state.start,'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized');if("PipelineTopicExpression"===e&&"SequenceExpression"===t.type)throw this.raise(r,"Pipeline body may not be a comma-separated sequence expression")}parseSmartPipelineBodyInStyle(t,e,r,n){const o=this.startNodeAt(r,n);switch(e){case"PipelineBareFunction":o.callee=t;break;case"PipelineBareConstructor":o.callee=t.callee;break;case"PipelineBareAwaitedFunction":o.callee=t.argument;break;case"PipelineTopicExpression":if(!this.topicReferenceWasUsedInCurrentTopicContext())throw this.raise(r,"Pipeline is in topic style but does not use topic reference");o.expression=t;break;default:throw this.raise(r,`Unknown pipeline style ${e}`)}return this.finishNode(o,e)}checkSmartPipelineBodyStyle(t){return t.type,this.isSimpleReference(t)?"PipelineBareFunction":"PipelineTopicExpression"}isSimpleReference(t){switch(t.type){case"MemberExpression":return!t.computed&&this.isSimpleReference(t.object);case"Identifier":return!0;default:return!1}}withTopicPermittingContext(t){const e=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return t()}finally{this.state.topicContext=e}}withTopicForbiddingContext(t){const e=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return t()}finally{this.state.topicContext=e}}withSoloAwaitPermittingContext(t){const e=this.state.soloAwait;this.state.soloAwait=!0;try{return t()}finally{this.state.soloAwait=e}}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}primaryTopicReferenceIsAllowedInCurrentTopicContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentTopicContext(){return null!=this.state.topicContext.maxTopicIndex&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(t,e){const r=this.state.start,n=this.state.startLoc;this.state.potentialArrowAt=this.state.start;const o=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;const h=this.parseExprOp(this.parseMaybeUnary(),r,n,t,e);return this.state.inFSharpPipelineDirectBody=o,h}}const ce={kind:"loop"},le={kind:"switch"},ue=0,de=1,me=2,fe=4;class ye extends pe{parseTopLevel(t,e){if(e.sourceType=this.options.sourceType,e.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(e,!0,!0,d.eof),this.inModule&&!this.options.allowUndeclaredExports&&this.scope.undefinedExports.size>0)for(let t=0,e=Array.from(this.scope.undefinedExports);t<e.length;t++){const[r]=e[t],n=this.scope.undefinedExports.get(r);this.raise(n,`Export '${r}' is not defined`)}return t.program=this.finishNode(e,"Program"),t.comments=this.state.comments,this.options.tokens&&(t.tokens=this.state.tokens),this.finishNode(t,"File")}stmtToDirective(t){const e=t.expression,r=this.startNodeAt(e.start,e.loc.start),n=this.startNodeAt(t.start,t.loc.start),o=this.input.slice(e.start,e.end),h=r.value=o.slice(1,-1);return this.addExtra(r,"raw",o),this.addExtra(r,"rawValue",h),n.value=this.finishNodeAt(r,"DirectiveLiteral",e.end,e.loc.end),this.finishNodeAt(n,"Directive",t.end,t.loc.end)}parseInterpreterDirective(){if(!this.match(d.interpreterDirective))return null;const t=this.startNode();return t.value=this.state.value,this.next(),this.finishNode(t,"InterpreterDirective")}isLet(t){if(!this.isContextual("let"))return!1;tt.lastIndex=this.state.pos;const e=tt.exec(this.input),r=this.state.pos+e[0].length,n=this.input.charCodeAt(r);if(91===n)return!0;if(t)return!1;if(123===n)return!0;if(Tt(n)){let t=r+1;for(;bt(this.input.charCodeAt(t));)++t;const e=this.input.slice(r,t);if(!lt.test(e))return!0}return!1}parseStatement(t,e){return this.match(d.at)&&this.parseDecorators(!0),this.parseStatementContent(t,e)}parseStatementContent(t,e){let r=this.state.type;const n=this.startNode();let o;switch(this.isLet(t)&&(r=d._var,o="let"),r){case d._break:case d._continue:return this.parseBreakContinueStatement(n,r.keyword);case d._debugger:return this.parseDebuggerStatement(n);case d._do:return this.parseDoStatement(n);case d._for:return this.parseForStatement(n);case d._function:if(this.lookahead().type===d.dot)break;return t&&(this.state.strict?this.raise(this.state.start,"In strict mode code, functions can only be declared at top level or inside a block"):"if"!==t&&"label"!==t&&this.raise(this.state.start,"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement")),this.parseFunctionStatement(n,!1,!t);case d._class:return t&&this.unexpected(),this.parseClass(n,!0);case d._if:return this.parseIfStatement(n);case d._return:return this.parseReturnStatement(n);case d._switch:return this.parseSwitchStatement(n);case d._throw:return this.parseThrowStatement(n);case d._try:return this.parseTryStatement(n);case d._const:case d._var:return o=o||this.state.value,t&&"var"!==o&&this.unexpected(this.state.start,"Lexical declaration cannot appear in a single-statement context"),this.parseVarStatement(n,o);case d._while:return this.parseWhileStatement(n);case d._with:return this.parseWithStatement(n);case d.braceL:return this.parseBlock();case d.semi:return this.parseEmptyStatement(n);case d._export:case d._import:{const t=this.lookahead();if(t.type===d.parenL||t.type===d.dot)break;let o;return this.options.allowImportExportEverywhere||e||this.raise(this.state.start,"'import' and 'export' may only appear at the top level"),this.next(),r===d._import?"ImportDeclaration"!==(o=this.parseImport(n)).type||o.importKind&&"value"!==o.importKind||(this.sawUnambiguousESM=!0):("ExportNamedDeclaration"!==(o=this.parseExport(n)).type||o.exportKind&&"value"!==o.exportKind)&&("ExportAllDeclaration"!==o.type||o.exportKind&&"value"!==o.exportKind)&&"ExportDefaultDeclaration"!==o.type||(this.sawUnambiguousESM=!0),this.assertModuleNodeAllowed(n),o}default:if(this.isAsyncFunction())return t&&this.unexpected(null,"Async functions can only be declared at the top level or inside a block"),this.next(),this.parseFunctionStatement(n,!0,!t)}const h=this.state.value,c=this.parseExpression();return r===d.name&&"Identifier"===c.type&&this.eat(d.colon)?this.parseLabeledStatement(n,h,c,t):this.parseExpressionStatement(n,c)}assertModuleNodeAllowed(t){this.options.allowImportExportEverywhere||this.inModule||this.raise(t.start,"'import' and 'export' may appear only with 'sourceType: \"module\"'",{code:"BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED"})}takeDecorators(t){const e=this.state.decoratorStack[this.state.decoratorStack.length-1];e.length&&(t.decorators=e,this.resetStartLocationFromNode(t,e[0]),this.state.decoratorStack[this.state.decoratorStack.length-1]=[])}canHaveLeadingDecorator(){return this.match(d._class)}parseDecorators(t){const e=this.state.decoratorStack[this.state.decoratorStack.length-1];for(;this.match(d.at);){const t=this.parseDecorator();e.push(t)}this.match(d._export)?(t||this.unexpected(),this.hasPlugin("decorators")&&!this.getPluginOption("decorators","decoratorsBeforeExport")&&this.raise(this.state.start,"Using the export keyword between a decorator and a class is not allowed. Please use `export @dec class` instead.")):this.canHaveLeadingDecorator()||this.raise(this.state.start,"Leading decorators must be attached to a class declaration")}parseDecorator(){this.expectOnePlugin(["decorators-legacy","decorators"]);const t=this.startNode();if(this.next(),this.hasPlugin("decorators")){this.state.decoratorStack.push([]);const e=this.state.start,r=this.state.startLoc;let n;if(this.eat(d.parenL))n=this.parseExpression(),this.expect(d.parenR);else for(n=this.parseIdentifier(!1);this.eat(d.dot);){const t=this.startNodeAt(e,r);t.object=n,t.property=this.parseIdentifier(!0),t.computed=!1,n=this.finishNode(t,"MemberExpression")}t.expression=this.parseMaybeDecoratorArguments(n),this.state.decoratorStack.pop()}else t.expression=this.parseExprSubscripts();return this.finishNode(t,"Decorator")}parseMaybeDecoratorArguments(t){if(this.eat(d.parenL)){const e=this.startNodeAtNode(t);return e.callee=t,e.arguments=this.parseCallExpressionArguments(d.parenR,!1),this.toReferencedList(e.arguments),this.finishNode(e,"CallExpression")}return t}parseBreakContinueStatement(t,e){const r="break"===e;return this.next(),this.isLineTerminator()?t.label=null:(t.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(t,e),this.finishNode(t,r?"BreakStatement":"ContinueStatement")}verifyBreakContinue(t,e){const r="break"===e;let i;for(i=0;i<this.state.labels.length;++i){const e=this.state.labels[i];if(null==t.label||e.name===t.label.name){if(null!=e.kind&&(r||"loop"===e.kind))break;if(t.label&&r)break}}i===this.state.labels.length&&this.raise(t.start,"Unsyntactic "+e)}parseDebuggerStatement(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")}parseHeaderExpression(){this.expect(d.parenL);const t=this.parseExpression();return this.expect(d.parenR),t}parseDoStatement(t){return this.next(),this.state.labels.push(ce),t.body=this.withTopicForbiddingContext(()=>this.parseStatement("do")),this.state.labels.pop(),this.expect(d._while),t.test=this.parseHeaderExpression(),this.eat(d.semi),this.finishNode(t,"DoWhileStatement")}parseForStatement(t){this.next(),this.state.labels.push(ce);let e=-1;if((this.scope.inAsync||!this.scope.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")&&(e=this.state.lastTokStart),this.scope.enter(m),this.expect(d.parenL),this.match(d.semi))return e>-1&&this.unexpected(e),this.parseFor(t,null);const r=this.isLet();if(this.match(d._var)||this.match(d._const)||r){const n=this.startNode(),o=r?"let":this.state.value;return this.next(),this.parseVar(n,!0,o),this.finishNode(n,"VariableDeclaration"),(this.match(d._in)||this.isContextual("of"))&&1===n.declarations.length?this.parseForIn(t,n,e):(e>-1&&this.unexpected(e),this.parseFor(t,n))}const n={start:0},o=this.parseExpression(!0,n);if(this.match(d._in)||this.isContextual("of")){const r=this.isContextual("of")?"for-of statement":"for-in statement";return this.toAssignable(o,void 0,r),this.checkLVal(o,void 0,void 0,r),this.parseForIn(t,o,e)}return n.start&&this.unexpected(n.start),e>-1&&this.unexpected(e),this.parseFor(t,o)}parseFunctionStatement(t,e,r){return this.next(),this.parseFunction(t,de|(r?0:me),e)}parseIfStatement(t){return this.next(),t.test=this.parseHeaderExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(d._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")}parseReturnStatement(t){return this.scope.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.state.start,"'return' outside of function"),this.next(),this.isLineTerminator()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")}parseSwitchStatement(t){this.next(),t.discriminant=this.parseHeaderExpression();const e=t.cases=[];let r,n;for(this.expect(d.braceL),this.state.labels.push(le),this.scope.enter(m);!this.match(d.braceR);)if(this.match(d._case)||this.match(d._default)){const t=this.match(d._case);r&&this.finishNode(r,"SwitchCase"),e.push(r=this.startNode()),r.consequent=[],this.next(),t?r.test=this.parseExpression():(n&&this.raise(this.state.lastTokStart,"Multiple default clauses"),n=!0,r.test=null),this.expect(d.colon)}else r?r.consequent.push(this.parseStatement(null)):this.unexpected();return this.scope.exit(),r&&this.finishNode(r,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(t,"SwitchStatement")}parseThrowStatement(t){return this.next(),Q.test(this.input.slice(this.state.lastTokEnd,this.state.start))&&this.raise(this.state.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")}parseTryStatement(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.match(d._catch)){const e=this.startNode();if(this.next(),this.match(d.parenL)){this.expect(d.parenL),e.param=this.parseBindingAtom();const t="Identifier"===e.param.type;this.scope.enter(t?w:0),this.checkLVal(e.param,j,null,"catch clause"),this.expect(d.parenR)}else e.param=null,this.scope.enter(m);e.body=this.withTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(d._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")}parseVarStatement(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")}parseWhileStatement(t){return this.next(),t.test=this.parseHeaderExpression(),this.state.labels.push(ce),t.body=this.withTopicForbiddingContext(()=>this.parseStatement("while")),this.state.labels.pop(),this.finishNode(t,"WhileStatement")}parseWithStatement(t){return this.state.strict&&this.raise(this.state.start,"'with' in strict mode"),this.next(),t.object=this.parseHeaderExpression(),t.body=this.withTopicForbiddingContext(()=>this.parseStatement("with")),this.finishNode(t,"WithStatement")}parseEmptyStatement(t){return this.next(),this.finishNode(t,"EmptyStatement")}parseLabeledStatement(t,e,r,n){for(let t=0,n=this.state.labels;t<n.length;t++){n[t].name===e&&this.raise(r.start,`Label '${e}' is already declared`)}const o=this.state.type.isLoop?"loop":this.match(d._switch)?"switch":null;for(let i=this.state.labels.length-1;i>=0;i--){const label=this.state.labels[i];if(label.statementStart!==t.start)break;label.statementStart=this.state.start,label.kind=o}return this.state.labels.push({name:e,kind:o,statementStart:this.state.start}),t.body=this.parseStatement(n?-1===n.indexOf("label")?n+"label":n:"label"),this.state.labels.pop(),t.label=r,this.finishNode(t,"LabeledStatement")}parseExpressionStatement(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")}parseBlock(t=!1,e=!0){const r=this.startNode();return this.expect(d.braceL),e&&this.scope.enter(m),this.parseBlockBody(r,t,!1,d.braceR),e&&this.scope.exit(),this.finishNode(r,"BlockStatement")}isValidDirective(t){return"ExpressionStatement"===t.type&&"StringLiteral"===t.expression.type&&!t.expression.extra.parenthesized}parseBlockBody(t,e,r,n){const body=t.body=[],o=t.directives=[];this.parseBlockOrModuleBlockBody(body,e?o:void 0,r,n)}parseBlockOrModuleBlockBody(body,t,e,r){let n,o,h=!1;for(;!this.eat(r);){h||!this.state.containsOctal||o||(o=this.state.octalPosition);const r=this.parseStatement(null,e);if(t&&!h&&this.isValidDirective(r)){const e=this.stmtToDirective(r);t.push(e),void 0===n&&"use strict"===e.value.value&&(n=this.state.strict,this.setStrict(!0),o&&this.raise(o,"Octal literal in strict mode"))}else h=!0,body.push(r)}!1===n&&this.setStrict(!1)}parseFor(t,e){return t.init=e,this.expect(d.semi),t.test=this.match(d.semi)?null:this.parseExpression(),this.expect(d.semi),t.update=this.match(d.parenR)?null:this.parseExpression(),this.expect(d.parenR),t.body=this.withTopicForbiddingContext(()=>this.parseStatement("for")),this.scope.exit(),this.state.labels.pop(),this.finishNode(t,"ForStatement")}parseForIn(t,e,r){const n=this.match(d._in);return this.next(),n?r>-1&&this.unexpected(r):t.await=r>-1,"VariableDeclaration"!==e.type||null==e.declarations[0].init||n&&!this.state.strict&&"var"===e.kind&&"Identifier"===e.declarations[0].id.type?"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"):this.raise(e.start,`${n?"for-in":"for-of"} loop variable declaration may not have an initializer`),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(d.parenR),t.body=this.withTopicForbiddingContext(()=>this.parseStatement("for")),this.scope.exit(),this.state.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")}parseVar(t,e,r){const n=t.declarations=[],o=this.hasPlugin("typescript");for(t.kind=r;;){const t=this.startNode();if(this.parseVarId(t,r),this.eat(d.eq)?t.init=this.parseMaybeAssign(e):("const"!==r||this.match(d._in)||this.isContextual("of")?"Identifier"===t.id.type||e&&(this.match(d._in)||this.isContextual("of"))||this.raise(this.state.lastTokEnd,"Complex binding patterns require an initialization value"):o||this.unexpected(),t.init=null),n.push(this.finishNode(t,"VariableDeclarator")),!this.eat(d.comma))break}return t}parseVarId(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?B:j,void 0,"variable declaration")}parseFunction(t,e=ue,r=!1){const n=e&de,o=e&me,h=!(!n||e&fe);this.initFunction(t,r),this.match(d.star)&&o&&this.unexpected(this.state.start,"Generators can only be declared at the top level or inside a block"),t.generator=this.eat(d.star),n&&(t.id=this.parseFunctionId(h));const c=this.state.inClassProperty,l=this.state.yieldPos,m=this.state.awaitPos;return this.state.inClassProperty=!1,this.state.yieldPos=0,this.state.awaitPos=0,this.scope.enter(N(t.async,t.generator)),n||(t.id=this.parseFunctionId()),this.parseFunctionParams(t),this.withTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(t,n?"FunctionDeclaration":"FunctionExpression")}),this.scope.exit(),n&&!o&&this.checkFunctionStatementId(t),this.state.inClassProperty=c,this.state.yieldPos=l,this.state.awaitPos=m,t}parseFunctionId(t){return t||this.match(d.name)?this.parseIdentifier():null}parseFunctionParams(t,e){const r=this.state.inParameters;this.state.inParameters=!0,this.expect(d.parenL),t.params=this.parseBindingList(d.parenR,!1,e),this.state.inParameters=r,this.checkYieldAwaitInDefaultParams()}checkFunctionStatementId(t){t.id&&this.checkLVal(t.id,this.state.strict||t.generator||t.async?this.scope.treatFunctionsAsVar?B:j:U,null,"function name")}parseClass(t,e,r){this.next(),this.takeDecorators(t);const n=this.state.strict;return this.state.strict=!0,this.parseClassId(t,e,r),this.parseClassSuper(t),t.body=this.parseClassBody(!!t.superClass),this.state.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(d.eq)||this.match(d.semi)||this.match(d.braceR)}isClassMethod(){return this.match(d.parenL)}isNonstaticConstructor(t){return!(t.computed||t.static||"constructor"!==t.key.name&&"constructor"!==t.key.value)}parseClassBody(t){this.state.classLevel++;const e={hadConstructor:!1};let r=[];const n=this.startNode();return n.body=[],this.expect(d.braceL),this.withTopicForbiddingContext(()=>{for(;!this.eat(d.braceR);){if(this.eat(d.semi)){r.length>0&&this.raise(this.state.lastTokEnd,"Decorators must not be followed by a semicolon");continue}if(this.match(d.at)){r.push(this.parseDecorator());continue}const o=this.startNode();r.length&&(o.decorators=r,this.resetStartLocationFromNode(o,r[0]),r=[]),this.parseClassMember(n,o,e,t),"constructor"===o.kind&&o.decorators&&o.decorators.length>0&&this.raise(o.start,"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?")}}),r.length&&this.raise(this.state.start,"You have trailing decorators with no method"),this.state.classLevel--,this.finishNode(n,"ClassBody")}parseClassMember(t,e,r,n){let o=!1;const h=this.state.containsEsc;if(this.match(d.name)&&"static"===this.state.value){const r=this.parseIdentifier(!0);if(this.isClassMethod()){const n=e;return n.kind="method",n.computed=!1,n.key=r,n.static=!1,void this.pushClassMethod(t,n,!1,!1,!1,!1)}if(this.isClassProperty()){const n=e;return n.computed=!1,n.key=r,n.static=!1,void t.body.push(this.parseClassProperty(n))}if(h)throw this.unexpected();o=!0}this.parseClassMemberWithIsStatic(t,e,r,o,n)}parseClassMemberWithIsStatic(t,e,r,n,o){const h=e,c=e,l=e,m=e,f=h,y=h;if(e.static=n,this.eat(d.star))return f.kind="method",this.parseClassPropertyName(f),"PrivateName"===f.key.type?void this.pushClassPrivateMethod(t,c,!0,!1):(this.isNonstaticConstructor(h)&&this.raise(h.key.start,"Constructor can't be a generator"),void this.pushClassMethod(t,h,!0,!1,!1,!1));const x=this.state.containsEsc,P=this.parseClassPropertyName(e),T="PrivateName"===P.type,w="Identifier"===P.type;if(this.parsePostMemberNameModifiers(y),this.isClassMethod()){if(f.kind="method",T)return void this.pushClassPrivateMethod(t,c,!1,!1);const e=this.isNonstaticConstructor(h);let n=!1;e&&(h.kind="constructor",h.decorators&&this.raise(h.start,"You can't attach decorators to a class constructor"),r.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(P.start,"Duplicate constructor in the same class"),r.hadConstructor=!0,n=o),this.pushClassMethod(t,h,!1,!1,e,n)}else if(this.isClassProperty())T?this.pushClassPrivateProperty(t,m):this.pushClassProperty(t,l);else if(!w||"async"!==P.name||x||this.isLineTerminator())!w||"get"!==P.name&&"set"!==P.name||x||this.match(d.star)&&this.isLineTerminator()?this.isLineTerminator()?T?this.pushClassPrivateProperty(t,m):this.pushClassProperty(t,l):this.unexpected():(f.kind=P.name,this.parseClassPropertyName(h),"PrivateName"===f.key.type?this.pushClassPrivateMethod(t,c,!1,!1):(this.isNonstaticConstructor(h)&&this.raise(h.key.start,"Constructor can't have get/set modifier"),this.pushClassMethod(t,h,!1,!1,!1,!1)),this.checkGetterSetterParams(h));else{const e=this.eat(d.star);f.kind="method",this.parseClassPropertyName(f),"PrivateName"===f.key.type?this.pushClassPrivateMethod(t,c,e,!0):(this.isNonstaticConstructor(h)&&this.raise(h.key.start,"Constructor can't be an async function"),this.pushClassMethod(t,h,e,!0,!1,!1))}}parseClassPropertyName(t){const e=this.parsePropertyName(t);return t.computed||!t.static||"prototype"!==e.name&&"prototype"!==e.value||this.raise(e.start,"Classes may not have static property named prototype"),"PrivateName"===e.type&&"constructor"===e.id.name&&this.raise(e.start,"Classes may not have a private field named '#constructor'"),e}pushClassProperty(t,e){this.isNonstaticConstructor(e)&&this.raise(e.key.start,"Classes may not have a non-static field named 'constructor'"),t.body.push(this.parseClassProperty(e))}pushClassPrivateProperty(t,e){this.expectPlugin("classPrivateProperties",e.key.start),t.body.push(this.parseClassPrivateProperty(e))}pushClassMethod(t,e,r,n,o,h){t.body.push(this.parseMethod(e,r,n,o,h,"ClassMethod",!0))}pushClassPrivateMethod(t,e,r,n){this.expectPlugin("classPrivateMethods",e.key.start),t.body.push(this.parseMethod(e,r,n,!1,!1,"ClassPrivateMethod",!0))}parsePostMemberNameModifiers(t){}parseAccessModifier(){}parseClassPrivateProperty(t){return this.state.inClassProperty=!0,this.scope.enter(C|A),t.value=this.eat(d.eq)?this.parseMaybeAssign():null,this.semicolon(),this.state.inClassProperty=!1,this.scope.exit(),this.finishNode(t,"ClassPrivateProperty")}parseClassProperty(t){return t.typeAnnotation||this.expectPlugin("classProperties"),this.state.inClassProperty=!0,this.scope.enter(C|A),this.match(d.eq)?(this.expectPlugin("classProperties"),this.next(),t.value=this.parseMaybeAssign()):t.value=null,this.semicolon(),this.state.inClassProperty=!1,this.scope.exit(),this.finishNode(t,"ClassProperty")}parseClassId(t,e,r){this.match(d.name)?(t.id=this.parseIdentifier(),e&&this.checkLVal(t.id,F,void 0,"class name")):r||!e?t.id=null:this.unexpected(null,"A class name is required")}parseClassSuper(t){t.superClass=this.eat(d._extends)?this.parseExprSubscripts():null}parseExport(t){const e=this.maybeParseExportDefaultSpecifier(t),r=!e||this.eat(d.comma),n=r&&this.eatExportStar(t),o=n&&this.maybeParseExportNamespaceSpecifier(t),h=r&&(!o||this.eat(d.comma)),c=e||n;if(n&&!o)return e&&this.unexpected(),this.parseExportFrom(t,!0),this.finishNode(t,"ExportAllDeclaration");const l=this.maybeParseExportNamedSpecifiers(t);if(e&&r&&!n&&!l||o&&h&&!l)throw this.unexpected(null,d.braceL);let m;if(c||l?(m=!1,this.parseExportFrom(t,c)):m=this.maybeParseExportDeclaration(t),c||l||m)return this.checkExport(t,!0,!1,!!t.source),this.finishNode(t,"ExportNamedDeclaration");if(this.eat(d._default))return t.declaration=this.parseExportDefaultExpression(),this.checkExport(t,!0,!0),this.finishNode(t,"ExportDefaultDeclaration");throw this.unexpected(null,d.braceL)}eatExportStar(t){return this.eat(d.star)}maybeParseExportDefaultSpecifier(t){if(this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom");const e=this.startNode();return e.exported=this.parseIdentifier(!0),t.specifiers=[this.finishNode(e,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(t){if(this.isContextual("as")){t.specifiers||(t.specifiers=[]),this.expectPlugin("exportNamespaceFrom");const e=this.startNodeAt(this.state.lastTokStart,this.state.lastTokStartLoc);return this.next(),e.exported=this.parseIdentifier(!0),t.specifiers.push(this.finishNode(e,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(t){return!!this.match(d.braceL)&&(t.specifiers||(t.specifiers=[]),t.specifiers.push(...this.parseExportSpecifiers()),t.source=null,t.declaration=null,!0)}maybeParseExportDeclaration(t){if(this.shouldParseExportDeclaration()){if(this.isContextual("async")){const t=this.lookahead();t.type!==d._function&&this.unexpected(t.start,'Unexpected token, expected "function"')}return t.specifiers=[],t.source=null,t.declaration=this.parseExportDeclaration(t),!0}return!1}isAsyncFunction(){if(!this.isContextual("async"))return!1;const{pos:t}=this.state;tt.lastIndex=t;const e=tt.exec(this.input);if(!e||!e.length)return!1;const r=t+e[0].length;return!(Q.test(this.input.slice(t,r))||"function"!==this.input.slice(r,r+8)||r+8!==this.length&&bt(this.input.charCodeAt(r+8)))}parseExportDefaultExpression(){const t=this.startNode(),e=this.isAsyncFunction();if(this.match(d._function)||e)return this.next(),e&&this.next(),this.parseFunction(t,de|fe,e);if(this.match(d._class))return this.parseClass(t,!0,!0);if(this.match(d.at))return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")&&this.unexpected(this.state.start,"Decorators must be placed *before* the 'export' keyword. You can set the 'decoratorsBeforeExport' option to false to use the 'export @decorator class {}' syntax"),this.parseDecorators(!1),this.parseClass(t,!0,!0);if(this.match(d._const)||this.match(d._var)||this.isLet())return this.raise(this.state.start,"Only expressions, functions or classes are allowed as the `default` export.");{const t=this.parseMaybeAssign();return this.semicolon(),t}}parseExportDeclaration(t){return this.parseStatement(null)}isExportDefaultSpecifier(){if(this.match(d.name))return"async"!==this.state.value&&"let"!==this.state.value;if(!this.match(d._default))return!1;const t=this.lookahead();return t.type===d.comma||t.type===d.name&&"from"===t.value}parseExportFrom(t,e){this.eatContextual("from")?(t.source=this.parseImportSource(),this.checkExport(t)):e?this.unexpected():t.source=null,this.semicolon()}shouldParseExportDeclaration(){if(this.match(d.at)&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators"))){if(!this.getPluginOption("decorators","decoratorsBeforeExport"))return!0;this.unexpected(this.state.start,"Decorators must be placed *before* the 'export' keyword. You can set the 'decoratorsBeforeExport' option to false to use the 'export @decorator class {}' syntax")}return"var"===this.state.type.keyword||"const"===this.state.type.keyword||"function"===this.state.type.keyword||"class"===this.state.type.keyword||this.isLet()||this.isAsyncFunction()}checkExport(t,e,r,n){if(e)if(r)this.checkDuplicateExports(t,"default");else if(t.specifiers&&t.specifiers.length)for(let e=0,r=t.specifiers;e<r.length;e++){const t=r[e];this.checkDuplicateExports(t,t.exported.name),!n&&t.local&&(this.checkReservedWord(t.local.name,t.local.start,!0,!1),this.scope.checkLocalExport(t.local))}else if(t.declaration)if("FunctionDeclaration"===t.declaration.type||"ClassDeclaration"===t.declaration.type){const e=t.declaration.id;if(!e)throw new Error("Assertion failure");this.checkDuplicateExports(t,e.name)}else if("VariableDeclaration"===t.declaration.type)for(let e=0,r=t.declaration.declarations;e<r.length;e++){const t=r[e];this.checkDeclaration(t.id)}if(this.state.decoratorStack[this.state.decoratorStack.length-1].length){const e=t.declaration&&("ClassDeclaration"===t.declaration.type||"ClassExpression"===t.declaration.type);if(!t.declaration||!e)throw this.raise(t.start,"You can only use decorators on an export when exporting a class");this.takeDecorators(t.declaration)}}checkDeclaration(t){if("Identifier"===t.type)this.checkDuplicateExports(t,t.name);else if("ObjectPattern"===t.type)for(let e=0,r=t.properties;e<r.length;e++){const t=r[e];this.checkDeclaration(t)}else if("ArrayPattern"===t.type)for(let e=0,r=t.elements;e<r.length;e++){const t=r[e];t&&this.checkDeclaration(t)}else"ObjectProperty"===t.type?this.checkDeclaration(t.value):"RestElement"===t.type?this.checkDeclaration(t.argument):"AssignmentPattern"===t.type&&this.checkDeclaration(t.left)}checkDuplicateExports(t,e){if(this.state.exportedIdentifiers.indexOf(e)>-1)throw this.raise(t.start,"default"===e?"Only one default export allowed per module.":`\`${e}\` has already been exported. Exported identifiers must be unique.`);this.state.exportedIdentifiers.push(e)}parseExportSpecifiers(){const t=[];let e=!0;for(this.expect(d.braceL);!this.eat(d.braceR);){if(e)e=!1;else if(this.expect(d.comma),this.eat(d.braceR))break;const r=this.startNode();r.local=this.parseIdentifier(!0),r.exported=this.eatContextual("as")?this.parseIdentifier(!0):r.local.__clone(),t.push(this.finishNode(r,"ExportSpecifier"))}return t}parseImport(t){if(t.specifiers=[],!this.match(d.string)){const e=!this.maybeParseDefaultImportSpecifier(t)||this.eat(d.comma),r=e&&this.maybeParseStarImportSpecifier(t);e&&!r&&this.parseNamedImportSpecifiers(t),this.expectContextual("from")}return t.source=this.parseImportSource(),this.semicolon(),this.finishNode(t,"ImportDeclaration")}parseImportSource(){return this.match(d.string)||this.unexpected(),this.parseExprAtom()}shouldParseDefaultImport(t){return this.match(d.name)}parseImportSpecifierLocal(t,e,r,n){e.local=this.parseIdentifier(),this.checkLVal(e.local,j,void 0,n),t.specifiers.push(this.finishNode(e,r))}maybeParseDefaultImportSpecifier(t){return!!this.shouldParseDefaultImport(t)&&(this.parseImportSpecifierLocal(t,this.startNode(),"ImportDefaultSpecifier","default import specifier"),!0)}maybeParseStarImportSpecifier(t){if(this.match(d.star)){const e=this.startNode();return this.next(),this.expectContextual("as"),this.parseImportSpecifierLocal(t,e,"ImportNamespaceSpecifier","import namespace specifier"),!0}return!1}parseNamedImportSpecifiers(t){let e=!0;for(this.expect(d.braceL);!this.eat(d.braceR);){if(e)e=!1;else if(this.eat(d.colon)&&this.unexpected(null,"ES2015 named imports do not destructure. Use another statement for destructuring after the import."),this.expect(d.comma),this.eat(d.braceR))break;this.parseImportSpecifier(t)}}parseImportSpecifier(t){const e=this.startNode();e.imported=this.parseIdentifier(!0),this.eatContextual("as")?e.local=this.parseIdentifier():(this.checkReservedWord(e.imported.name,e.start,!0,!0),e.local=e.imported.__clone()),this.checkLVal(e.local,j,void 0,"import specifier"),t.specifiers.push(this.finishNode(e,"ImportSpecifier"))}}class xe extends ye{constructor(t,input){super(t=function(t){const e={};for(let r=0,n=Object.keys(Kt);r<n.length;r++){const o=n[r];e[o]=t&&null!=t[o]?t[o]:Kt[o]}return e}(t),input);const e=this.getScopeHandler();this.options=t,this.inModule="module"===this.options.sourceType,this.scope=new e(this.raise.bind(this),this.inModule),this.plugins=function(t){const e=new Map;for(let r=0;r<t.length;r++){const n=t[r],[o,h]=Array.isArray(n)?n:[n,{}];e.has(o)||e.set(o,h||{})}return e}(this.options.plugins),this.filename=t.sourceFilename}getScopeHandler(){return Dt}parse(){this.scope.enter(f);const t=this.startNode(),e=this.startNode();return this.nextToken(),this.parseTopLevel(t,e)}}function Pe(t,input){let e=xe;return t&&t.plugins&&(!function(t){if(jt(t,"decorators")){if(jt(t,"decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");const e=Bt(t,"decorators","decoratorsBeforeExport");if(null==e)throw new Error("The 'decorators' plugin requires a 'decoratorsBeforeExport' option, whose value must be a boolean. If you are migrating from Babylon/Babel 6 or want to use the old decorators proposal, you should use the 'decorators-legacy' plugin instead of 'decorators'.");if("boolean"!=typeof e)throw new Error("'decoratorsBeforeExport' must be a boolean.")}if(jt(t,"flow")&&jt(t,"typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(jt(t,"pipelineOperator")&&!qt.includes(Bt(t,"pipelineOperator","proposal")))throw new Error("'pipelineOperator' requires 'proposal' option whose value should be one of: "+qt.map(p=>`'${p}'`).join(", "))}(t.plugins),e=function(t){const e=Vt.filter(e=>jt(t,e)),r=e.join("/");let n=ge[r];if(!n){n=xe;for(let t=0;t<e.length;t++){const r=e[t];n=Ut[r](n)}ge[r]=n}return n}(t.plugins)),new e(t,input)}const ge={};e.parse=function(input,t){if(!t||"unambiguous"!==t.sourceType)return Pe(t,input).parse();t=Object.assign({},t);try{t.sourceType="module";const e=Pe(t,input),r=e.parse();return e.sawUnambiguousESM||(r.program.sourceType="script"),r}catch(e){try{return t.sourceType="script",Pe(t,input).parse()}catch(t){}throw e}},e.parseExpression=function(input,t){const e=Pe(t,input);return e.options.strictMode&&(e.state.strict=!0),e.getExpression()},e.tokTypes=d}}]);